import{a as T,b as ue,c as Ub,d as ip,e as v,f as $b,g as Al,h as Hb,i as zb,j as qb,k as op,l as Gb,m as Sl,n as Wb,o as Ml,p as Kb,q as Qb,r as De,s as ri,t as vn,u as Rl,v as Js,w as Yb,x as Zb,y as hr,z as Dt}from"./chunk-KZ55BCB2.js";var Xb=null;var sp=1;function Mt(t){let e=Xb;return Xb=t,e}var Jb={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function D1(t){if(!(lp(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===sp)){if(!t.producerMustRecompute(t)&&!ap(t)){t.dirty=!1,t.lastCleanEpoch=sp;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=sp}}function e0(t){return t&&(t.nextProducerIndex=0),Mt(t)}function t0(t,e){if(Mt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(lp(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)cp(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ap(t){Nl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(D1(n),r!==n.version))return!0}return!1}function n0(t){if(Nl(t),lp(t))for(let e=0;e<t.producerNode.length;e++)cp(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function cp(t,e){if(C1(t),Nl(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)cp(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Nl(i),i.producerIndexOfThis[r]=e}}function lp(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Nl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function C1(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function T1(){throw new Error}var A1=T1;function r0(t){A1=t}function U(t){return typeof t=="function"}function co(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Pl=co(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ii(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(o){e=o instanceof Pl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{i0(o)}catch(s){e=e??[],s instanceof Pl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Pl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)i0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ii(n,e)}remove(e){let{_finalizers:n}=this;n&&ii(n,e),e instanceof t&&e._removeParent(this)}};je.EMPTY=(()=>{let t=new je;return t.closed=!0,t})();var up=je.EMPTY;function kl(t){return t instanceof je||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function i0(t){U(t)?t():t.unsubscribe()}var tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var lo={setTimeout(t,e,...n){let{delegate:r}=lo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=lo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ol(t){lo.setTimeout(()=>{let{onUnhandledError:e}=tn;if(e)e(t);else throw t})}function ea(){}var o0=(()=>dp("C",void 0,void 0))();function s0(t){return dp("E",void 0,t)}function a0(t){return dp("N",t,void 0)}function dp(t,e,n){return{kind:t,value:e,error:n}}var oi=null;function uo(t){if(tn.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=oi;if(oi=null,n)throw r}}else t()}function c0(t){tn.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=t)}var si=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,kl(e)&&e.add(this)):this.destination=R1}static create(e,n,r){return new qn(e,n,r)}next(e){this.isStopped?fp(a0(e),this):this._next(e)}error(e){this.isStopped?fp(s0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fp(o0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},S1=Function.prototype.bind;function hp(t,e){return S1.call(t,e)}var pp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Fl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Fl(r)}else Fl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Fl(n)}}},qn=class extends si{constructor(e,n,r){super();let i;if(U(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&tn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hp(e.next,o),error:e.error&&hp(e.error,o),complete:e.complete&&hp(e.complete,o)}):i=e}this.destination=new pp(i)}};function Fl(t){tn.useDeprecatedSynchronousErrorHandling?c0(t):Ol(t)}function M1(t){throw t}function fp(t,e){let{onStoppedNotification:n}=tn;n&&lo.setTimeout(()=>n(t,e))}var R1={closed:!0,next:ea,error:M1,complete:ea};var ho=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function gt(t){return t}function mp(...t){return gp(t)}function gp(t){return t.length===0?gt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var W=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=P1(n)?n:new qn(n,r,i);return uo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=l0(r),new r((i,o)=>{let s=new qn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ho](){return this}pipe(...n){return gp(n)(this)}toPromise(n){return n=l0(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function l0(t){var e;return(e=t??tn.Promise)!==null&&e!==void 0?e:Promise}function N1(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function P1(t){return t&&t instanceof si||N1(t)&&kl(t)}function yp(t){return U(t?.lift)}function Q(t){return e=>{if(yp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new vp(t,e,n,r,i)}var vp=class extends si{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function fo(){return Q((t,e)=>{let n=null;t._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var po=class extends W{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,yp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return fo()(this)}};var u0=co(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class t extends W{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Vl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new u0}next(n){uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?up:(this.currentObservers=null,o.push(n),new je(()=>{this.currentObservers=null,ii(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new W;return n.source=this,n}}return t.create=(e,n)=>new Vl(e,n),t})(),Vl=class extends ke{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:up}};var nt=class extends ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ta={now(){return(ta.delegate||Date).now()},delegate:void 0};var Ll=class extends ke{constructor(e=1/0,n=1/0,r=ta){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var jl=class extends je{constructor(e,n){super()}schedule(e,n=0){return this}};var na={setInterval(t,e,...n){let{delegate:r}=na;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=na;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var mo=class extends jl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return na.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&na.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ii(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var go=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};go.now=ta.now;var yo=class extends go{constructor(e,n=go.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ai=new yo(mo);var Bl=class extends mo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ul=class extends yo{};var _p=new Ul(Bl);var Ct=new W(t=>t.complete());function d0(t){return t&&U(t.schedule)}function wp(t){return t[t.length-1]}function $l(t){return U(wp(t))?t.pop():void 0}function _n(t){return d0(wp(t))?t.pop():void 0}function h0(t,e){return typeof wp(t)=="number"?t.pop():e}var Hl=t=>t&&typeof t.length=="number"&&typeof t!="function";function zl(t){return U(t?.then)}function ql(t){return U(t[ho])}function Gl(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function Wl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function k1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Kl=k1();function Ql(t){return U(t?.[Kl])}function Yl(t){return Hb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Al(n.read());if(i)return yield Al(void 0);yield yield Al(r)}}finally{n.releaseLock()}})}function Zl(t){return U(t?.getReader)}function we(t){if(t instanceof W)return t;if(t!=null){if(ql(t))return O1(t);if(Hl(t))return F1(t);if(zl(t))return V1(t);if(Gl(t))return f0(t);if(Ql(t))return L1(t);if(Zl(t))return j1(t)}throw Wl(t)}function O1(t){return new W(e=>{let n=t[ho]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function F1(t){return new W(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function V1(t){return new W(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ol)})}function L1(t){return new W(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function f0(t){return new W(e=>{B1(t,e).catch(n=>e.error(n))})}function j1(t){return f0(Yl(t))}function B1(t,e){var n,r,i,o;return $b(this,void 0,void 0,function*(){try{for(n=zb(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Tt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function zt(t,e=0){return Q((n,r)=>{n.subscribe(Y(r,i=>Tt(r,t,()=>r.next(i),e),()=>Tt(r,t,()=>r.complete(),e),i=>Tt(r,t,()=>r.error(i),e)))})}function nn(t,e=0){return Q((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function p0(t,e){return we(t).pipe(nn(e),zt(e))}function m0(t,e){return we(t).pipe(nn(e),zt(e))}function g0(t,e){return new W(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function y0(t,e){return new W(n=>{let r;return Tt(n,e,()=>{r=t[Kl](),Tt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function Xl(t,e){if(!t)throw new Error("Iterable cannot be null");return new W(n=>{Tt(n,e,()=>{let r=t[Symbol.asyncIterator]();Tt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function v0(t,e){return Xl(Yl(t),e)}function _0(t,e){if(t!=null){if(ql(t))return p0(t,e);if(Hl(t))return g0(t,e);if(zl(t))return m0(t,e);if(Gl(t))return Xl(t,e);if(Ql(t))return y0(t,e);if(Zl(t))return v0(t,e)}throw Wl(t)}function oe(t,e){return e?_0(t,e):we(t)}function O(...t){let e=_n(t);return oe(t,e)}function vo(t,e){let n=U(t)?t:()=>t,r=i=>i.error(n());return new W(e?i=>e.schedule(r,0,i):r)}function bp(t){return!!t&&(t instanceof W||U(t.lift)&&U(t.subscribe))}var Gn=co(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function L(t,e){return Q((n,r)=>{let i=0;n.subscribe(Y(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:U1}=Array;function $1(t,e){return U1(e)?t(...e):t(e)}function Jl(t){return L(e=>$1(t,e))}var{isArray:H1}=Array,{getPrototypeOf:z1,prototype:q1,keys:G1}=Object;function eu(t){if(t.length===1){let e=t[0];if(H1(e))return{args:e,keys:null};if(W1(e)){let n=G1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function W1(t){return t&&typeof t=="object"&&z1(t)===q1}function tu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Wn(...t){let e=_n(t),n=$l(t),{args:r,keys:i}=eu(t);if(r.length===0)return oe([],e);let o=new W(K1(r,e,i?s=>tu(i,s):gt));return n?o.pipe(Jl(n)):o}function K1(t,e,n=gt){return r=>{w0(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)w0(e,()=>{let l=oe(t[c],e),u=!1;l.subscribe(Y(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function w0(t,e,n){t?Tt(n,t,e):e()}function b0(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=y=>l<r?g(y):c.push(y),g=y=>{o&&e.next(y),l++;let _=!1;we(n(y,u++)).subscribe(Y(e,I=>{i?.(I),o?f(I):e.next(I)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<r;){let I=c.shift();s?Tt(e,s,()=>g(I)):g(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(Y(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Be(t,e,n=1/0){return U(e)?Be((r,i)=>L((o,s)=>e(r,o,i,s))(we(t(r,i))),n):(typeof e=="number"&&(n=e),Q((r,i)=>b0(r,i,t,n)))}function fr(t=1/0){return Be(gt,t)}function E0(){return fr(1)}function pr(...t){return E0()(oe(t,_n(t)))}function nu(t){return new W(e=>{we(t()).subscribe(e)})}function Ep(...t){let e=$l(t),{args:n,keys:r}=eu(t),i=new W(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;we(n[u]).subscribe(Y(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?tu(r,a):a),o.complete())}))}});return e?i.pipe(Jl(e)):i}function ra(...t){let e=_n(t),n=h0(t,1/0),r=t;return r.length?r.length===1?we(r[0]):fr(n)(oe(r,e)):Ct}function Ue(t,e){return Q((n,r)=>{let i=0;n.subscribe(Y(r,o=>t.call(e,o,i++)&&r.next(o)))})}function mr(t){return Q((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Y(n,void 0,void 0,s=>{o=we(t(s,mr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function I0(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(Y(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function gr(t,e){return U(e)?Be(t,e,1):Be(t,1)}function Ip(t,e=ai){return Q((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+t,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(Y(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function yr(t){return Q((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function rn(t){return t<=0?()=>Ct:Q((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function xp(t){return L(()=>t)}function ia(t,e=gt){return t=t??Q1,Q((n,r)=>{let i,o=!0;n.subscribe(Y(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function Q1(t,e){return t===e}function ru(t=Y1){return Q((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Y1(){return new Gn}function _o(t){return Q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Rt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,o)=>t(i,o,r)):gt,rn(1),n?yr(e):ru(()=>new Gn))}function wo(t){return t<=0?()=>Ct:Q((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Dp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,o)=>t(i,o,r)):gt,wo(1),n?yr(e):ru(()=>new Gn))}function oa(){return Q((t,e)=>{let n,r=!1;t.subscribe(Y(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function ci(t,e){return Q(I0(t,e,arguments.length>=2,!0))}function sa(t={}){let{connector:e=()=>new ke,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,u=d=!1},g=()=>{let y=s;f(),y?.unsubscribe()};return Q((y,_)=>{l++,!d&&!u&&h();let I=c=c??e();_.add(()=>{l--,l===0&&!d&&!u&&(a=Cp(g,i))}),I.subscribe(_),!s&&l>0&&(s=new qn({next:P=>I.next(P),error:P=>{d=!0,h(),a=Cp(f,n,P),I.error(P)},complete:()=>{u=!0,h(),a=Cp(f,r),I.complete()}}),we(y).subscribe(s))})(o)}}function Cp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new qn({next:()=>{r.unsubscribe(),t()}});return we(e(...n)).subscribe(r)}function iu(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,sa({connector:()=>new Ll(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Tp(t){return Ue((e,n)=>t<=n)}function Kn(...t){let e=_n(t);return Q((n,r)=>{(e?pr(t,n,e):pr(t,n)).subscribe(r)})}function be(t,e){return Q((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Y(r,c=>{i?.unsubscribe();let l=0,u=o++;we(t(c,u)).subscribe(i=Y(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ou(t,e){return U(e)?be(()=>t,e):be(()=>t)}function aa(t){return Q((e,n)=>{we(t).subscribe(Y(n,()=>n.complete(),ea)),!n.closed&&e.subscribe(n)})}function Ae(t,e,n){let r=U(t)||e||n?{next:t,error:e,complete:n}:t;return r?Q((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Y(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):gt}function me(t){for(let e in t)if(t[e]===me)return e;throw Error("Could not find renamed property on target object.")}function su(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function dt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(dt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function x0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Z1=me({__forward_ref__:me});function Ia(t){return t.__forward_ref__=Ia,t.toString=function(){return dt(this())},t}function yt(t){return uE(t)?t():t}function uE(t){return typeof t=="function"&&t.hasOwnProperty(Z1)&&t.__forward_ref__===Ia}function dE(t){return t&&!!t.\u0275providers}var X1="https://g.co/ng/security#xss",F=class extends Error{constructor(e,n){super(Uu(e,n)),this.code=e}};function Uu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var J1=me({\u0275cmp:me}),eN=me({\u0275dir:me}),tN=me({\u0275pipe:me}),nN=me({\u0275mod:me}),vu=me({\u0275fac:me}),la=me({__NG_ELEMENT_ID__:me}),D0=me({__NG_ENV_ID__:me});function hE(t){return typeof t=="string"?t:t==null?"":String(t)}function rN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():hE(t)}function iN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new F(-200,`Circular dependency in DI detected for ${t}${n}`)}function Om(t,e){let n=e?` in ${e}`:"";throw new F(-201,!1)}function oN(t,e){t==null&&sN(e,t,null,"!=")}function sN(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function R(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ne(t){return{providers:t.providers||[],imports:t.imports||[]}}function $u(t){return C0(t,pE)||C0(t,mE)}function fE(t){return $u(t)!==null}function C0(t,e){return t.hasOwnProperty(e)?t[e]:null}function aN(t){let e=t&&(t[pE]||t[mE]);return e||null}function T0(t){return t&&(t.hasOwnProperty(A0)||t.hasOwnProperty(cN))?t[A0]:null}var pE=me({\u0275prov:me}),A0=me({\u0275inj:me}),mE=me({ngInjectableDef:me}),cN=me({ngInjectorDef:me}),ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ee||{}),zp;function gE(){return zp}function qt(t){let e=zp;return zp=t,e}function yE(t,e,n){let r=$u(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ee.Optional)return null;if(e!==void 0)return e;Om(dt(t),"Injector")}var Pt=globalThis;var M=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=R({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var lN={},da=lN,qp="__NG_DI_FLAG__",_u="ngTempTokenPath",uN="ngTokenPath",dN=/\n/gm,hN="\u0275",S0="__source",Do;function fN(){return Do}function vr(t){let e=Do;return Do=t,e}function pN(t,e=ee.Default){if(Do===void 0)throw new F(-203,!1);return Do===null?yE(t,void 0,e):Do.get(t,e&ee.Optional?null:void 0,e)}function b(t,e=ee.Default){return(gE()||pN)(yt(t),e)}function x(t,e=ee.Default){return b(t,Hu(e))}function Hu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Gp(t){let e=[];for(let n=0;n<t.length;n++){let r=yt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let i,o=ee.Default;for(let s=0;s<r.length;s++){let a=r[s],c=mN(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(b(i,o))}else e.push(b(r))}return e}function vE(t,e){return t[qp]=e,t.prototype[qp]=e,t}function mN(t){return t[qp]}function gN(t,e,n,r){let i=t[_u];throw e[S0]&&i.unshift(e[S0]),t.message=yN(`
`+t.message,i,n,r),t[uN]=i,t[_u]=null,t}function yN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==hN?t.slice(2):t;let i=dt(e);if(Array.isArray(e))i=e.map(dt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):dt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(dN,`
  `)}`}function xa(t){return{toString:t}.toString()}var _E=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_E||{}),In=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(In||{}),To={},Nt=[];function wE(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Wp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];_N(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function vN(t){return t===3||t===4||t===6}function _N(t){return t.charCodeAt(0)===64}function ha(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?M0(t,n,i,null,e[++r]):M0(t,n,i,null,null))}}return t}function M0(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var bE="ng-template";function wN(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&wE(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function EE(t){return t.type===4&&t.value!==bE}function bN(t,e,n){let r=t.type===4&&!n?bE:t.value;return e===r}function EN(t,e,n){let r=4,i=t.attrs||[],o=DN(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!on(r)&&!on(c))return!1;if(s&&on(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!bN(t,c,n)||c===""&&e.length===1){if(on(r))return!1;s=!0}}else{let l=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!wN(t.attrs,l,n)){if(on(r))return!1;s=!0}continue}let u=r&8?"class":c,d=IN(u,i,EE(t),n);if(d===-1){if(on(r))return!1;s=!0;continue}if(l!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&wE(f,l,0)!==-1||r&2&&l!==h){if(on(r))return!1;s=!0}}}}return on(r)||s}function on(t){return(t&1)===0}function IN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return CN(e,t)}function IE(t,e,n=!1){for(let r=0;r<e.length;r++)if(EN(t,e[r],n))return!0;return!1}function xN(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function DN(t){for(let e=0;e<t.length;e++){let n=t[e];if(vN(n))return e}return t.length}function CN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function TN(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function R0(t,e){return t?":not("+e.trim()+")":e}function AN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!on(s)&&(e+=R0(o,i),i=""),r=s,o=o||!on(r);n++}return i!==""&&(e+=R0(o,i)),e}function SN(t){return t.map(AN).join(",")}function MN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!on(i))break;i=o}r++}return{attrs:e,classes:n}}function rt(t){return xa(()=>{let e=AE(t),n=ue(T({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_E.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||In.Emulated,styles:t.styles||Nt,_:null,schemas:t.schemas||null,tView:null,id:""});SE(n);let r=t.dependencies;return n.directiveDefs=P0(r,!1),n.pipeDefs=P0(r,!0),n.id=PN(n),n})}function RN(t){return wr(t)||xE(t)}function NN(t){return t!==null}function re(t){return xa(()=>({type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function N0(t,e){if(t==null)return To;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function Me(t){return xa(()=>{let e=AE(t);return SE(e),e})}function wr(t){return t[J1]||null}function xE(t){return t[eN]||null}function DE(t){return t[tN]||null}function CE(t){let e=wr(t)||xE(t)||DE(t);return e!==null?e.standalone:!1}function TE(t,e){let n=t[nN]||null;if(!n&&e===!0)throw new Error(`Type ${dt(t)} does not have '\u0275mod' property.`);return n}function AE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||To,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:N0(t.inputs,e),outputs:N0(t.outputs),debugInfo:null}}function SE(t){t.features?.forEach(e=>e(t))}function P0(t,e){if(!t)return null;let n=e?DE:RN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(NN)}function PN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Ot=0,te=1,$=2,$e=3,sn=4,Lt=5,xn=6,fa=7,Dn=8,Ao=9,pa=10,Se=11,ma=12,k0=13,Oo=14,Ft=15,zu=16,bo=17,ga=18,qu=19,ME=20,_r=21,Ap=22,ui=23,vt=25,RE=1,ya=6,Qn=7,wu=8,bu=9,kt=10,So=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(So||{});function En(t){return Array.isArray(t)&&typeof t[RE]=="object"}function Gt(t){return Array.isArray(t)&&t[RE]===!0}function NE(t){return(t.flags&4)!==0}function Da(t){return t.componentOffset>-1}function Fm(t){return(t.flags&1)===1}function br(t){return!!t.template}function PE(t){return(t[$]&512)!==0}function Mo(t,e){let n=t.hasOwnProperty(vu);return n?t[vu]:null}var Kp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ir(){return kE}function kE(t){return t.type.prototype.ngOnChanges&&(t.setInput=ON),kN}Ir.ngInherit=!0;function kN(){let t=FE(this),e=t?.current;if(e){let n=t.previous;if(n===To)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ON(t,e,n,r){let i=this.declaredInputs[n],o=FE(t)||FN(t,{previous:To,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new Kp(c&&c.currentValue,e,a===To),t[r]=e}var OE="__ngSimpleChanges__";function FE(t){return t[OE]||null}function FN(t,e){return t[OE]=e}var O0=null;var wn=function(t,e,n){O0?.(t,e,n)},VE="svg",VN="math";function an(t){for(;Array.isArray(t);)t=t[Ot];return t}function LE(t,e){return an(e[t])}function Wt(t,e){return an(e[t.index])}function jE(t,e){return t.data[e]}function LN(t,e){return t[e]}function xr(t,e){let n=e[t];return En(n)?n:n[Ot]}function Vm(t){return(t[$]&128)===128}function jN(t){return Gt(t[$e])}function Eu(t,e){return e==null?null:t[e]}function BE(t){t[bo]=0}function BN(t){t[$]&1024||(t[$]|=1024,Vm(t)&&Gu(t))}function UN(t,e){for(;t>0;)e=e[Oo],t--;return e}function UE(t){return t[$]&9216||t[ui]?.dirty}function $E(t){UE(t)&&Gu(t)}function Gu(t){let e=t[$e];for(;e!==null&&!(Gt(e)&&e[$]&So.HasChildViewsToRefresh||En(e)&&e[$]&8192);){if(Gt(e))e[$]|=So.HasChildViewsToRefresh;else if(e[$]|=8192,!Vm(e))break;e=e[$e]}}function HE(t,e){if((t[$]&256)===256)throw new F(911,!1);t[_r]===null&&(t[_r]=[]),t[_r].push(e)}function $N(t,e){if(t[_r]===null)return;let n=t[_r].indexOf(e);n!==-1&&t[_r].splice(n,1)}var J={lFrame:XE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function HN(){return J.lFrame.elementDepthCount}function zN(){J.lFrame.elementDepthCount++}function qN(){J.lFrame.elementDepthCount--}function zE(){return J.bindingsEnabled}function Fo(){return J.skipHydrationRootTNode!==null}function GN(t){return J.skipHydrationRootTNode===t}function WN(t){J.skipHydrationRootTNode=t}function KN(){J.skipHydrationRootTNode=null}function Ce(){return J.lFrame.lView}function cn(){return J.lFrame.tView}function Kt(){let t=qE();for(;t!==null&&t.type===64;)t=t.parent;return t}function qE(){return J.lFrame.currentTNode}function QN(){let t=J.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ca(t,e){let n=J.lFrame;n.currentTNode=t,n.isParent=e}function GE(){return J.lFrame.isParent}function WE(){J.lFrame.isParent=!1}function YN(){return J.lFrame.contextLView}function ZN(){let t=J.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function XN(t){return J.lFrame.bindingIndex=t}function KE(){return J.lFrame.bindingIndex++}function JN(t){let e=J.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eP(){return J.lFrame.inI18n}function tP(t,e){let n=J.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qp(e)}function nP(){return J.lFrame.currentDirectiveIndex}function Qp(t){J.lFrame.currentDirectiveIndex=t}function rP(t){let e=J.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function QE(t){J.lFrame.currentQueryIndex=t}function iP(t){let e=t[te];return e.type===2?e.declTNode:e.type===1?t[Lt]:null}function YE(t,e,n){if(n&ee.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ee.Host);)if(i=iP(o),i===null||(o=o[Oo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=J.lFrame=ZE();return r.currentTNode=e,r.lView=t,!0}function Lm(t){let e=ZE(),n=t[te];J.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ZE(){let t=J.lFrame,e=t===null?null:t.child;return e===null?XE(t):e}function XE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function JE(){let t=J.lFrame;return J.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var eI=JE;function jm(){let t=JE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function oP(t){return(J.lFrame.contextLView=UN(t,J.lFrame.contextLView))[Dn]}function Vo(){return J.lFrame.selectedIndex}function di(t){J.lFrame.selectedIndex=t}function sP(){let t=J.lFrame;return jE(t.tView,t.selectedIndex)}function Wu(){J.lFrame.currentNamespace=VE}function Ku(){aP()}function aP(){J.lFrame.currentNamespace=null}function tI(){return J.lFrame.currentNamespace}var nI=!0;function Bm(){return nI}function Dr(t){nI=t}function cP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=kE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Um(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function fu(t,e,n){rI(t,e,3,n)}function pu(t,e,n,r){(t[$]&3)===n&&rI(t,e,n,r)}function Sp(t,e){let n=t[$];(n&3)===e&&(n&=16383,n+=1,t[$]=n)}function rI(t,e,n,r){let i=r!==void 0?t[bo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[bo]+=65536),(a<o||o==-1)&&(lP(t,n,e,c),t[bo]=(t[bo]&4294901760)+c+2),c++}function F0(t,e){wn(4,t,e);let n=Mt(null);try{e.call(t)}finally{Mt(n),wn(5,t,e)}}function lP(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[$]>>14<t[bo]>>16&&(t[$]&3)===e&&(t[$]+=16384,F0(a,o)):F0(a,o)}var Co=-1,hi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function uP(t){return t instanceof hi}function dP(t){return(t.flags&8)!==0}function hP(t){return(t.flags&16)!==0}function iI(t){return t!==Co}function Iu(t){let e=t&32767;return t&32767}function fP(t){return t>>16}function xu(t,e){let n=fP(t),r=e;for(;n>0;)r=r[Oo],n--;return r}var Yp=!0;function V0(t){let e=Yp;return Yp=t,e}var pP=256,oI=pP-1,sI=5,mP=0,bn={};function gP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(la)&&(r=n[la]),r==null&&(r=n[la]=mP++);let i=r&oI,o=1<<i;e.data[t+(i>>sI)]|=o}function Du(t,e){let n=aI(t,e);if(n!==-1)return n;let r=e[te];r.firstCreatePass&&(t.injectorIndex=e.length,Mp(r.data,t),Mp(e,null),Mp(r.blueprint,null));let i=$m(t,e),o=t.injectorIndex;if(iI(i)){let s=Iu(i),a=xu(i,e),c=a[te].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Mp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function aI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function $m(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=hI(i),r===null)return Co;if(n++,i=i[Oo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Co}function Zp(t,e,n){gP(t,e,n)}function cI(t,e,n){if(n&ee.Optional||t!==void 0)return t;Om(e,"NodeInjector")}function lI(t,e,n,r){if(n&ee.Optional&&r===void 0&&(r=null),!(n&(ee.Self|ee.Host))){let i=t[Ao],o=qt(void 0);try{return i?i.get(e,r,n&ee.Optional):yE(e,r,n&ee.Optional)}finally{qt(o)}}return cI(r,e,n)}function uI(t,e,n,r=ee.Default,i){if(t!==null){if(e[$]&2048&&!(r&ee.Self)){let s=bP(t,e,n,r,bn);if(s!==bn)return s}let o=dI(t,e,n,r,bn);if(o!==bn)return o}return lI(e,n,r,i)}function dI(t,e,n,r,i){let o=_P(n);if(typeof o=="function"){if(!YE(e,t,r))return r&ee.Host?cI(i,n,r):lI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ee.Optional))Om(n);else return s}finally{eI()}}else if(typeof o=="number"){let s=null,a=aI(t,e),c=Co,l=r&ee.Host?e[Ft][Lt]:null;for((a===-1||r&ee.SkipSelf)&&(c=a===-1?$m(t,e):e[a+8],c===Co||!j0(r,!1)?a=-1:(s=e[te],a=Iu(c),e=xu(c,e)));a!==-1;){let u=e[te];if(L0(o,a,u.data)){let d=yP(a,e,n,s,r,l);if(d!==bn)return d}c=e[a+8],c!==Co&&j0(r,e[te].data[a+8]===l)&&L0(o,a,e)?(s=u,a=Iu(c),e=xu(c,e)):a=-1}}return i}function yP(t,e,n,r,i,o){let s=e[te],a=s.data[t+8],c=r==null?Da(a)&&Yp:r!=s&&(a.type&3)!==0,l=i&ee.Host&&o===a,u=vP(a,s,n,c,l);return u!==null?Ro(e,s,u,a):bn}function vP(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let g=s[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=s[c];if(f&&br(f)&&f.type===n)return c}return null}function Ro(t,e,n,r){let i=t[n],o=e.data;if(uP(i)){let s=i;s.resolving&&iN(rN(o[n]));let a=V0(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?qt(s.injectImpl):null,u=YE(t,r,ee.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&cP(n,o[n],e)}finally{l!==null&&qt(l),V0(a),s.resolving=!1,eI()}}return i}function _P(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(la)?t[la]:void 0;return typeof e=="number"?e>=0?e&oI:wP:e}function L0(t,e,n){let r=1<<t;return!!(n[e+(t>>sI)]&r)}function j0(t,e){return!(t&ee.Self)&&!(t&ee.Host&&e)}var li=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return uI(this._tNode,this._lView,e,Hu(r),n)}};function wP(){return new li(Kt(),Ce())}function Ta(t){return xa(()=>{let e=t.prototype.constructor,n=e[vu]||Xp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[vu]||Xp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Xp(t){return uE(t)?()=>{let e=Xp(yt(t));return e&&e()}:Mo(t)}function bP(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[$]&2048&&!(s[$]&512);){let a=dI(o,s,n,r|ee.Self,bn);if(a!==bn)return a;let c=o.parent;if(!c){let l=s[ME];if(l){let u=l.get(n,bn,r);if(u!==bn)return u}c=hI(s),s=s[Oo]}o=c}return i}function hI(t){let e=t[te],n=e.type;return n===2?e.declTNode:n===1?t[Lt]:null}var au="__parameters__";function EP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function fI(t,e,n){return xa(()=>{let r=EP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(au)?c[au]:Object.defineProperty(c,au,{value:[]})[au];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function IP(t){let e=Pt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function xP(t){return typeof t=="function"}function Hm(t,e){t.forEach(n=>Array.isArray(n)?Hm(n,e):e(n))}function pI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Cu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function mI(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function DP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function CP(t,e,n){let r=Aa(t,e);return r>=0?t[r|1]=n:(r=~r,DP(t,r,e,n)),r}function Rp(t,e){let n=Aa(t,e);if(n>=0)return t[n|1]}function Aa(t,e){return TP(t,e,1)}function TP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var gi=vE(fI("Optional"),8);var Qu=vE(fI("SkipSelf"),4);function AP(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(NP))}return o}return Tu.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[l+h]=f,u.splice(u.indexOf(d),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>PP(o));e.push(c)}),MP(),Promise.all(e).then(()=>{})}var Tu=new Map,SP=new Set;function MP(){let t=Tu;return Tu=new Map,t}function RP(){return Tu.size===0}function NP(t){return typeof t=="string"?t:t.text()}function PP(t){SP.delete(t)}var Lo=new M("ENVIRONMENT_INITIALIZER"),gI=new M("INJECTOR",-1),yI=new M("INJECTOR_DEF_TYPES"),Au=class{get(e,n=da){if(n===da){let r=new Error(`NullInjectorError: No provider for ${dt(e)}!`);throw r.name="NullInjectorError",r}return n}};function Sa(t){return{\u0275providers:t}}function kP(...t){return{\u0275providers:vI(!0,t),\u0275fromNgModule:!0}}function vI(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Hm(e,s=>{let a=s;Jp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&_I(i,o),n}function _I(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];zm(i,o=>{e(o,r)})}}function Jp(t,e,n,r){if(t=yt(t),!t)return!1;let i=null,o=T0(t),s=!o&&wr(t);if(!o&&!s){let c=t.ngModule;if(o=T0(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Jp(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Hm(o.imports,u=>{Jp(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&_I(l,e)}if(!a){let l=Mo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Nt},i),e({provide:yI,useValue:i,multi:!0},i),e({provide:Lo,useValue:()=>b(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;zm(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function zm(t,e){for(let n of t)dE(n)&&(n=n.\u0275providers),Array.isArray(n)?zm(n,e):e(n)}var OP=me({provide:String,useValue:me});function wI(t){return t!==null&&typeof t=="object"&&OP in t}function FP(t){return!!(t&&t.useExisting)}function VP(t){return!!(t&&t.useFactory)}function No(t){return typeof t=="function"}function LP(t){return!!t.useClass}var Yu=new M("Set Injector scope."),mu={},jP={},Np;function qm(){return Np===void 0&&(Np=new Au),Np}var Vt=class{},va=class extends Vt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,tm(e,s=>this.processProvider(s)),this.records.set(gI,Eo(void 0,this)),i.has("environment")&&this.records.set(Vt,Eo(void 0,this));let o=this.records.get(Yu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yI,Nt,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=vr(this),r=qt(void 0),i;try{return e()}finally{vr(n),qt(r)}}get(e,n=da,r=ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(D0))return e[D0](this);r=Hu(r);let i,o=vr(this),s=qt(void 0);try{if(!(r&ee.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=zP(e)&&$u(e);l&&this.injectableDefInScope(l)?c=Eo(em(e),mu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ee.Self?qm():this.parent;return n=r&ee.Optional&&n===da?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[_u]=a[_u]||[]).unshift(dt(e)),o)throw a;return gN(a,e,"R3InjectorError",this.source)}else throw a}finally{qt(s),vr(o)}}resolveInjectorInitializers(){let e=vr(this),n=qt(void 0),r;try{let i=this.get(Lo,Nt,ee.Self);for(let o of i)o()}finally{vr(e),qt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(e){e=yt(e);let n=No(e)?e:yt(e&&e.provide),r=UP(e);if(!No(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Eo(void 0,mu,!0),i.factory=()=>Gp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}else{let i=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===mu&&(n.value=jP,n.value=n.factory()),typeof n.value=="object"&&n.value&&HP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=yt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function em(t){let e=$u(t),n=e!==null?e.factory:Mo(t);if(n!==null)return n;if(t instanceof M)throw new F(204,!1);if(t instanceof Function)return BP(t);throw new F(204,!1)}function BP(t){let e=t.length;if(e>0){let r=mI(e,"?");throw new F(204,!1)}let n=aN(t);return n!==null?()=>n.factory(t):()=>new t}function UP(t){if(wI(t))return Eo(void 0,t.useValue);{let e=bI(t);return Eo(e,mu)}}function bI(t,e,n){let r;if(No(t)){let i=yt(t);return Mo(i)||em(i)}else if(wI(t))r=()=>yt(t.useValue);else if(VP(t))r=()=>t.useFactory(...Gp(t.deps||[]));else if(FP(t))r=()=>b(yt(t.useExisting));else{let i=yt(t&&(t.useClass||t.provide));if($P(t))r=()=>new i(...Gp(t.deps));else return Mo(i)||em(i)}return r}function Eo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $P(t){return!!t.deps}function HP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function zP(t){return typeof t=="function"||typeof t=="object"&&t instanceof M}function tm(t,e){for(let n of t)Array.isArray(n)?tm(n,e):n&&dE(n)?tm(n.\u0275providers,e):e(n)}function Zn(t,e){t instanceof va&&t.assertNotDestroyed();let n,r=vr(t),i=qt(void 0);try{return e()}finally{vr(r),qt(i)}}function qP(t){if(!gE()&&!fN())throw new F(-203,!1)}function B0(t,e=null,n=null,r){let i=EI(t,e,n,r);return i.resolveInjectorInitializers(),i}function EI(t,e=null,n=null,r,i=new Set){let o=[n||Nt,kP(t)];return r=r||(typeof t=="object"?void 0:dt(t)),new va(o,e||qm(),r||null,i)}var jt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return B0({name:""},i,r,"");{let o=r.name??"";return B0({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=da,e.NULL=new Au,e.\u0275prov=R({token:e,providedIn:"any",factory:()=>b(gI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var nm;function II(t){nm=t}function Zu(){if(nm!==void 0)return nm;if(typeof document<"u")return document;throw new F(210,!1)}var jo=new M("AppId",{providedIn:"root",factory:()=>GP}),GP="ng",Gm=new M("Platform Initializer"),it=new M("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Ma=new M("CSP nonce",{providedIn:"root",factory:()=>Zu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function WP(t){return t.ownerDocument.body}function xI(t){return t instanceof Function?t():t}function ca(t){return(t??x(jt)).get(it)==="browser"}var KP="ngSkipHydration",QP="ngskiphydration";function DI(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===QP)return!0}return!1}function CI(t){return t.hasAttribute(KP)}function Su(t){return(t.flags&128)===128}function YP(t){if(Su(t))return!0;let e=t.parent;for(;e;){if(Su(t)||DI(e))return!0;e=e.parent}return!1}var Yn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Yn||{}),ZP=/^>|^->|<!--|-->|--!>|<!-$/g,XP=/(<|>)/g,JP="\u200B$1\u200B";function ek(t){return t.replace(ZP,e=>e.replace(XP,JP))}var TI=new Map,tk=0;function nk(){return tk++}function rk(t){TI.set(t[qu],t)}function ik(t){TI.delete(t[qu])}var U0="__ngContext__";function fi(t,e){En(e)?(t[U0]=e[qu],rk(e)):t[U0]=e}var ok;function Wm(t,e){return ok(t,e)}function Km(t){let e=t[$e];return Gt(e)?e[$e]:e}function AI(t){return MI(t[ma])}function SI(t){return MI(t[sn])}function MI(t){for(;t!==null&&!Gt(t);)t=t[sn];return t}function Io(t,e,n,r,i){if(r!=null){let o,s=!1;Gt(r)?o=r:En(r)&&(s=!0,r=r[Ot]);let a=an(r);t===0&&n!==null?i==null?FI(e,n,a):Mu(e,n,a,i||null,!0):t===1&&n!==null?Mu(e,n,a,i||null,!0):t===2?jI(e,a,s):t===3&&e.destroyNode(a),o!=null&&bk(e,t,o,n,i)}}function RI(t,e){return t.createText(e)}function sk(t,e,n){t.setValue(e,n)}function NI(t,e){return t.createComment(ek(e))}function Qm(t,e,n){return t.createElement(e,n)}function ak(t,e){let n=e[Se];Ra(t,e,n,2,null,null),e[Ot]=null,e[Lt]=null}function ck(t,e,n,r,i,o){r[Ot]=i,r[Lt]=e,Ra(t,r,n,1,i,o)}function lk(t,e){Ra(t,e,e[Se],2,null,null)}function uk(t){let e=t[ma];if(!e)return Pp(t[te],t);for(;e;){let n=null;if(En(e))n=e[ma];else{let r=e[kt];r&&(n=r)}if(!n){for(;e&&!e[sn]&&e!==t;)En(e)&&Pp(e[te],e),e=e[$e];e===null&&(e=t),En(e)&&Pp(e[te],e),n=e&&e[sn]}e=n}}function dk(t,e,n,r){let i=kt+r,o=n.length;r>0&&(n[i-1][sn]=e),r<o-kt?(e[sn]=n[i],pI(n,kt+r,e)):(n.push(e),e[sn]=null),e[$e]=n;let s=e[zu];s!==null&&n!==s&&hk(s,e);let a=e[ga];a!==null&&a.insertView(t),$E(e),e[$]|=128}function hk(t,e){let n=t[bu],i=e[$e][$e][Ft];e[Ft]!==i&&(t[$]|=So.HasTransplantedViews),n===null?t[bu]=[e]:n.push(e)}function PI(t,e){let n=t[bu],r=n.indexOf(e),i=e[$e];n.splice(r,1)}function rm(t,e){if(t.length<=kt)return;let n=kt+e,r=t[n];if(r){let i=r[zu];i!==null&&i!==t&&PI(i,r),e>0&&(t[n-1][sn]=r[sn]);let o=Cu(t,kt+e);ak(r[te],r);let s=o[ga];s!==null&&s.detachView(o[te]),r[$e]=null,r[sn]=null,r[$]&=-129}return r}function kI(t,e){if(!(e[$]&256)){let n=e[Se];n.destroyNode&&Ra(t,e,n,3,null,null),uk(e)}}function Pp(t,e){if(!(e[$]&256)){e[$]&=-129,e[$]|=256,e[ui]&&n0(e[ui]),pk(t,e),fk(t,e),e[te].type===1&&e[Se].destroy();let n=e[zu];if(n!==null&&Gt(e[$e])){n!==e[$e]&&PI(n,e);let r=e[ga];r!==null&&r.detachView(t)}ik(e)}}function fk(t,e){let n=t.cleanup,r=e[fa];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[fa]=null);let i=e[_r];if(i!==null){e[_r]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function pk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof hi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];wn(4,a,c);try{c.call(a)}finally{wn(5,a,c)}}else{wn(4,i,o);try{o.call(i)}finally{wn(5,i,o)}}}}}function OI(t,e,n){return mk(t,e.parent,n)}function mk(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ot];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===In.None||o===In.Emulated)return null}return Wt(r,n)}}function Mu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function FI(t,e,n){t.appendChild(e,n)}function $0(t,e,n,r,i){r!==null?Mu(t,e,n,r,i):FI(t,e,n)}function gk(t,e,n,r){t.removeChild(e,n,r)}function Ym(t,e){return t.parentNode(e)}function yk(t,e){return t.nextSibling(e)}function VI(t,e,n){return _k(t,e,n)}function vk(t,e,n){return t.type&40?Wt(t,n):null}var _k=vk,H0;function Zm(t,e,n,r){let i=OI(t,r,e),o=e[Se],s=r.parent||e[Lt],a=VI(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)$0(o,i,n[c],a,!1);else $0(o,i,n,a,!1);H0!==void 0&&H0(o,r,e,n,i)}function gu(t,e){if(e!==null){let n=e.type;if(n&3)return Wt(e,t);if(n&4)return im(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return gu(t,r);{let i=t[e.index];return Gt(i)?im(-1,i):an(i)}}else{if(n&32)return Wm(e,t)()||an(t[e.index]);{let r=LI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Km(t[Ft]);return gu(i,r)}else return gu(t,e.next)}}}return null}function LI(t,e){if(e!==null){let r=t[Ft][Lt],i=e.projection;return r.projection[i]}return null}function im(t,e){let n=kt+t+1;if(n<e.length){let r=e[n],i=r[te].firstChild;if(i!==null)return gu(r,i)}return e[Qn]}function jI(t,e,n){let r=Ym(t,e);r&&gk(t,r,e,n)}function BI(t){t.textContent=""}function Xm(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&fi(an(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Xm(t,e,n.child,r,i,o,!1),Io(e,t,i,a,o);else if(c&32){let l=Wm(n,r),u;for(;u=l();)Io(e,t,i,u,o);Io(e,t,i,a,o)}else c&16?UI(t,e,r,n,i,o):Io(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ra(t,e,n,r,i,o){Xm(n,r,t.firstChild,e,i,o,!1)}function wk(t,e,n){let r=e[Se],i=OI(t,n,e),o=n.parent||e[Lt],s=VI(o,n,e);UI(r,0,e,n,i,s)}function UI(t,e,n,r,i,o){let s=n[Ft],c=s[Lt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Io(e,t,i,u,o)}else{let l=c,u=s[$e];Su(r)&&(l.flags|=128),Xm(t,e,l,u,i,o,!0)}}function bk(t,e,n,r,i){let o=n[Qn],s=an(n);o!==s&&Io(e,t,r,o,i);for(let a=kt;a<n.length;a++){let c=n[a];Ra(c[te],c,t,e,r,o)}}function Ek(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Yn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Yn.Important),t.setStyle(n,r,i,o))}}function Ik(t,e,n){t.setAttribute(e,"style",n)}function $I(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function HI(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Wp(t,e,r),i!==null&&$I(t,e,i),o!==null&&Ik(t,e,o)}var om=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${X1})`}};function Jm(t){return t instanceof om?t.changingThisBreaksApplicationSecurity:t}function xk(){let t=new yi;return x(it)==="browser"&&(t.store=Dk(Zu(),x(jo))),t}var yi=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=R({token:e,providedIn:"root",factory:xk});let t=e;return t})();function Dk(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var zI="h",qI="b",sm=function(t){return t.FirstChild="f",t.NextSibling="n",t}(sm||{}),Ck="e",Tk="t",eg="c",GI="x",Ru="r",Ak="i",Sk="n",Mk="d",Rk="__nghData__",WI=Rk,kp="ngh",Nk="nghm",KI=(t,e,n)=>null;function Pk(t,e,n=!1){let r=t.getAttribute(kp);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=n?i:o?`|${o}`:"",a={};if(r!==""){let l=e.get(yi,null,{optional:!0});l!==null&&(a=l.get(WI,[])[Number(r)])}let c={data:a,firstChild:t.firstChild??null};return n&&(c.firstChild=t,Xu(c,0,t.nextSibling)),s?t.setAttribute(kp,s):t.removeAttribute(kp),c}function kk(){KI=Pk}function tg(t,e,n=!1){return KI(t,e,n)}function Ok(t){let e=t._lView;return e[te].type===2?null:(PE(e)&&(e=e[vt]),e)}function Fk(t){return t.textContent?.replace(/\s/gm,"")}function Vk(t){let e=Zu(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=Fk(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Xu(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function am(t,e){return t.segmentHeads?.[e]??null}function Lk(t,e){let n=t.data,r=n[Ck]?.[e]??null;return r===null&&n[eg]?.[e]&&(r=ng(t,e)),r}function QI(t,e){return t.data[eg]?.[e]??null}function ng(t,e){let n=QI(t,e)??[],r=0;for(let i of n)r+=i[Ru]*(i[GI]??1);return r}function Ju(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[Mk];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var cm=class{},Nu=class{};function jk(t){let e=Error(`No component factory found for ${dt(t)}.`);return e[Bk]=t,e}var Bk="ngComponent";var lm=class{resolveComponentFactory(e){throw jk(e)}},ed=(()=>{let e=class e{};e.NULL=new lm;let t=e;return t})();function Uk(){return td(Kt(),Ce())}function td(t,e){return new ot(Wt(t,e))}var ot=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Uk;let t=e;return t})();var _a=class{},vi=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>$k();let t=e;return t})();function $k(){let t=Ce(),e=Kt(),n=xr(e.index,t);return(En(n)?n:t)[Se]}var Hk=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Cn=class{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}},rg=new Cn("17.0.7"),Op={};function YI(t){return ig(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function zk(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function ig(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var um=class{constructor(){}supports(e){return YI(e)}create(e){return new dm(e)}},qk=(t,e)=>e,dm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||qk}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<z0(r,i,o)?n:r,a=z0(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let f=h<o.length?o[h]:o[h]=0,g=f+h;u<=g&&g<l&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!YI(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,zk(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new hm(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Pu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Pu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},hm=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},fm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Pu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new fm,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function z0(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var pm=class{constructor(){}supports(e){return e instanceof Map||ig(e)}create(){return new mm}},mm=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||ig(e)))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new gm(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},gm=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function q0(){return new nd([new um])}var nd=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||q0()),deps:[[e,new Qu,new gi]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new F(901,!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:q0});let t=e;return t})();function G0(){return new og([new pm])}var og=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||G0()),deps:[[e,new Qu,new gi]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i)return i;throw new F(901,!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:G0});let t=e;return t})();function ku(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(an(o)),Gt(o)&&Gk(o,r);let s=n.type;if(s&8)ku(t,e,n.child,r);else if(s&32){let a=Wm(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=LI(e,n);if(Array.isArray(a))r.push(...a);else{let c=Km(e[Ft]);ku(c[te],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Gk(t,e){for(let n=kt;n<t.length;n++){let r=t[n],i=r[te].firstChild;i!==null&&ku(r[te],r,i,e)}t[Qn]!==t[Ot]&&e.push(t[Qn])}var ZI=[];function Wk(t){return t[ui]??Kk(t)}function Kk(t){let e=ZI.pop()??Object.create(Yk);return e.lView=t,e}function Qk(t){t.lView[ui]!==t&&(t.lView=null,ZI.push(t))}var Yk=ue(T({},Jb),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Gu(t.lView)},consumerOnSignalRead(){this.lView[ui]=this}}),Zk="ngOriginalError";function Fp(t){return t[Zk]}var Tn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Fp(e);for(;n&&Fp(n);)n=Fp(n);return n||null}},XI=new M("",{providedIn:"root",factory:()=>x(Tn).handleError.bind(void 0)}),cu=new M(""),JI=!1,ex=new M("",{providedIn:"root",factory:()=>JI});var _i={};function _t(t){tx(cn(),Ce(),Vo()+t,!1)}function tx(t,e,n,r){if(!r)if((e[$]&3)===3){let o=t.preOrderCheckHooks;o!==null&&fu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&pu(e,o,0,n)}di(n)}function z(t,e=ee.Default){let n=Ce();if(n===null)return b(t,e);let r=Kt();return uI(r,n,yt(t),e)}function nx(){let t="invalid";throw new Error(t)}function Xk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)di(~i);else{let o=i,s=n[++r],a=n[++r];tP(s,o);let c=e[o];a(2,c)}}}finally{di(-1)}}function rd(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Ot]=i,d[$]=r|4|128|8,(l!==null||t&&t[$]&2048)&&(d[$]|=2048),BE(d),d[$e]=d[Oo]=t,d[Dn]=n,d[pa]=s||t&&t[pa],d[Se]=a||t&&t[Se],d[Ao]=c||t&&t[Ao]||null,d[Lt]=o,d[qu]=nk(),d[xn]=u,d[ME]=l,d[Ft]=e.type==2?t[Ft]:d,d}function Na(t,e,n,r,i){let o=t.data[e];if(o===null)o=Jk(t,e,n,r,i),eP()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=QN();o.injectorIndex=s===null?-1:s.injectorIndex}return Ca(o,!0),o}function Jk(t,e,n,r,i){let o=qE(),s=GE(),a=s?o:o&&o.parent,c=t.data[e]=oO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function rx(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ix(t,e,n,r,i){let o=Vo(),s=r&2;try{di(-1),s&&e.length>vt&&tx(t,e,vt,!1),wn(s?2:0,i),n(r,i)}finally{di(o),wn(s?3:1,i)}}function ox(t,e,n){if(NE(e)){let r=Mt(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Mt(r)}}}function sx(t,e,n){zE()&&(hO(t,e,n,Wt(n,e)),(n.flags&64)===64&&hx(t,e,n))}function ax(t,e,n=Wt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function cx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=sg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function sg(t,e,n,r,i,o,s,a,c,l,u){let d=vt+r,h=d+i,f=eO(d,h),g=typeof l=="function"?l():l;return f[te]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function eO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:_i);return n}function tO(t,e,n,r){let o=r.get(ex,JI)||n===In.ShadowDom,s=t.selectRootElement(e,o);return nO(s),s}function nO(t){lx(t)}var lx=t=>null;function rO(t){CI(t)?BI(t):Vk(t)}function iO(){lx=rO}function oO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Fo()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function W0(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=n===null?{}:n;let o=t[i];r===null?K0(n,e,i,o):r.hasOwnProperty(i)&&K0(n,e,r[i],o)}return n}function K0(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function sO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],h=n?n.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=W0(d.inputs,u,c,f),l=W0(d.outputs,u,l,g);let y=c!==null&&s!==null&&!EE(e)?bO(c,u,s):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function aO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function cO(t,e,n,r,i,o,s,a){let c=Wt(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(ag(t,n,u,r,i),Da(e)&&lO(n,e.index)):e.type&3?(r=aO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function lO(t,e){let n=xr(e,t);n[$]&16||(n[$]|=64)}function ux(t,e,n,r){if(zE()){let i=r===null?null:{"":-1},o=pO(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&dx(t,e,n,s,i,a),i&&mO(n,r,i)}n.mergedAttrs=ha(n.mergedAttrs,n.attrs)}function dx(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Zp(Du(n,e),t,r[l].type);yO(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=rx(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=ha(n.mergedAttrs,u.hostAttrs),vO(t,n,e,c,u),gO(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}sO(t,n,o)}function uO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;dO(s)!=a&&s.push(a),s.push(n,r,o)}}function dO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function hO(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Da(n)&&_O(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Du(n,e),fi(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Ro(e,t,a,n);if(fi(l,e),s!==null&&wO(e,a-i,l,c,n,s),br(c)){let u=xr(n.index,e);u[Dn]=Ro(e,t,a,n)}}}function hx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=nP();try{di(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Qp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&fO(c,l)}}finally{di(-1),Qp(s)}}function fO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function pO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(IE(e,s.selectors,!1))if(r||(r=[]),br(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;ym(t,e,c)}else r.unshift(s),ym(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function ym(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function mO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new F(-301,!1);r.push(e[i],o)}}}function gO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;br(e)&&(n[""]=t)}}function yO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function vO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Mo(i.type,!0)),s=new hi(o,br(i),z);t.blueprint[r]=s,n[r]=s,uO(t,e,r,rx(t,n,i.hostVars,_i),i)}function _O(t,e,n){let r=Wt(e,t),i=cx(n),o=t[pa].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=id(t,rd(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function wO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++];fx(r,n,c,l,u)}}function fx(t,e,n,r,i){let o=Mt(null);try{let s=t.inputTransforms;s!==null&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),t.setInput!==null?t.setInput(e,i,n,r):e[r]=i}finally{Mt(o)}}function bO(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}return r}function px(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mx(t,e){let n=t.contentQueries;if(n!==null){let r=Mt(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];QE(o),a.contentQueries(2,e[s],s)}}}finally{Mt(r)}}}function id(t,e){return t[ma]?t[k0][sn]=e:t[ma]=e,t[k0]=e,e}function vm(t,e,n){QE(0);let r=Mt(null);try{e(t,n)}finally{Mt(r)}}function EO(t){return t[fa]||(t[fa]=[])}function IO(t){return t.cleanup||(t.cleanup=[])}function gx(t,e){let n=t[Ao],r=n?n.get(Tn,null):null;r&&r.handleError(e)}function ag(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=e[s],l=t.data[s];fx(l,c,r,a,i)}}function xO(t,e,n){let r=LE(e,t);sk(t[Se],r,n)}var DO=100;function CO(t,e=!0){let n=t[pa],r=n.rendererFactory,i=n.afterRenderEventManager,o=!1;o||(r.begin?.(),i?.begin());try{TO(t)}catch(s){throw e&&gx(t,s),s}finally{o||(r.end?.(),n.inlineEffectRunner?.flush(),i?.end())}}function TO(t){_m(t,0);let e=0;for(;UE(t);){if(e===DO)throw new F(103,!1);e++,_m(t,1)}}function AO(t,e,n,r){let i=e[$];if((i&256)===256)return;let o=!1;!o&&e[pa].inlineEffectRunner?.flush(),Lm(e);let s=null,a=null;!o&&SO(t)&&(a=Wk(e),s=e0(a));try{BE(e),XN(t.bindingStartIndex),n!==null&&ix(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&fu(e,d,null)}else{let d=t.preOrderHooks;d!==null&&pu(e,d,0,null),Sp(e,0)}if(MO(e),yx(e,0),t.contentQueries!==null&&mx(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&fu(e,d)}else{let d=t.contentHooks;d!==null&&pu(e,d,1),Sp(e,1)}Xk(t,e);let l=t.components;l!==null&&_x(e,l,0);let u=t.viewQuery;if(u!==null&&vm(2,u,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&fu(e,d)}else{let d=t.viewHooks;d!==null&&pu(e,d,2),Sp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ap]){for(let d of e[Ap])d();e[Ap]=null}o||(e[$]&=-73)}catch(c){throw Gu(e),c}finally{a!==null&&(t0(a,s),Qk(a)),jm()}}function SO(t){return t.type!==2}function yx(t,e){for(let n=AI(t);n!==null;n=SI(n)){n[$]&=~So.HasChildViewsToRefresh;for(let r=kt;r<n.length;r++){let i=n[r];vx(i,e)}}}function MO(t){for(let e=AI(t);e!==null;e=SI(e)){if(!(e[$]&So.HasTransplantedViews))continue;let n=e[bu];for(let r=0;r<n.length;r++){let i=n[r],o=i[$e];BN(i)}}}function RO(t,e,n){let r=xr(e,t);vx(r,n)}function vx(t,e){Vm(t)&&_m(t,e)}function _m(t,e){let r=t[te],i=t[$],o=t[ui],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ap(o)),o&&(o.dirty=!1),t[$]&=-9217,s)AO(r,t,r.template,t[Dn]);else if(i&8192){yx(t,1);let a=r.components;a!==null&&_x(t,a,1)}}function _x(t,e,n){for(let r=0;r<e.length;r++)RO(t,e[r],n)}function cg(t){for(;t;){t[$]|=64;let e=Km(t);if(PE(t)&&!e)return t;t=e}return null}var pi=class{get rootNodes(){let e=this._lView,n=e[te];return ku(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dn]}set context(e){this._lView[Dn]=e}get destroyed(){return(this._lView[$]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[$e];if(Gt(e)){let n=e[wu],r=n?n.indexOf(this):-1;r>-1&&(rm(e,r),Cu(n,r))}this._attachedToViewContainer=!1}kI(this._lView[te],this._lView)}onDestroy(e){HE(this._lView,e)}markForCheck(){cg(this._cdRefInjectingView||this._lView)}detach(){this._lView[$]&=-129}reattach(){$E(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,CO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,lk(this._lView[te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e}},Cr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=NO;let t=e;return t})();function NO(t){return PO(Kt(),Ce(),(t&16)===16)}function PO(t,e,n){if(Da(t)&&!n){let r=xr(t.index,e);return new pi(r,r)}else if(t.type&47){let r=e[Ft];return new pi(r,e)}return null}var wx=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=kO,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),wm=class extends wx{constructor(e){super(),this._lView=e}onDestroy(e){return HE(this._lView,e),()=>$N(this._lView,e)}};function kO(){return new wm(Ce())}var Q0=new Set;function Bo(t){Q0.has(t)||(Q0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var bm=class extends ke{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Vp(o),i&&(i=Vp(i)),s&&(s=Vp(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}};function Vp(t){return e=>{setTimeout(t,void 0,e)}}var Oe=bm;function Y0(...t){}function OO(){let t=typeof Pt.requestAnimationFrame=="function",e=Pt[t?"requestAnimationFrame":"setTimeout"],n=Pt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var H=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oe(!1),this.onMicrotaskEmpty=new Oe(!1),this.onStable=new Oe(!1),this.onError=new Oe(!1),typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=OO().nativeRequestAnimationFrame,LO(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,FO,Y0,Y0);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},FO={};function lg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function VO(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Pt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Em(t),t.isCheckStableRunning=!0,lg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Em(t))}function LO(t){let e=()=>{VO(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(jO(a))return n.invokeTask(i,o,s,a);try{return Z0(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),X0(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return Z0(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),X0(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Em(t),lg(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Em(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Z0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function X0(t){t._nesting--,lg(t)}var Im=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oe,this.onMicrotaskEmpty=new Oe,this.onStable=new Oe,this.onError=new Oe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}},bx=new M("",{providedIn:"root",factory:Ex});function Ex(){let t=x(H),e=!0,n=new W(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),r=new W(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{H.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});let s=t.onUnstable.subscribe(()=>{H.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}});return ra(n,r.pipe(sa()))}function jO(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function BO(t="zone.js",e){return t==="noop"?new Im:t==="zone.js"?new H(e):t}var xo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(xo||{}),UO={destroy(){}};function ug(t,e){!e&&qP(ug);let n=e?.injector??x(jt);if(!ca(n))return UO;Bo("NgAfterNextRender");let r=n.get(Ix),i=r.handler??=new Dm,o=e?.phase??xo.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(wx).onDestroy(s),c=new xm(n,o,()=>{s(),t()});return i.register(c),{destroy:s}}var xm=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(H),this.errorHandler=e.get(Tn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Dm=class{constructor(){this.executingCallbacks=!1,this.buckets={[xo.EarlyRead]:new Set,[xo.Write]:new Set,[xo.MixedReadWrite]:new Set,[xo.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new F(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Ix=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function $O(t,e){let n=xr(e,t),r=n[te];HO(r,n);let i=n[Ot];i!==null&&n[xn]===null&&(n[xn]=tg(i,n[Ao])),dg(r,n,n[Dn])}function HO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function dg(t,e,n){Lm(e);try{let r=t.viewQuery;r!==null&&vm(1,r,n);let i=t.template;i!==null&&ix(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&mx(t,e),t.staticViewQueries&&vm(2,t.viewQuery,n);let o=t.components;o!==null&&zO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[$]&=-5,jm()}}function zO(t,e){for(let n=0;n<e.length;n++)$O(t,e[n])}function Cm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=x0(i,a);else if(o==2){let c=a,l=e[++s];r=x0(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ou=class extends ed{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=wr(e);return new Po(n,this.ngModule)}};function J0(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function qO(t){let e=t.toLowerCase();return e==="svg"?VE:e==="math"?VN:null}var Tm=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Hu(r);let i=this.injector.get(e,Op,r);return i!==Op||n===Op?i:this.parentInjector.get(e,n,r)}},Po=class extends Nu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=J0(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return J0(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=SN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof Vt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new Tm(e,o):e,a=s.get(_a,null);if(a===null)throw new F(407,!1);let c=s.get(Hk,null),l=s.get(Ix,null),u={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l},d=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",f=r?tO(d,r,this.componentDef.encapsulation,s):Qm(d,h,qO(h)),g=4608,y=this.componentDef.onPush?576:528,_=this.componentDef.signals?g:y,I=null;f!==null&&(I=tg(f,s,!0));let P=sg(0,null,null,1,0,null,null,null,null,null,null),D=rd(null,P,null,_,null,null,u,d,s,null,I);Lm(D);let j,B;try{let G=this.componentDef,pe,xt=null;G.findHostDirectiveDefs?(pe=[],xt=new Map,G.findHostDirectiveDefs(G,pe,xt),pe.push(G)):pe=[G];let rp=GO(D,f),Tl=WO(rp,f,G,pe,D,u,d);B=jE(P,vt),f&&YO(d,G,f,r),n!==void 0&&ZO(B,this.ngContentSelectors,n),j=QO(Tl,G,pe,xt,D,[XO]),dg(P,D,null)}finally{jm()}return new Am(this.componentType,j,td(B,D),D,B)}},Am=class extends cm{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new pi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;ag(o[te],o,i,e,n),this.previousInputValues.set(e,n);let s=xr(this._tNode.index,o);cg(s)}}get injector(){return new li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GO(t,e){let n=t[te],r=vt;return t[r]=e,Na(n,r,2,"#host",null)}function WO(t,e,n,r,i,o,s){let a=i[te];KO(r,t,e,s);let c=null;e!==null&&(c=tg(e,i[Ao]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=rd(i,cx(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&ym(a,t,r.length-1),id(i,d),i[t.index]=d}function KO(t,e,n,r){for(let i of t)e.mergedAttrs=ha(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Cm(e,e.mergedAttrs,!0),n!==null&&HI(r,n,e))}function QO(t,e,n,r,i,o){let s=Kt(),a=i[te],c=Wt(s,i);dx(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=Ro(i,a,d,s);fi(h,i)}hx(a,i,s),c&&fi(c,i);let l=Ro(i,a,s.directiveStart+s.componentOffset,s);if(t[Dn]=i[Dn]=l,o!==null)for(let u of o)u(l,e);return ox(a,s,t),l}function YO(t,e,n,r){if(r)Wp(t,n,["ng-version",rg.full]);else{let{attrs:i,classes:o}=MN(e.selectors[0]);i&&Wp(t,n,i),o&&o.length>0&&$I(t,n,o.join(" "))}}function ZO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function XO(){let t=Kt();Um(Ce()[te],t)}function JO(t){return Object.getPrototypeOf(t.prototype).constructor}function wi(t){let e=JO(t.type),n=!0,r=[t];for(;e;){let i;if(br(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=lu(t.inputs),s.inputTransforms=lu(t.inputTransforms),s.declaredInputs=lu(t.declaredInputs),s.outputs=lu(t.outputs);let a=i.hostBindings;a&&rF(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&tF(t,c),l&&nF(t,l),su(t.inputs,i.inputs),su(t.declaredInputs,i.declaredInputs),su(t.outputs,i.outputs),i.inputTransforms!==null&&(s.inputTransforms===null&&(s.inputTransforms={}),su(s.inputTransforms,i.inputTransforms)),br(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===wi&&(n=!1)}}e=Object.getPrototypeOf(e)}eF(r)}function eF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ha(i.hostAttrs,n=ha(n,i.hostAttrs))}}function lu(t){return t===To?{}:t===Nt?[]:t}function tF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function nF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function rF(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function iF(t,e,n){return t[e]=n}function wa(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function oF(t,e,n,r){let i=wa(t,e,n);return wa(t,e+1,r)||i}function sF(t,e,n,r){return wa(t,KE(),n)?e+hE(n)+r:_i}function uu(t,e){return t<<17|e<<2}function mi(t){return t>>17&32767}function aF(t){return(t&2)==2}function cF(t,e){return t&131071|e<<17}function Sm(t){return t|2}function ko(t){return(t&131068)>>2}function Lp(t,e){return t&-131069|e<<2}function lF(t){return(t&1)===1}function Mm(t){return t|1}function uF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=mi(s),c=ko(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Aa(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=mi(t[a+1]);t[r+1]=uu(h,a),h!==0&&(t[h+1]=Lp(t[h+1],r)),t[a+1]=cF(t[a+1],r)}else t[r+1]=uu(a,0),a!==0&&(t[a+1]=Lp(t[a+1],r)),a=r;else t[r+1]=uu(c,0),a===0?a=r:t[c+1]=Lp(t[c+1],r),c=r;l&&(t[r+1]=Sm(t[r+1])),eE(t,u,r,!0,o),eE(t,u,r,!1,o),dF(e,u,t,r,o),s=uu(a,c),o?e.classBindings=s:e.styleBindings=s}function dF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Aa(o,e)>=0&&(n[r+1]=Mm(n[r+1]))}function eE(t,e,n,r,i){let o=t[n+1],s=e===null,a=r?mi(o):ko(o),c=!1;for(;a!==0&&(c===!1||s);){let l=t[a],u=t[a+1];hF(l,e)&&(c=!0,t[a+1]=r?Mm(u):Sm(u)),a=r?mi(u):ko(u)}c&&(t[n+1]=r?Sm(o):Mm(o))}function hF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Aa(t,e)>=0:!1}function Ye(t,e,n){let r=Ce(),i=KE();if(wa(r,i,e)){let o=cn(),s=sP();cO(o,s,r,t,e,r[Se],n,!1)}return Ye}function tE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";ag(t,n,o[s],s,r)}function Tr(t,e){return fF(t,e,null,!0),Tr}function fF(t,e,n,r){let i=Ce(),o=cn(),s=JN(2);if(o.firstUpdatePass&&mF(o,t,s,r),e!==_i&&wa(i,s,e)){let a=o.data[Vo()];wF(o,a,i,i[Se],t,i[s+1]=bF(e,n),r,s)}}function pF(t,e){return e>=t.expandoStartIndex}function mF(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Vo()],s=pF(t,n);EF(o,r)&&e===null&&!s&&(e=!1),e=gF(i,o,e,r),uF(i,o,e,n,s,r)}}function gF(t,e,n,r){let i=rP(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=jp(null,t,e,n,r),n=ba(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=jp(i,t,e,n,r),o===null){let c=yF(t,e,r);c!==void 0&&Array.isArray(c)&&(c=jp(null,t,e,c[1],r),c=ba(c,e.attrs,r),vF(t,e,r,c))}else o=_F(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function yF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ko(r)!==0)return t[mi(r)]}function vF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[mi(i)]=r}function _F(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ba(r,s,n)}return ba(r,e.attrs,n)}function jp(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ba(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ba(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),CP(t,s,n?!0:e[++o]))}return t===void 0?null:t}function wF(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=lF(l)?nE(c,e,n,i,ko(l),s):void 0;if(!Fu(u)){Fu(o)||aF(l)&&(o=nE(c,null,n,i,a,s));let d=LE(Vo(),n);Ek(r,s,d,i,o)}}function nE(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===_i&&(h=d?Nt:void 0);let f=d?Rp(h,r):u===r?h:void 0;if(l&&!Fu(f)&&(f=Rp(c,r)),Fu(f)&&(a=f,s))return a;let g=t[i+1];i=s?mi(g):ko(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Rp(c,r))}return a}function Fu(t){return t!==void 0}function bF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=dt(Jm(t)))),t}function EF(t,e){return(t.flags&(e?8:16))!==0}function xx(t){let e=t[ya]??[],r=t[$e][Se];for(let i of e)IF(i,r);t[ya]=Nt}function IF(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Ru];for(;n<i;){let o=r.nextSibling;jI(e,r,!1),r=o,n++}}}function Dx(t){xx(t);for(let e=kt;e<t.length;e++)Vu(t[e])}function Vu(t){let e=t[te];for(let n=vt;n<e.bindingStartIndex;n++)if(Gt(t[n])){let r=t[n];Dx(r)}else En(t[n])&&Vu(t[n])}function xF(t){let e=t._views;for(let n of e){let r=Ok(n);if(r!==null&&r[Ot]!==null)if(En(r))Vu(r);else{let i=r[Ot];Vu(i),Dx(r)}}}var DF=new RegExp(`^(\\d+)*(${qI}|${zI})*(.*)`);function CF(t){let e=t.match(DF),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function TF(t){return!t.prev&&t.parent?.type===8}function Bp(t){return t.index-vt}function od(t,e,n,r){let i=null,o=Bp(r),s=t.data[Sk];if(s?.[o])i=SF(s[o],n);else if(e.firstChild===r)i=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(TF(r)){let l=Bp(r.parent);i=am(t,l)}else{let l=Wt(c,n);if(a)i=l.firstChild;else{let u=Bp(c),d=am(t,u);if(c.type===2&&d){let f=ng(t,u)+1;i=sd(f,d)}else i=l.nextSibling}}}return i}function sd(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function AF(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case sm.FirstChild:n=n.firstChild;break;case sm.NextSibling:n=n.nextSibling;break}}return n}function SF(t,e){let[n,...r]=CF(t),i;if(n===zI)i=e[Ft][Ot];else if(n===qI)i=WP(e[Ft][Ot]);else{let o=Number(n);i=an(e[o+vt])}return AF(i,r)}function MF(t,e){let n=[];for(let r of e)for(let i=0;i<(r[GI]??1);i++){let o={data:r,firstChild:null};r[Ru]>0&&(o.firstChild=t,t=sd(r[Ru],t)),n.push(o)}return[t,n]}var Cx=(t,e)=>null;function RF(t,e){let n=t[ya];return!e||n===null||n.length===0?null:n[0].data[Ak]===e?n.shift():(xx(t),null)}function NF(){Cx=RF}function rE(t,e){return Cx(t,e)}function PF(t,e,n,r){let i=e.tView,s=t[$]&4096?4096:16,a=rd(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[zu]=c;let l=t[ga];return l!==null&&(a[ga]=l.createEmbeddedView(i)),dg(i,a,n),a}function iE(t,e){return!e||e.firstChild===null||Su(t)}function kF(t,e,n,r=!0){let i=e[te];if(dk(i,e,t,n),r){let s=im(n,t),a=e[Se],c=Ym(a,t[Qn]);c!==null&&ck(i,t[Lt],a,e,c,s)}let o=e[xn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var Uo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=OF;let t=e;return t})();function OF(){let t=Kt();return VF(t,Ce())}var FF=Uo,Tx=class extends FF{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return td(this._hostTNode,this._hostLView)}get injector(){return new li(this._hostTNode,this._hostLView)}get parentInjector(){let e=$m(this._hostTNode,this._hostLView);if(iI(e)){let n=xu(e,this._hostLView),r=Iu(e),i=n[te].data[r+8];return new li(i,n)}else return new li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=oE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-kt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,iE(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!xP(e),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?e:new Po(wr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let y=(s?l:this.parentInjector).get(Vt,null);y&&(o=y)}let u=wr(c.componentType??{}),d=rE(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,o);return this.insertImpl(f.hostView,a,iE(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(jN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[$e],l=new Tx(c,c[Lt],c[$e]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return kF(s,i,o,r),e.attachToViewContainerRef(),pI(Up(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=oE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=rm(this._lContainer,n);r&&(Cu(Up(this._lContainer),n),kI(r[te],r))}detach(e){let n=this._adjustIndex(e,-1),r=rm(this._lContainer,n);return r&&Cu(Up(this._lContainer),n)!=null?new pi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function oE(t){return t[wu]}function Up(t){return t[wu]||(t[wu]=[])}function VF(t,e){let n,r=e[t.index];return Gt(r)?n=r:(n=px(r,e,null,t),e[t.index]=n,id(e,n)),Ax(n,e,t,r),new Tx(n,t,e)}function LF(t,e){let n=t[Se],r=n.createComment(""),i=Wt(e,t),o=Ym(n,i);return Mu(n,o,r,yk(n,i),!1),r}var Ax=Sx,hg=(t,e,n)=>!1;function jF(t,e,n){return hg(t,e,n)}function Sx(t,e,n,r){if(t[Qn])return;let i;n.type&8?i=an(r):i=LF(e,n),t[Qn]=i}function BF(t,e,n){if(t[Qn]&&t[ya])return!0;let r=n[xn],i=e.index-vt;if(!r||YP(e)||Ju(r,i))return!1;let s=am(r,i),a=r.data[eg]?.[i],[c,l]=MF(s,a);return t[Qn]=c,t[ya]=l,!0}function UF(t,e,n,r){hg(t,n,e)||Sx(t,e,n,r)}function $F(){Ax=UF,hg=BF}function HF(t,e,n,r,i,o,s,a,c){let l=e.consts,u=Na(e,t,4,s||null,Eu(l,a));ux(e,n,u,Eu(l,c)),Um(e,u);let d=u.tView=sg(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function ln(t,e,n,r,i,o,s,a){let c=Ce(),l=cn(),u=t+vt,d=l.firstCreatePass?HF(u,l,c,e,n,r,i,o,s):l.data[u];Ca(d,!1);let h=Mx(l,c,d,t);Bm()&&Zm(l,c,h,d),fi(h,c);let f=px(h,c,h,d);return c[u]=f,id(c,f),jF(f,d,c),Fm(d)&&sx(l,c,d),s!=null&&ax(c,d,a),ln}var Mx=Rx;function Rx(t,e,n,r){return Dr(!0),e[Se].createComment("")}function zF(t,e,n,r){let i=e[xn],o=!i||Fo()||Ju(i,r);if(Dr(o),o)return Rx(t,e,n,r);let s=i.data[Tk]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=od(i,t,e,n);Xu(i,r,a);let c=ng(i,r);return sd(c,a)}function qF(){Mx=zF}function GF(t,e,n,r,i,o){let s=e.consts,a=Eu(s,i),c=Na(e,t,2,r,a);return ux(e,n,c,Eu(s,o)),c.attrs!==null&&Cm(c,c.attrs,!1),c.mergedAttrs!==null&&Cm(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function le(t,e,n,r){let i=Ce(),o=cn(),s=vt+t,a=i[Se],c=o.firstCreatePass?GF(s,o,i,e,n,r):o.data[s],l=Nx(o,i,c,a,e,t);i[s]=l;let u=Fm(c);return Ca(c,!0),HI(a,l,c),(c.flags&32)!==32&&Bm()&&Zm(o,i,l,c),HN()===0&&fi(l,i),zN(),u&&(sx(o,i,c),ox(o,c,i)),r!==null&&ax(i,c),le}function ge(){let t=Kt();GE()?WE():(t=t.parent,Ca(t,!1));let e=t;GN(e)&&KN(),qN();let n=cn();return n.firstCreatePass&&(Um(n,t),NE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&dP(e)&&tE(n,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&hP(e)&&tE(n,e,Ce(),e.stylesWithoutHost,!1),ge}function st(t,e,n,r){return le(t,e,n,r),ge(),st}var Nx=(t,e,n,r,i,o)=>(Dr(!0),Qm(r,i,tI()));function WF(t,e,n,r,i,o){let s=e[xn],a=!s||Fo()||Ju(s,o);if(Dr(a),a)return Qm(r,i,tI());let c=od(s,t,e,n);return QI(s,o)&&Xu(s,o,c.nextSibling),s&&(DI(n)||CI(c))&&Da(n)&&(WN(n),BI(c)),c}function KF(){Nx=WF}var QF=(t,e,n,r)=>(Dr(!0),NI(e[Se],""));function YF(t,e,n,r){let i,o=e[xn],s=!o||Fo();if(Dr(s),s)return NI(e[Se],"");let a=od(o,t,e,n),c=Lk(o,r);return Xu(o,r,a),i=sd(c,a),i}function ZF(){QF=YF}var Lu="en-US";var XF=Lu;function JF(t){oN(t,"Expected localeId to be defined"),typeof t=="string"&&(XF=t.toLowerCase().replace(/_/g,"-"))}function bi(t){return!!t&&typeof t.then=="function"}function Px(t){return!!t&&typeof t.subscribe=="function"}function Ze(t,e,n,r){let i=Ce(),o=cn(),s=Kt();return tV(o,i,i[Se],s,t,e,r),Ze}function eV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[fa],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function tV(t,e,n,r,i,o,s){let a=Fm(r),l=t.firstCreatePass&&IO(t),u=e[Dn],d=EO(e),h=!0;if(r.type&3||s){let y=Wt(r,e),_=s?s(y):y,I=d.length,P=s?j=>s(an(j[r.index])):r.index,D=null;if(!s&&a&&(D=eV(t,e,i,r.index)),D!==null){let j=D.__ngLastListenerFn__||D;j.__ngNextListenerFn__=o,D.__ngLastListenerFn__=o,h=!1}else{o=aE(r,e,u,o,!1);let j=n.listen(_,i,o);d.push(o,j),l&&l.push(i,P,I,I+1)}}else o=aE(r,e,u,o,!1);let f=r.outputs,g;if(h&&f!==null&&(g=f[i])){let y=g.length;if(y)for(let _=0;_<y;_+=2){let I=g[_],P=g[_+1],B=e[I][P].subscribe(o),G=d.length;d.push(o,B),l&&l.push(i,r.index,G,-(G+1))}}}function sE(t,e,n,r){try{return wn(6,e,n),n(r)!==!1}catch(i){return gx(t,i),!1}finally{wn(7,e,n)}}function aE(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?xr(t.index,e):e;cg(a);let c=sE(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=sE(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function $o(t=1){return oP(t)}function nV(t,e){let n=null,r=xN(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?IE(t,o,!0):TN(r,o))return i}return n}function Pa(t){let e=Ce()[Ft][Lt];if(!e.projection){let n=t?t.length:1,r=e.projection=mI(n,null),i=r.slice(),o=e.child;for(;o!==null;){let s=t?nV(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function Ei(t,e=0,n){let r=Ce(),i=cn(),o=Na(i,vt+t,16,null,n||null);o.projection===null&&(o.projection=e),WE(),(!r[xn]||Fo())&&(o.flags&32)!==32&&wk(i,r,o)}function ad(t){let e=YN();return LN(e,vt+t)}function at(t,e=""){let n=Ce(),r=cn(),i=t+vt,o=r.firstCreatePass?Na(r,i,1,e,null):r.data[i],s=kx(r,n,o,e,t);n[i]=s,Bm()&&Zm(r,n,s,o),Ca(o,!1)}var kx=(t,e,n,r,i)=>(Dr(!0),RI(e[Se],r));function rV(t,e,n,r,i){let o=e[xn],s=!o||Fo()||Ju(o,i);return Dr(s),s?RI(e[Se],r):od(o,t,e,n)}function iV(){kx=rV}function Ar(t,e,n){let r=Ce(),i=sF(r,t,e,n);return i!==_i&&xO(r,Vo(),i),Ar}function oV(t,e,n){let r=cn();if(r.firstCreatePass){let i=br(t);Rm(n,r.data,r.blueprint,i,!0),Rm(e,r.data,r.blueprint,i,!1)}}function Rm(t,e,n,r,i){if(t=yt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Rm(t[o],e,n,r,i);else{let o=cn(),s=Ce(),a=Kt(),c=No(t)?t:yt(t.provide),l=bI(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(No(t)||!t.multi){let f=new hi(l,i,z),g=Hp(c,e,i?u:u+h,d);g===-1?(Zp(Du(a,s),o,c),$p(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[g]=f,s[g]=f)}else{let f=Hp(c,e,u+h,d),g=Hp(c,e,u,u+h),y=f>=0&&n[f],_=g>=0&&n[g];if(i&&!_||!i&&!y){Zp(Du(a,s),o,c);let I=cV(i?aV:sV,n.length,i,r,l);!i&&_&&(n[g].providerFactory=I),$p(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(I),s.push(I)}else{let I=Ox(n[i?g:f],l,!i&&r);$p(o,t,f>-1?f:g,I)}!i&&r&&_&&n[g].componentProviders++}}}function $p(t,e,n,r){let i=No(e),o=LP(e);if(i||o){let c=(o?yt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Ox(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Hp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function sV(t,e,n,r){return Nm(this.multi,[])}function aV(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ro(n,n[te],this.providerFactory.index,r);o=a.slice(0,s),Nm(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Nm(i,o);return o}function Nm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function cV(t,e,n,r,i){let o=new hi(t,n,z);return o.multi=[],o.index=e,o.componentProviders=0,Ox(o,i,r&&!n),o}function Ii(t,e=[]){return n=>{n.providersResolver=(r,i)=>oV(r,i?i(t):t,e)}}var Er=class{},Ea=class{};var ju=class extends Er{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ou(this);let i=TE(e);this._bootstrapComponents=xI(i.bootstrap),this._r3Injector=EI(e,n,[{provide:Er,useValue:this},{provide:ed,useValue:this.componentFactoryResolver},...r],dt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Bu=class extends Ea{constructor(e){super(),this.moduleType=e}create(e){return new ju(this.moduleType,e,[])}};function lV(t,e,n){return new ju(t,e,n)}var Pm=class extends Er{constructor(e){super(),this.componentFactoryResolver=new Ou(this),this.instance=null;let n=new va([...e.providers,{provide:Er,useValue:this},{provide:ed,useValue:this.componentFactoryResolver}],e.parent||qm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function cd(t,e,n=null){return new Pm({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var uV=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=vI(!1,r.type),o=i.length>0?cd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=R({token:e,providedIn:"environment",factory:()=>new e(b(Vt))});let t=e;return t})();function Fx(t){Bo("NgStandalone"),t.getStandaloneInjector=e=>e.get(uV).getOrCreateStandaloneInjector(t)}function ld(t,e,n,r,i){return hV(Ce(),ZN(),t,e,n,r,i)}function dV(t,e){let n=t[e];return n===_i?void 0:n}function hV(t,e,n,r,i,o,s){let a=e+n;return oF(t,a,i,o)?iF(t,a+2,s?r.call(s,i,o):r(i,o)):dV(t,a+2)}var ud=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mV;let t=e;return t})(),fV=ud,pV=class extends fV{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=PF(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new pi(i)}};function mV(){return Vx(Kt(),Ce())}function Vx(t,e){return t.type&4?new pV(e,t,td(t,e)):null}function dd(t,e){return Vx(t,e)}var du=null;function gV(t){du!==null&&(t.defaultEncapsulation!==du.defaultEncapsulation||t.preserveWhitespaces!==du.preserveWhitespaces)||(du=t)}var hd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),fd=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nt(!1)}add(){this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),km=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},pd=(()=>{let e=class e{compileModuleSync(r){return new Bu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=TE(r),s=xI(o.declarations).reduce((a,c)=>{let l=wr(c);return l&&a.push(new Po(l)),a},[]);return new km(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yV=new M("compilerOptions");var fg=new M(""),ka=new M(""),md=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pg||(vV(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{H.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(b(H),b(gd),b(ka))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),gd=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return pg?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function vV(t){pg=t}var pg,yd=new M("Application Initializer"),Lx=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=x(yd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(bi(s))r.push(s);else if(Px(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ho=new M("appBootstrapListener");function _V(t,e,n){let r=new Bu(n);return Promise.resolve(r)}function wV(){r0(()=>{throw new F(600,!1)})}function bV(t){return t.isBoundToModule}function EV(t,e,n){try{let r=n();return bi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function jx(t,e){return Array.isArray(e)?e.reduce(jx,t):T(T({},t),e)}var Xn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(XI),this.zoneIsStable=x(bx),this.componentTypes=[],this.components=[],this.isStable=x(fd).hasPendingTasks.pipe(be(r=>r?O(!1):this.zoneIsStable),ia()),this._injector=x(Vt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Nu;if(!this._injector.get(Lx).done){let g="Cannot bootstrap as there are still asynchronous initializers running."+(!o&&CE(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new F(405,!1)}let a;o?a=r:a=this._injector.get(ed).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=bV(a)?void 0:this._injector.get(Er),l=i||a.selector,u=a.create(jt.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(fg,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),yu(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new F(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;yu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ho,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>yu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new F(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cE(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var hu;function mg(t){hu??=new WeakMap;let e=hu.get(t);if(e)return e;let n=t.isStable.pipe(Rt(r=>r)).toPromise().then(()=>{});return hu.set(t,n),t.onDestroy(()=>hu?.delete(t)),n}var IV=(()=>{let e=class e{constructor(){this.zone=x(H),this.applicationRef=x(Xn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xV(t){return[{provide:H,useFactory:t},{provide:Lo,multi:!0,useFactory:()=>{let e=x(IV,{optional:!0});return()=>e.initialize()}},{provide:XI,useFactory:DV},{provide:bx,useFactory:Ex}]}function DV(){let t=x(H),e=x(Tn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function CV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}function TV(){return typeof $localize<"u"&&$localize.locale||Lu}var vd=new M("LocaleId",{providedIn:"root",factory:()=>x(vd,ee.Optional|ee.SkipSelf)||TV()});var Bx=new M("PlatformDestroyListeners"),Ux=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=BO(i?.ngZone,CV({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=lV(r.moduleType,this.injector,xV(()=>o)),a=s.injector.get(Tn,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{yu(this._modules,s),c.unsubscribe()})}),EV(a,o,()=>{let c=s.injector.get(Lx);return c.runInitializers(),c.donePromise.then(()=>{let l=s.injector.get(vd,Lu);return JF(l||Lu),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=jx({},i);return _V(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Xn);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new F(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new F(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(Bx,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(b(jt))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),ua=null,$x=new M("AllowMultipleToken");function AV(t){if(ua&&!ua.get($x,!1))throw new F(400,!1);wV(),ua=t;let e=t.get(Ux);return RV(t),e}function gg(t,e,n=[]){let r=`Platform: ${e}`,i=new M(r);return(o=[])=>{let s=Hx();if(!s||s.injector.get($x,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):AV(SV(a,r))}return MV(i)}}function SV(t=[],e){return jt.create({name:e,providers:[{provide:Yu,useValue:"platform"},{provide:Bx,useValue:new Set([()=>ua=null])},...t]})}function MV(t){let e=Hx();if(!e)throw new F(401,!1);return e}function Hx(){return ua?.get(Ux)??null}function RV(t){t.get(Gm,null)?.forEach(n=>n())}function yg(){return!1}var zx=gg(null,"core",[]),qx=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(b(Xn))},e.\u0275mod=re({type:e}),e.\u0275inj=ne({});let t=e;return t})();var lE=!1;function NV(){lE||(lE=!0,kk(),KF(),iV(),ZF(),qF(),$F(),NF(),iO())}function PV(t,e){return mg(t)}function Gx(){return Sa([{provide:cu,useFactory:()=>{let t=!0;return ca()&&(t=!!x(yi,{optional:!0})?.get(WI,null)),t&&Bo("NgHydration"),t}},{provide:Lo,useValue:()=>{ca()&&x(cu)&&(kV(),NV())},multi:!0},{provide:ex,useFactory:()=>ca()&&x(cu)},{provide:Ho,useFactory:()=>{if(ca()&&x(cu)){let t=x(Xn),e=x(jt);return()=>{PV(t,e).then(()=>{H.assertInAngularZone(),xF(t)})}}return()=>{}},multi:!0}])}function kV(){let t=Zu(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===Nk){e=n;break}if(!e)throw new F(-507,!1)}function zo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Wx(t){let e=wr(t);if(!e)return null;let n=new Po(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var _g=null;function An(){return _g}function eD(t){_g||(_g=t)}var _d=class{},He=new M("DocumentToken"),Ig=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>(()=>x(OV))(),providedIn:"platform"});let t=e;return t})(),tD=new M("Location Initialized"),OV=(()=>{let e=class e extends Ig{constructor(){super(),this._doc=x(He),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return An().getBaseHref(this._doc)}onPopState(r){let i=An().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=An().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function xg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Kx(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Jn(t){return t&&t[0]!=="?"?"?"+t:t}var xi=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>(()=>x(Dg))(),providedIn:"root"});let t=e;return t})(),nD=new M("appBaseHref"),Dg=(()=>{let e=class e extends xi{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??x(He).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return xg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Jn(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Jn(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Jn(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(Ig),b(nD,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rD=(()=>{let e=class e extends xi{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=xg(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Jn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Jn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(Ig),b(nD,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),qo=(()=>{let e=class e{constructor(r){this._subject=new Oe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=LV(Kx(Qx(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Jn(i))}normalize(r){return e.stripTrailingSlash(VV(this._basePath,Qx(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Jn(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Jn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Jn,e.joinWithSlash=xg,e.stripTrailingSlash=Kx,e.\u0275fac=function(i){return new(i||e)(b(xi))},e.\u0275prov=R({token:e,factory:()=>FV(),providedIn:"root"});let t=e;return t})();function FV(){return new qo(b(xi))}function VV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Qx(t){return t.replace(/\/index.html$/,"")}function LV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function iD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var vg=/\s+/,Yx=[],bd=(()=>{let e=class e{constructor(r,i,o,s){this._iterableDiffers=r,this._keyValueDiffers=i,this._ngEl=o,this._renderer=s,this.initialClasses=Yx,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(vg):Yx}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(vg):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(vg).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(z(nd),z(og),z(ot),z(vi))},e.\u0275dir=Me({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var wg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ed=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(!1)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new wg(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),Zx(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);Zx(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(z(Uo),z(ud),z(nd))},e.\u0275dir=Me({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function Zx(t,e){t.context.$implicit=e.item}var oD=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new bg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Xx("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Xx("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(z(Uo),z(ud))},e.\u0275dir=Me({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),bg=class{constructor(){this.$implicit=null,this.ngIf=null}};function Xx(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${dt(e)}'.`)}var Go=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({});let t=e;return t})(),Cg="browser",jV="server";function sD(t){return t===Cg}function Di(t){return t===jV}var aD=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new Eg(b(He),window)});let t=e;return t})(),Eg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=BV(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function BV(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var wd=class{};var xd=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var pD=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(pD||{}),Ag=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new xd,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Dd=class t extends Ag{constructor(e={}){super(e),this.type=pD.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var $V=new M("");var cD="b",lD="h",uD="s",dD="st",hD="u",fD="rt",Id=new M(""),HV=["GET","HEAD"];function zV(t,e){let u=x(Id),{isCacheActive:n}=u,r=Ub(u,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!HV.includes(o)||i===!1||r.filter?.(t)===!1)return e(t);let s=x(yi),a=GV(t),c=s.get(a,null),l=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(l=i.includeHeaders),c){let{[cD]:d,[fD]:h,[lD]:f,[uD]:g,[dD]:y,[hD]:_}=c,I=d;switch(h){case"arraybuffer":I=new TextEncoder().encode(d).buffer;break;case"blob":I=new Blob([d]);break}let P=new xd(f);return O(new Dd({body:I,headers:P,status:g,statusText:y,url:_}))}return e(t).pipe(Ae(d=>{d instanceof Dd&&s.set(a,{[cD]:d.body,[lD]:qV(d.headers,l),[uD]:d.status,[dD]:d.statusText,[hD]:d.url||"",[fD]:t.responseType})}))}function qV(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function GV(t){let{params:e,method:n,responseType:r,url:i}=t,o=e.keys().sort().map(c=>`${c}=${e.getAll(c)}`).join("&"),s=n+"."+r+"."+i+"?"+o,a=WV(s);return a}function WV(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483647+1,e.toString()}function mD(t){return[{provide:Id,useFactory:()=>(Bo("NgHttpTransferCache"),T({isCacheActive:!0},t))},{provide:$V,useValue:zV,multi:!0,deps:[yi,Id]},{provide:Ho,multi:!0,useFactory:()=>{let e=x(Xn),n=x(Id);return()=>{mg(e).then(()=>{n.isCacheActive=!1})}}}]}var Rg=class extends _d{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ng=class t extends Rg{static makeCurrent(){eD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=KV();return n==null?null:QV(n)}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return iD(document.cookie,e)}},Fa=null;function KV(){return Fa=Fa||document.querySelector("base"),Fa?Fa.getAttribute("href"):null}function QV(t){return new URL(t,document.baseURI).pathname}var Pg=class{addToWindow(e){Pt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new F(5103,!1);return o},Pt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Pt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Pt.getAllAngularTestabilities(),o=i.length,s=!1,a=function(c){s=s||c,o--,o==0&&r(s)};i.forEach(c=>{c.whenStable(a)})};Pt.frameworkStabilizers||(Pt.frameworkStabilizers=[]),Pt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?An().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},YV=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),kg=new M("EventManagerPlugins"),_D=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new F(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(b(kg),b(H))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Cd=class{constructor(e){this._doc=e}},Sg="ng-app-id",wD=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Di(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Sg}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Sg),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Sg,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(b(He),b(jo),b(Ma,8),b(it))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Mg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fg=/%COMP%/g,bD="%COMP%",ZV=`_nghost-${bD}`,XV=`_ngcontent-${bD}`,JV=!0,eL=new M("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>JV});function tL(t){return XV.replace(Fg,t)}function nL(t){return ZV.replace(Fg,t)}function ED(t,e){return e.map(n=>n.replace(Fg,t))}var gD=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Di(c),this.defaultRenderer=new Va(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===In.ShadowDom&&(i=ue(T({},i),{encapsulation:In.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Td?o.applyToHost(r):o instanceof La&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case In.Emulated:s=new Td(l,u,i,this.appId,d,a,c,h);break;case In.ShadowDom:return new Og(l,u,r,i,a,c,this.nonce,h);default:s=new La(l,u,i,d,a,c,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(b(_D),b(wD),b(jo),b(eL),b(He),b(it),b(H),b(Ma))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Va=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Mg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(yD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(yD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Mg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Mg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Yn.DashCase|Yn.Important)?e.style.setProperty(n,r,i&Yn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Yn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=An().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function yD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Og=class extends Va{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ED(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},La=class extends Va{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?ED(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Td=class extends La{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=tL(l),this.hostAttr=nL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},rL=(()=>{let e=class e extends Cd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(b(He))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),vD=["alt","control","meta","shift"],iL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},sL=(()=>{let e=class e extends Cd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>An().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),vD.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=iL[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),vD.forEach(a=>{if(a!==o){let c=oL[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(b(He))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function aL(){Ng.makeCurrent()}function cL(){return new Tn}function lL(){return II(document),document}var uL=[{provide:it,useValue:Cg},{provide:Gm,useValue:aL,multi:!0},{provide:He,useFactory:lL,deps:[]}],ID=gg(zx,"browser",uL),dL=new M(""),hL=[{provide:ka,useClass:Pg,deps:[]},{provide:fg,useClass:md,deps:[H,gd,ka]},{provide:md,useClass:md,deps:[H,gd,ka]}],fL=[{provide:Yu,useValue:"root"},{provide:Tn,useFactory:cL,deps:[]},{provide:kg,useClass:rL,multi:!0,deps:[He,H,it]},{provide:kg,useClass:sL,multi:!0,deps:[He]},gD,wD,_D,{provide:_a,useExisting:gD},{provide:wd,useClass:YV,deps:[]},[]],xD=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:jo,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(b(dL,12))},e.\u0275mod=re({type:e}),e.\u0275inj=ne({providers:[...fL,...hL],imports:[Go,qx]});let t=e;return t})();function pL(){return new Vg(b(He))}var Vg=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(b(He))},e.\u0275prov=R({token:e,factory:function(i){let o=null;return i?o=new i:o=pL(),o},providedIn:"root"});let t=e;return t})();function DD(...t){let e=[],n=new Set,r=n.has(1);for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);return Sa([[],Gx(),n.has(0)||r?[]:mD({}),e])}var Lg;try{Lg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Lg=!1}var Ba=(()=>{let e=class e{constructor(r){this._platformId=r,this.isBrowser=this._platformId?sD(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Lg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(i){return new(i||e)(b(it))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ja;function mL(){if(ja==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ja=!0}))}finally{ja=ja||!1}return ja}function jg(t){return mL()?t:!!t.capture}function TD(t){return t.composedPath?t.composedPath()[0]:t.target}function AD(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Bg(t){return Array.isArray(t)?t:[t]}function Ug(t){return t instanceof ot?t.nativeElement:t}var gL=(()=>{let e=class e{create(r){return typeof MutationObserver>"u"?null:new MutationObserver(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var MD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({providers:[gL]});let t=e;return t})();var RD=new Set,Ci,yL=(()=>{let e=class e{constructor(r,i){this._platform=r,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_L}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&vL(r,this._nonce),this._matchMedia(r)}};e.\u0275fac=function(i){return new(i||e)(b(Ba),b(Ma,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vL(t,e){if(!RD.has(t))try{Ci||(Ci=document.createElement("style"),e&&(Ci.nonce=e),Ci.setAttribute("type","text/css"),document.head.appendChild(Ci)),Ci.sheet&&(Ci.sheet.insertRule(`@media ${t} {body{ }}`,0),RD.add(t))}catch(n){console.error(n)}}function _L(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var PD=(()=>{let e=class e{constructor(r,i){this._mediaMatcher=r,this._zone=i,this._queries=new Map,this._destroySubject=new ke}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return ND(Bg(r)).some(o=>this._registerQuery(o).mql.matches)}observe(r){let o=ND(Bg(r)).map(a=>this._registerQuery(a).observable),s=Wn(o);return s=pr(s.pipe(rn(1)),s.pipe(Tp(1),Ip(0))),s.pipe(L(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);let i=this._mediaMatcher.matchMedia(r),s={observable:new W(a=>{let c=l=>this._zone.run(()=>a.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(Kn(i),L(({matches:a})=>({query:r,matches:a})),aa(this._destroySubject)),mql:i};return this._queries.set(r,s),s}};e.\u0275fac=function(i){return new(i||e)(b(yL),b(H))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ND(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}function FD(t){return t.buttons===0||t.detail===0}function VD(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var kD="cdk-high-contrast-black-on-white",OD="cdk-high-contrast-white-on-black",$g="cdk-high-contrast-active",LD=(()=>{let e=class e{constructor(r,i){this._platform=r,this._document=i,this._breakpointSubscription=x(PD).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;let r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);let i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(r):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(r.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let r=this._document.body.classList;r.remove($g,kD,OD),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===1?r.add($g,kD):i===2&&r.add($g,OD)}}};e.\u0275fac=function(i){return new(i||e)(b(Ba),b(He))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Hg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({});let t=e;return t})();function IL(){return!0}var xL=new M("mat-sanity-checks",{providedIn:"root",factory:IL}),er=(()=>{let e=class e{constructor(r,i,o){this._sanityChecks=i,this._document=o,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return AD()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[r]}};e.\u0275fac=function(i){return new(i||e)(b(LD),b(xL,8),b(He))},e.\u0275mod=re({type:e}),e.\u0275inj=ne({imports:[Hg,Hg]});let t=e;return t})();var zg=class{constructor(e,n,r,i=!1){this._renderer=e,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}},jD=jg({passive:!0,capture:!0}),qg=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=TD(e);n&&this._events.get(e.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,r,i){let o=this._events.get(n);if(o){let s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,jD)})}removeHandler(e,n,r){let i=this._events.get(e);if(!i)return;let o=i.get(n);o&&(o.delete(r),o.size===0&&i.delete(n),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,jD)))}},BD={enterDuration:225,exitDuration:150},DL=800,UD=jg({passive:!0,capture:!0}),$D=["mousedown","touchstart"],HD=["mouseup","mouseleave","touchend","touchcancel"],$a=class $a{constructor(e,n,r,i){this._target=e,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ug(r))}fadeInRipple(e,n,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=T(T({},BD),r.animation);r.centered&&(e=i.left+i.width/2,n=i.top+i.height/2);let s=r.radius||CL(e,n,i),a=e-i.left,c=n-i.top,l=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${c-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,g=h==="none"||f==="0s"||f==="0s, 0s"||i.width===0&&i.height===0,y=new zg(this,u,r,g);u.style.transform="scale3d(1, 1, 1)",y.state=0,r.persistent||(this._mostRecentTransientRipple=y);let _=null;return!g&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let I=()=>this._finishRippleTransition(y),P=()=>this._destroyRipple(y);u.addEventListener("transitionend",I),u.addEventListener("transitioncancel",P),_={onTransitionEnd:I,onTransitionCancel:P}}),this._activeRipples.set(y,_),(g||!l)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(e.state===2||e.state===3)return;let n=e.element,r=T(T({},BD),e.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Ug(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,$D.forEach(r=>{$a._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{HD.forEach(n=>{this._triggerElement.addEventListener(n,this,UD)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===0?this._startFadeOutTransition(e):e.state===2&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=FD(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+DL;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!VD(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===1||e.config.terminateOnPointerUp&&e.state===0;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&($D.forEach(n=>$a._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&HD.forEach(n=>e.removeEventListener(n,this,UD)))}};$a._eventManager=new qg;var zD=$a;function CL(t,e,n){let r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}var TL=["*"];var AL=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],SL=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],ML=new M("MAT_CARD_CONFIG"),Ad=(()=>{let e=class e{constructor(r){this.appearance=r?.appearance||"raised"}};e.\u0275fac=function(i){return new(i||e)(z(ML,8))},e.\u0275cmp=rt({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,o){i&2&&Tr("mat-mdc-card-outlined",o.appearance==="outlined")("mdc-card--outlined",o.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:TL,decls:1,vars:0,template:function(i,o){i&1&&(Pa(),Ei(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0});let t=e;return t})();var Sd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Me({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]});let t=e;return t})();var Md=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:SL,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,o){i&1&&(Pa(AL),Ei(0),le(1,"div",0),Ei(2,1),ge(),Ei(3,2))},encapsulation:2,changeDetection:0});let t=e;return t})(),Rd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Me({type:e,selectors:[["mat-card-footer"]],hostAttrs:[1,"mat-mdc-card-footer"]});let t=e;return t})();var KD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({imports:[er,Go,er]});let t=e;return t})();var X="primary",rc=Symbol("RouteTitle"),Yg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Zo(t){return new Yg(t)}function NL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function PL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Sn(t[n],e[n]))return!1;return!0}function Sn(t,e){let n=t?Zg(t):void 0,r=e?Zg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!iC(t[i],e[i]))return!1;return!0}function Zg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function iC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function oC(t){return t.length>0?t[t.length-1]:null}function Nr(t){return bp(t)?t:bi(t)?oe(Promise.resolve(t)):O(t)}var kL={exact:aC,subset:cC},sC={exact:OL,subset:FL,ignored:()=>!0};function YD(t,e,n){return kL[n.paths](t.root,e.root,n.matrixParams)&&sC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function OL(t,e){return Sn(t,e)}function aC(t,e,n){if(!Ai(t.segments,e.segments)||!kd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!aC(t.children[r],e.children[r],n))return!1;return!0}function FL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>iC(t[n],e[n]))}function cC(t,e,n){return lC(t,e,e.segments,n)}function lC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ai(i,n)||e.hasChildren()||!kd(i,n,r))}else if(t.segments.length===n.length){if(!Ai(t.segments,n)||!kd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!cC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ai(t.segments,i)||!kd(t.segments,i,r)||!t.children[X]?!1:lC(t.children[X],e,o,r)}}function kd(t,e,n){return e.every((r,i)=>sC[n](t[i].parameters,r.parameters))}var Sr=class{constructor(e=new de([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zo(this.queryParams)),this._queryParamMap}toString(){return jL.serialize(this)}},de=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Od(this)}},Ti=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Zo(this.parameters)),this._parameterMap}toString(){return dC(this)}};function VL(t,e){return Ai(t,e)&&t.every((n,r)=>Sn(n.parameters,e[r].parameters))}function Ai(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function LL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var ic=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>(()=>new Qa)(),providedIn:"root"});let t=e;return t})(),Qa=class{parse(e){let n=new Jg(e);return new Sr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ha(e.root,!0)}`,r=$L(e.queryParams),i=typeof e.fragment=="string"?`#${BL(e.fragment)}`:"";return`${n}${r}${i}`}},jL=new Qa;function Od(t){return t.segments.map(e=>dC(e)).join("/")}function Ha(t,e){if(!t.hasChildren())return Od(t);if(e){let n=t.children[X]?Ha(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${Ha(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=LL(t,(r,i)=>i===X?[Ha(t.children[X],!1)]:[`${i}:${Ha(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${Od(t)}/${n[0]}`:`${Od(t)}/(${n.join("//")})`}}function uC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nd(t){return uC(t).replace(/%3B/gi,";")}function BL(t){return encodeURI(t)}function Xg(t){return uC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fd(t){return decodeURIComponent(t)}function ZD(t){return Fd(t.replace(/\+/g,"%20"))}function dC(t){return`${Xg(t.path)}${UL(t.parameters)}`}function UL(t){return Object.keys(t).map(e=>`;${Xg(e)}=${Xg(t[e])}`).join("")}function $L(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(i=>`${Nd(n)}=${Nd(i)}`).join("&"):`${Nd(n)}=${Nd(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var HL=/^[^\/()?;#]+/;function Gg(t){let e=t.match(HL);return e?e[0]:""}var zL=/^[^\/()?;=#]+/;function qL(t){let e=t.match(zL);return e?e[0]:""}var GL=/^[^=?&#]+/;function WL(t){let e=t.match(GL);return e?e[0]:""}var KL=/^[^&#]+/;function QL(t){let e=t.match(KL);return e?e[0]:""}var Jg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new de(e,n)),r}parseSegment(){let e=Gg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new Ti(Fd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=qL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Gg(this.remaining);i&&(r=i,this.capture(r))}e[Fd(n)]=Fd(r)}parseQueryParam(e){let n=WL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=QL(this.remaining);s&&(r=s,this.capture(r))}let i=ZD(n),o=ZD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Gg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new F(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[X]:new de([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function hC(t){return t.segments.length>0?new de([],{[X]:t}):t}function fC(t){let e={};for(let r of Object.keys(t.children)){let i=t.children[r],o=fC(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new de(t.segments,e);return YL(n)}function YL(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new de(t.segments.concat(e.segments),e.children)}return t}function Xo(t){return t instanceof Sr}function ZL(t,e,n=null,r=null){let i=pC(t);return mC(i,e,n,r)}function pC(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new de(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=hC(r);return e??i}function mC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Wg(i,i,i,n,r);let o=XL(e);if(o.toRoot())return Wg(i,i,new de([],{}),n,r);let s=JL(o,i,t),a=s.processChildren?Ga(s.segmentGroup,s.index,o.commands):yC(s.segmentGroup,s.index,o.commands);return Wg(i,s.segmentGroup,a,n,r)}function Vd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ya(t){return typeof t=="object"&&t!=null&&t.outlets}function Wg(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=gC(t,e,n);let a=hC(fC(s));return new Sr(a,o,i)}function gC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=gC(o,e,n)}),new de(t.segments,r)}var Ld=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Vd(r[0]))throw new F(4003,!1);let i=r.find(Ya);if(i&&i!==oC(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ld(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ld(n,e,r)}var Qo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function JL(t,e,n){if(t.isAbsolute)return new Qo(e,!0,0);if(!n)return new Qo(e,!1,NaN);if(n.parent===null)return new Qo(n,!0,0);let r=Vd(t.commands[0])?0:1,i=n.segments.length-1+r;return e2(n,i,t.numberOfDoubleDots)}function e2(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new Qo(r,!1,i-o)}function t2(t){return Ya(t[0])?t[0].outlets:{[X]:t}}function yC(t,e,n){if(t||(t=new de([],{})),t.segments.length===0&&t.hasChildren())return Ga(t,e,n);let r=n2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new de(t.segments.slice(0,r.pathIndex),{});return o.children[X]=new de(t.segments.slice(r.pathIndex),t.children),Ga(o,0,i)}else return r.match&&i.length===0?new de(t.segments,{}):r.match&&!t.hasChildren()?ey(t,e,n):r.match?Ga(t,0,i):ey(t,e,n)}function Ga(t,e,n){if(n.length===0)return new de(t.segments,{});{let r=t2(n),i={};if(Object.keys(r).some(o=>o!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let o=Ga(t.children[X],e,n);return new de(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=yC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new de(t.segments,i)}}function n2(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ya(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!JD(c,l,s))return o;r+=2}else{if(!JD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ey(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ya(o)){let c=r2(o.outlets);return new de(r,c)}if(i===0&&Vd(n[0])){let c=t.segments[e];r.push(new Ti(c.path,XD(n[0]))),i++;continue}let s=Ya(o)?o.outlets[X]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Vd(a)?(r.push(new Ti(s,XD(a))),i+=2):(r.push(new Ti(s,{})),i++)}return new de(r,{})}function r2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ey(new de([],{}),0,r))}),e}function XD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function JD(t,e,n){return t==n.path&&Sn(e,n.parameters)}var Wa="imperative",Qt=class{constructor(e,n){this.id=e,this.url=n}},Jo=class extends Qt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends Qt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mr=class extends Qt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rr=class extends Qt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}},Za=class extends Qt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jd=class extends Qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ty=class extends Qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ny=class extends Qt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ry=class extends Qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iy=class extends Qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oy=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sy=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ay=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cy=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ly=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uy=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Xa=class{},Ja=class{constructor(e){this.url=e}};var dy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new oc,this.attachRef=null}},oc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new dy,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ud=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=hy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=hy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=fy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fy(e,this._root).map(n=>n.value)}};function hy(t,e){if(t===e.value)return e;for(let n of e.children){let r=hy(t,n);if(r)return r}return null}function fy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=fy(t,n);if(r.length)return r.unshift(e),r}return[]}var Bt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ko(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var $d=class extends Ud{constructor(e,n){super(e),this.snapshot=n,Iy(this,e)}toString(){return this.snapshot.toString()}};function vC(t,e){let n=i2(t,e),r=new nt([new Ti("",{})]),i=new nt({}),o=new nt({}),s=new nt({}),a=new nt(""),c=new es(r,i,s,a,o,X,e,n.root);return c.snapshot=n.root,new $d(new Bt(c,[]),n)}function i2(t,e){let n={},r={},i={},o="",s=new ec([],n,i,o,r,X,e,null,{});return new Hd("",new Bt(s,[]))}var es=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(L(l=>l[rc]))??O(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(L(e=>Zo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(L(e=>Zo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ey(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:T(T({},e.params),t.params),data:T(T({},e.data),t.data),resolve:T(T(T(T({},t.data),e.data),i?.data),t._resolvedData)}:r={params:t.params,data:t.data,resolve:T(T({},t.data),t._resolvedData??{})},i&&wC(i)&&(r.resolve[rc]=i.title),r}var ec=class{get title(){return this.data?.[rc]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zo(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Hd=class extends Ud{constructor(e,n){super(n),this.url=e,Iy(this,n)}toString(){return _C(this._root)}};function Iy(t,e){e.value._routerState=t,e.children.forEach(n=>Iy(t,n))}function _C(t){let e=t.children.length>0?` { ${t.children.map(_C).join(", ")} } `:"";return`${t.value}${e}`}function Kg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Sn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Sn(e.params,n.params)||t.paramsSubject.next(n.params),PL(e.url,n.url)||t.urlSubject.next(n.url),Sn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function py(t,e){let n=Sn(t.params,e.params)&&VL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||py(t.parent,e.parent))}function wC(t){return typeof t.title=="string"||t.title===null}var xy=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new Oe,this.deactivateEvents=new Oe,this.attachEvents=new Oe,this.detachEvents=new Oe,this.parentContexts=x(oc),this.location=x(Uo),this.changeDetector=x(Cr),this.environmentInjector=x(Vt),this.inputBinder=x(Kd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new my(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Me({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ir]});let t=e;return t})(),my=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===es?this.route:e===oc?this.childContexts:this.parent.get(e,n)}},Kd=new M(""),eC=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Wn([i.queryParams,i.params,i.data]).pipe(be(([s,a,c],l)=>(c=T(T(T({},s),a),c),l===0?O(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Wx(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function o2(t,e,n){let r=tc(t,e._root,n?n._root:void 0);return new $d(r,e)}function tc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=s2(t,e,n);return new Bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>tc(t,a)),s}}let r=a2(e.value),i=e.children.map(o=>tc(t,o));return new Bt(r,i)}}function s2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return tc(t,r,i);return tc(t,r)})}function a2(t){return new es(new nt(t.url),new nt(t.params),new nt(t.queryParams),new nt(t.fragment),new nt(t.data),t.outlet,t.component,t)}var bC="ngNavigationCancelingError";function EC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Xo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=IC(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function IC(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[bC]=!0,r.cancellationCode=e,n&&(r.url=n),r}function c2(t){return xC(t)&&Xo(t.url)}function xC(t){return t&&t[bC]}var l2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Fx],decls:1,vars:0,template:function(i,o){i&1&&st(0,"router-outlet")},dependencies:[xy],encapsulation:2});let t=e;return t})();function u2(t,e){return t.providers&&!t._injector&&(t._injector=cd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Dy(t){let e=t.children&&t.children.map(Dy),n=e?ue(T({},t),{children:e}):T({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=l2),n}function Mn(t){return t.outlet||X}function d2(t,e){let n=t.filter(r=>Mn(r)===e);return n.push(...t.filter(r=>Mn(r)!==e)),n}function sc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var h2=(t,e,n,r)=>L(i=>(new gy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),gy=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Kg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ko(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ko(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ko(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ko(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new uy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new cy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Kg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Kg(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=sc(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},zd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Yo=class{constructor(e,n){this.component=e,this.route=n}};function f2(t,e,n){let r=t._root,i=e?e._root:null;return za(r,i,n,[r.value])}function p2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ns(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!fE(t)?t:e.get(t):r}function za(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ko(e);return t.children.forEach(s=>{m2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ka(a,n.getContext(s),i)),i}function m2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=g2(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new zd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?za(t,e,a?a.children:null,r,i):za(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Yo(a.outlet.component,s))}else s&&Ka(e,a,i),i.canActivateChecks.push(new zd(r)),o.component?za(t,null,a?a.children:null,r,i):za(t,null,n,r,i);return i}function g2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ai(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ai(t.url,e.url)||!Sn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!py(t,e)||!Sn(t.queryParams,e.queryParams);case"paramsChange":default:return!py(t,e)}}function Ka(t,e,n){let r=Ko(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ka(s,e.children.getContext(o),n):Ka(s,null,n):Ka(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Yo(e.outlet.component,i)):n.canDeactivateChecks.push(new Yo(null,i)):n.canDeactivateChecks.push(new Yo(null,i))}function ac(t){return typeof t=="function"}function y2(t){return typeof t=="boolean"}function v2(t){return t&&ac(t.canLoad)}function _2(t){return t&&ac(t.canActivate)}function w2(t){return t&&ac(t.canActivateChild)}function b2(t){return t&&ac(t.canDeactivate)}function E2(t){return t&&ac(t.canMatch)}function DC(t){return t instanceof Gn||t?.name==="EmptyError"}var Pd=Symbol("INITIAL_VALUE");function ts(){return be(t=>Wn(t.map(e=>e.pipe(rn(1),Kn(Pd)))).pipe(L(e=>{for(let n of e)if(n!==!0){if(n===Pd)return Pd;if(n===!1||n instanceof Sr)return n}return!0}),Ue(e=>e!==Pd),rn(1)))}function I2(t,e){return Be(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?O(ue(T({},n),{guardsResult:!0})):x2(s,r,i,t).pipe(Be(a=>a&&y2(a)?D2(r,o,t,e):O(a)),L(a=>ue(T({},n),{guardsResult:a})))})}function x2(t,e,n,r){return oe(t).pipe(Be(i=>M2(i.component,i.route,n,e,r)),Rt(i=>i!==!0,!0))}function D2(t,e,n,r){return oe(e).pipe(gr(i=>pr(T2(i.route.parent,r),C2(i.route,r),S2(t,i.path,n),A2(t,i.route,n))),Rt(i=>i!==!0,!0))}function C2(t,e){return t!==null&&e&&e(new ly(t)),O(!0)}function T2(t,e){return t!==null&&e&&e(new ay(t)),O(!0)}function A2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return O(!0);let i=r.map(o=>nu(()=>{let s=sc(e)??n,a=ns(o,s),c=_2(a)?a.canActivate(e,t):Zn(s,()=>a(e,t));return Nr(c).pipe(Rt())}));return O(i).pipe(ts())}function S2(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>p2(s)).filter(s=>s!==null).map(s=>nu(()=>{let a=s.guards.map(c=>{let l=sc(s.node)??n,u=ns(c,l),d=w2(u)?u.canActivateChild(r,t):Zn(l,()=>u(r,t));return Nr(d).pipe(Rt())});return O(a).pipe(ts())}));return O(o).pipe(ts())}function M2(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return O(!0);let s=o.map(a=>{let c=sc(e)??i,l=ns(a,c),u=b2(l)?l.canDeactivate(t,e,n,r):Zn(c,()=>l(t,e,n,r));return Nr(u).pipe(Rt())});return O(s).pipe(ts())}function R2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return O(!0);let o=i.map(s=>{let a=ns(s,t),c=v2(a)?a.canLoad(e,n):Zn(t,()=>a(e,n));return Nr(c)});return O(o).pipe(ts(),CC(r))}function CC(t){return mp(Ae(e=>{if(Xo(e))throw EC(t,e)}),L(e=>e===!0))}function N2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return O(!0);let o=i.map(s=>{let a=ns(s,t),c=E2(a)?a.canMatch(e,n):Zn(t,()=>a(e,n));return Nr(c)});return O(o).pipe(ts(),CC(r))}var nc=class{constructor(e){this.segmentGroup=e||null}},qd=class extends Error{constructor(e){super(),this.urlTree=e}};function Wo(t){return vo(new nc(t))}function P2(t){return vo(new F(4e3,!1))}function k2(t){return vo(IC(!1,3))}var yy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return O(r);if(i.numberOfChildren>1||!i.children[X])return P2(e.redirectTo);i=i.children[X]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new qd(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Sr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new de(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},vy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function O2(t,e,n,r,i){let o=Cy(t,e,n);return o.matched?(r=u2(e,r),N2(r,e,n,i).pipe(L(s=>s===!0?o:T({},vy)))):O(o)}function Cy(t,e,n){if(e.path==="**")return F2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?T({},vy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||NL)(n,t,e);if(!i)return T({},vy);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?T(T({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function F2(t){return{matched:!0,parameters:t.length>0?oC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function tC(t,e,n,r){return n.length>0&&j2(t,n,r)?{segmentGroup:new de(e,L2(r,new de(n,t.children))),slicedSegments:[]}:n.length===0&&B2(t,n,r)?{segmentGroup:new de(t.segments,V2(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new de(t.segments,t.children),slicedSegments:n}}function V2(t,e,n,r,i){let o={};for(let s of r)if(Qd(t,n,s)&&!i[Mn(s)]){let a=new de([],{});o[Mn(s)]=a}return T(T({},i),o)}function L2(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&Mn(r)!==X){let i=new de([],{});n[Mn(r)]=i}return n}function j2(t,e,n){return n.some(r=>Qd(t,e,r)&&Mn(r)!==X)}function B2(t,e,n){return n.some(r=>Qd(t,e,r))}function Qd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function U2(t,e,n,r){return Mn(t)!==r&&(r===X||!Qd(e,n,t))?!1:Cy(e,t,n).matched}function $2(t,e,n){return e.length===0&&!t.children[n]}var _y=class{};function H2(t,e,n,r,i,o,s="emptyOnly"){return new wy(t,e,n,r,i,s,o).recognize()}var z2=31,wy=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new yy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=tC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(L(n=>{let r=new ec([],Object.freeze({}),Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,{},X,this.rootComponentType,null,{}),i=new Bt(r,n),o=new Hd("",i),s=ZL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,X).pipe(mr(r=>{if(r instanceof qd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof nc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Ey(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(L(o=>o instanceof Bt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return oe(i).pipe(gr(o=>{let s=r.children[o],a=d2(n,o);return this.processSegmentGroup(e,a,s,o)}),ci((o,s)=>(o.push(...s),o)),yr(null),Dp(),Be(o=>{if(o===null)return Wo(r);let s=TC(o);return q2(s),O(s)}))}processSegment(e,n,r,i,o,s){return oe(n).pipe(gr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(mr(c=>{if(c instanceof nc)return O(null);throw c}))),Rt(a=>!!a),mr(a=>{if(DC(a))return $2(r,i,o)?O(new _y):Wo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return U2(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Wo(i):Wo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Cy(n,i,o);if(!a)return Wo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>z2&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(Be(h=>this.processSegment(e,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=O2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(be(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(be(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new ec(u,h,Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,W2(r),Mn(r),r.component??r._loadedComponent??null,r,K2(r)),{segmentGroup:g,slicedSegments:y}=tC(n,u,d,c);if(y.length===0&&g.hasChildren())return this.processChildren(l,c,g).pipe(L(I=>I===null?null:new Bt(f,I)));if(c.length===0&&y.length===0)return O(new Bt(f,[]));let _=Mn(r)===o;return this.processSegment(l,c,g,y,_?X:o,!0).pipe(L(I=>new Bt(f,I instanceof Bt?[I]:[])))}))):Wo(n)))}getChildConfig(e,n,r){return n.children?O({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?O({routes:n._loadedRoutes,injector:n._loadedInjector}):R2(e,n,r,this.urlSerializer).pipe(Be(i=>i?this.configLoader.loadChildren(e,n).pipe(Ae(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):k2(n))):O({routes:[],injector:e})}};function q2(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function G2(t){let e=t.value.routeConfig;return e&&e.path===""}function TC(t){let e=[],n=new Set;for(let r of t){if(!G2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=TC(r.children);e.push(new Bt(r.value,i))}return e.filter(r=>!n.has(r))}function W2(t){return t.data||{}}function K2(t){return t.resolve||{}}function Q2(t,e,n,r,i,o){return Be(s=>H2(t,e,n,r,s.extractedUrl,i,o).pipe(L(({state:a,tree:c})=>ue(T({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Y2(t,e){return Be(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return O(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of AC(c))s.add(l);let a=0;return oe(s).pipe(gr(c=>o.has(c)?Z2(c,r,t,e):(c.data=Ey(c,c.parent,t).resolve,O(void 0))),Ae(()=>a++),wo(1),Be(c=>a===s.size?O(n):Ct))})}function AC(t){let e=t.children.map(n=>AC(n)).flat();return[t,...e]}function Z2(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!wC(i)&&(o[rc]=i.title),X2(o,t,e,r).pipe(L(s=>(t._resolvedData=s,t.data=Ey(t,t.parent,n).resolve,null)))}function X2(t,e,n,r){let i=Zg(t);if(i.length===0)return O({});let o={};return oe(i).pipe(Be(s=>J2(t[s],e,n,r).pipe(Rt(),Ae(a=>{o[s]=a}))),wo(1),xp(o),mr(s=>DC(s)?Ct:vo(s)))}function J2(t,e,n,r){let i=sc(e)??r,o=ns(t,i),s=o.resolve?o.resolve(e,n):Zn(i,()=>o(e,n));return Nr(s)}function Qg(t){return be(e=>{let n=t(e);return n?oe(n).pipe(L(()=>e)):O(e)})}var SC=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===X);return i}getResolvedTitleForRoute(r){return r.data[rc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>(()=>x(ej))(),providedIn:"root"});let t=e;return t})(),ej=(()=>{let e=class e extends SC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(b(Vg))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cc=new M("",{providedIn:"root",factory:()=>({})}),Gd=new M("ROUTES"),Ty=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(pd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return O(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Nr(r.loadComponent()).pipe(L(MC),Ae(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),_o(()=>{this.componentLoaders.delete(r)})),o=new po(i,()=>new ke).pipe(fo());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return O({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=tj(i,this.compiler,r,this.onLoadEndListener).pipe(_o(()=>{this.childrenLoaders.delete(i)})),a=new po(s,()=>new ke).pipe(fo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tj(t,e,n,r){return Nr(t.loadChildren()).pipe(L(MC),Be(i=>i instanceof Ea||Array.isArray(i)?O(i):oe(e.compileModuleAsync(i))),L(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Gd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Dy),injector:o}}))}function nj(t){return t&&typeof t=="object"&&"default"in t}function MC(t){return nj(t)?t.default:t}var Ay=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>(()=>x(rj))(),providedIn:"root"});let t=e;return t})(),rj=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),RC=new M(""),NC=new M("");function ij(t,e,n){let r=t.get(NC),i=t.get(He);return t.get(H).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),oj(t))),{onViewTransitionCreated:c}=r;return c&&Zn(t,()=>c({transition:a,from:e,to:n})),s})}function oj(t){return new Promise(e=>{ug(e,{injector:t})})}var Sy=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ke,this.transitionAbortSubject=new ke,this.configLoader=x(Ty),this.environmentInjector=x(Vt),this.urlSerializer=x(ic),this.rootContexts=x(oc),this.location=x(qo),this.inputBindingEnabled=x(Kd,{optional:!0})!==null,this.titleStrategy=x(SC),this.options=x(cc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(Ay),this.createViewTransition=x(RC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>O(void 0),this.rootComponentType=null;let r=o=>this.events.next(new oy(o)),i=o=>this.events.next(new sy(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ue(T(T({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new nt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Wa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ue(s=>s.id!==0),L(s=>ue(T({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),be(s=>{this.currentTransition=s;let a=!1,c=!1;return O(s).pipe(Ae(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ue(T({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),be(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Rr(l.id,this.urlSerializer.serialize(l.rawUrl),h,0)),l.resolve(null),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return O(l).pipe(be(h=>{let f=this.transitions?.getValue();return this.events.next(new Jo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Ct:Promise.resolve(h)}),Q2(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ae(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ue(T({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new jd(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:g,restoredState:y,extras:_}=l,I=new Jo(h,this.urlSerializer.serialize(f),g,y);this.events.next(I);let P=vC(f,this.rootComponentType).snapshot;return this.currentTransition=s=ue(T({},l),{targetSnapshot:P,urlAfterRedirects:f,extras:ue(T({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,O(s)}else{let h="";return this.events.next(new Rr(l.id,this.urlSerializer.serialize(l.extractedUrl),h,1)),l.resolve(null),Ct}}),Ae(l=>{let u=new ty(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),L(l=>(this.currentTransition=s=ue(T({},l),{guards:f2(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),I2(this.environmentInjector,l=>this.events.next(l)),Ae(l=>{if(s.guardsResult=l.guardsResult,Xo(l.guardsResult))throw EC(this.urlSerializer,l.guardsResult);let u=new ny(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Ue(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",3),!1)),Qg(l=>{if(l.guards.canActivateChecks.length)return O(l).pipe(Ae(u=>{let d=new ry(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),be(u=>{let d=!1;return O(u).pipe(Y2(this.paramsInheritanceStrategy,this.environmentInjector),Ae({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",2)}}))}),Ae(u=>{let d=new iy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Qg(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ae(f=>{d.component=f}),L(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Wn(u(l.targetSnapshot.root)).pipe(yr(),rn(1))}),Qg(()=>this.afterPreactivation()),be(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?oe(d).pipe(L(()=>s)):O(s)}),L(l=>{let u=o2(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ue(T({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Ae(()=>{this.events.next(new Xa)}),h2(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),rn(1),Ae({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),aa(this.transitionAbortSubject.pipe(Ae(l=>{throw l}))),_o(()=>{if(!a&&!c){let l="";this.cancelNavigationTransition(s,l,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),mr(l=>{if(c=!0,xC(l))this.events.next(new Mr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),c2(l)?this.events.next(new Ja(l.url)):s.resolve(!1);else{this.events.next(new Za(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(u){s.reject(u)}}return Ct}))}))}cancelNavigationTransition(r,i,o){let s=new Mr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sj(t){return t!==Wa}var aj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>(()=>x(cj))(),providedIn:"root"});let t=e;return t})(),by=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},cj=(()=>{let e=class e extends by{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ta(e)))(o||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),PC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>(()=>x(lj))(),providedIn:"root"});let t=e;return t})(),lj=(()=>{let e=class e extends PC{constructor(){super(...arguments),this.location=x(qo),this.urlSerializer=x(ic),this.options=x(cc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(Ay),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=vC(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Jo)this.stateMemento=this.createStateMemento();else if(r instanceof Rr)this.rawUrlTree=i.initialUrl;else if(r instanceof jd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Xa?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Mr&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof Za?this.restoreHistory(i,!0):r instanceof tr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=T(T({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=T(T({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ta(e)))(o||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(qa||{});function kC(t,e){t.events.pipe(Ue(n=>n instanceof tr||n instanceof Mr||n instanceof Za||n instanceof Rr),L(n=>n instanceof tr||n instanceof Rr?qa.COMPLETE:(n instanceof Mr?n.code===0||n.code===1:!1)?qa.REDIRECTING:qa.FAILED),Ue(n=>n!==qa.REDIRECTING),rn(1)).subscribe(()=>{e()})}function uj(t){throw t}var dj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},un=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=x(hd),this.stateManager=x(PC),this.options=x(cc,{optional:!0})||{},this.pendingTasks=x(fd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(Sy),this.urlSerializer=x(ic),this.location=x(qo),this.urlHandlingStrategy=x(Ay),this._events=new ke,this.errorHandler=this.options.errorHandler||uj,this.navigated=!1,this.routeReuseStrategy=x(aj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(Gd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(Kd,{optional:!0}),this.eventsSubscription=new je,this.isNgZoneEnabled=x(H)instanceof H&&H.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Mr&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof tr)this.navigated=!0;else if(i instanceof Ja){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||sj(o.source)};this.scheduleNavigation(a,Wa,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}pj(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Wa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=T({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Dy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=T(T({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=pC(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return mC(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Xo(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Wa,null,i)}navigate(r,i={skipLocationChange:!1}){return fj(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=T({},dj):i===!1?o=T({},hj):o=i,Xo(r))return YD(this.currentUrlTree,r,o);let s=this.parseUrl(r);return YD(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{let s=r[o];return s!=null&&(i[o]=s),i},{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return kC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new F(4008,!1)}function pj(t){return!(t instanceof Xa)&&!(t instanceof Ja)}var Wd=class{};var mj=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ue(r=>r instanceof tr),gr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=cd(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return oe(o).pipe(fr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=O(null);let s=o.pipe(Be(a=>a===null?O(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return oe([s,a]).pipe(fr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(b(un),b(pd),b(Vt),b(Wd),b(Ty))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),OC=new M(""),gj=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Jo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof tr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Rr&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Bd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Bd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){nx()},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function yj(t){return t.routerState.root}function lc(t,e){return{\u0275kind:t,\u0275providers:e}}function vj(){let t=x(jt);return e=>{let n=t.get(Xn);if(e!==n.components[0])return;let r=t.get(un),i=t.get(FC);t.get(My)===1&&r.initialNavigation(),t.get(VC,null,ee.Optional)?.setUpPreloading(),t.get(OC,null,ee.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FC=new M("",{factory:()=>new ke}),My=new M("",{providedIn:"root",factory:()=>1});function _j(){return lc(2,[{provide:My,useValue:0},{provide:yd,multi:!0,deps:[jt],useFactory:e=>{let n=e.get(tD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(un),o=e.get(FC);kC(i,()=>{r(!0)}),e.get(Sy).afterPreactivation=()=>(r(!0),o.closed?O(void 0):o),i.initialNavigation()}))}}])}function wj(){return lc(3,[{provide:yd,multi:!0,useFactory:()=>{let e=x(un);return()=>{e.setUpLocationChangeListener()}}},{provide:My,useValue:2}])}var VC=new M("");function bj(t){return lc(0,[{provide:VC,useExisting:mj},{provide:Wd,useExisting:t}])}function Ej(){return lc(8,[eC,{provide:Kd,useExisting:eC}])}function Ij(t){let e=[{provide:RC,useValue:ij},{provide:NC,useValue:T({skipNextTransition:!!t?.skipInitialTransition},t)}];return lc(9,e)}var nC=new M("ROUTER_FORROOT_GUARD"),xj=[qo,{provide:ic,useClass:Qa},un,oc,{provide:es,useFactory:yj,deps:[un]},Ty,[]],Ry=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[xj,[],{provide:Gd,multi:!0,useValue:r},{provide:nC,useFactory:Aj,deps:[[un,new gi,new Qu]]},{provide:cc,useValue:i||{}},i?.useHash?Cj():Tj(),Dj(),i?.preloadingStrategy?bj(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Sj(i):[],i?.bindToComponentInputs?Ej().\u0275providers:[],i?.enableViewTransitions?Ij().\u0275providers:[],Mj()]}}static forChild(r){return{ngModule:e,providers:[{provide:Gd,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(b(nC,8))},e.\u0275mod=re({type:e}),e.\u0275inj=ne({});let t=e;return t})();function Dj(){return{provide:OC,useFactory:()=>{let t=x(aD),e=x(H),n=x(cc),r=x(Sy),i=x(ic);return n.scrollOffset&&t.setOffset(n.scrollOffset),new gj(i,r,t,e,n)}}}function Cj(){return{provide:xi,useClass:rD}}function Tj(){return{provide:xi,useClass:Dg}}function Aj(t){return"guarded"}function Sj(t){return[t.initialNavigation==="disabled"?wj().\u0275providers:[],t.initialNavigation==="enabledBlocking"?_j().\u0275providers:[]]}var rC=new M("");function Mj(){return[{provide:rC,useFactory:vj},{provide:Ho,multi:!0,useExisting:rC}]}var Rj="firebase",Nj="10.7.1";hr(Rj,Nj,"app");var rs=new Cn("ANGULARFIRE2_VERSION");var Pj=(t,e)=>{let n=e?[e]:Zb(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Si=class{constructor(){return Pj(kj)}},kj="app-check";function Py(){}var Yd=class{zone;delegate;constructor(e,n=_p){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},ky=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Py,{},Py,Py)),n.pipe(Ae({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Zd=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Yd(Zone.current)),this.insideAngular=n.run(()=>new Yd(Zone.current,ai)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(b(H))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Oj(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function At(t){return Fj(Oj())(t)}function Fj(t){return function(n){return n=n.lift(new ky(t.ngZone)),n.pipe(nn(t.outsideAngular),zt(t.insideAngular))}}var jj=new Map,Bj={activated:!1,tokenObservers:[]},Uj={initialized:!1,enabled:!1};function dn(t){return jj.get(t)||Object.assign({},Bj)}function HC(){return Uj}var $j="https://content-firebaseappcheck.googleapis.com/v1";var Hj="exchangeDebugToken",jC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},a7=24*60*60*1e3;var Fy=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new op,this.pending.promise.catch(n=>{}),yield zj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new op,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function zj(t){return new Promise(e=>{setTimeout(e,t)})}var qj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Pr=new Qb("appCheck","AppCheck",qj);function zC(t){if(!dn(t).activated)throw Pr.create("use-before-activation",{appName:t.name})}function qC(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(f){throw Pr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw Pr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw Pr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Pr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function GC(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${$j}/projects/${n}/apps/${r}:${Hj}?key=${i}`,body:{debug_token:e}}}var Gj="firebase-app-check-database",Wj=1,Vy="firebase-app-check-store";var Xd=null;function Kj(){return Xd||(Xd=new Promise((t,e)=>{try{let n=indexedDB.open(Gj,Wj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Pr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Vy,{keyPath:"compositeKey"})}}}catch(n){e(Pr.create("storage-open",{originalErrorMessage:n?.message}))}}),Xd)}function Qj(t,e){return Yj(Zj(t),e)}function Yj(t,e){return v(this,null,function*(){let r=(yield Kj()).transaction(Vy,"readwrite"),o=r.objectStore(Vy).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Pr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Zj(t){return`${t.options.appId}-${t.name}`}var Ly=new Rl("@firebase/app-check");function Oy(t,e){return Ml()?Qj(t,e).catch(n=>{Ly.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function WC(){return HC().enabled}function KC(){return v(this,null,function*(){let t=HC();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Xj={error:"UNKNOWN_ERROR"};function Jj(t){return qb.encodeString(JSON.stringify(t),!1)}function jy(t,e=!1){return v(this,null,function*(){let n=t.app;zC(n);let r=dn(n),i=r.token,o;if(i&&!uc(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(uc(c)?i=c:yield Oy(n,void 0))}if(!e&&i&&uc(i))return{token:i.token};let s=!1;if(WC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qC(GC(n,yield KC()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Oy(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield dn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Ly.warn(c.message):Ly.error(c),o=c}let a;return i?o?uc(i)?a={token:i.token,internalError:o}:a=UC(o):(a={token:i.token},r.token=i,yield Oy(n,i)):a=UC(o),s&&rB(n,a),a})}function eB(t){return v(this,null,function*(){let e=t.app;zC(e);let{provider:n}=dn(e);if(WC()){let r=yield KC(),{token:i}=yield qC(GC(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function tB(t,e,n,r){let{app:i}=t,o=dn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&uc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),BC(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>BC(t))}function QC(t,e){let n=dn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function BC(t){let{app:e}=t,n=dn(e),r=n.tokenRefresher;r||(r=nB(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function nB(t){let{app:e}=t;return new Fy(()=>v(this,null,function*(){let n=dn(e),r;if(n.token?r=yield jy(t,!0):r=yield jy(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=dn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},jC.RETRIAL_MIN_WAIT,jC.RETRIAL_MAX_WAIT)}function rB(t,e){let n=dn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function uc(t){return t.expireTimeMillis-Date.now()>0}function UC(t){return{token:Jj(Xj),error:t}}var By=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=dn(this.app);for(let n of e)QC(this.app,n.next);return Promise.resolve()}};function iB(t,e){return new By(t,e)}function oB(t){return{getToken:e=>jy(t,e),getLimitedUseToken:()=>eB(t),addTokenListener:e=>tB(t,"INTERNAL",e),removeTokenListener:e=>QC(t.app,e)}}var sB="@firebase/app-check",aB="0.8.1";var cB="app-check",$C="app-check-internal";function lB(){Js(new ri(cB,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return iB(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider($C).initialize()})),Js(new ri($C,t=>{let e=t.getProvider("app-check").getImmediate();return oB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),hr(sB,aB)}lB();var uB=["localhost","0.0.0.0","127.0.0.1"],_7=typeof window<"u"&&uB.includes(window.location.hostname);var dB="firebase",hB="10.7.1";Dt.registerVersion(dB,hB,"app-compat");var fB=["ngOnDestroy"],XC=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(fB.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let d=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,d),d})})})});var Jd=class{constructor(e){return e}},is=new M("angularfire2.app.options"),os=new M("angularfire2.app.name");function dc(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=Dt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Dt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;pB("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Jd(s)}var pB=(t,...e)=>{yg()&&typeof console<"u"&&console[t](...e)},mB={provide:Jd,useFactory:dc,deps:[is,H,[new gi,os]]},JC=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:is,useValue:n},{provide:os,useValue:r}]}}constructor(n){Dt.registerVersion("angularfire",rs.full,"core"),Dt.registerVersion("angularfire",rs.full,"app-compat"),Dt.registerVersion("angular",rg.full,n.toString())}static \u0275fac=function(r){return new(r||t)(b(it))};static \u0275mod=re({type:t});static \u0275inj=ne({providers:[mB]})}return t})();function eh(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return gB(i,s)||(ZC("error",`${e} was already initialized on the ${n} Firebase App with different settings.${yB?" You may need to reload as Firebase is not HMR aware.":""}`),ZC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function gB(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var yB=typeof module<"u"&&!!module.hot,ZC=(t,...e)=>{yg()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Uy=new M("angularfire2.auth.use-emulator"),$y=new M("angularfire2.auth.settings"),Hy=new M("angularfire2.auth.tenant-id"),zy=new M("angularfire2.auth.langugage-code"),qy=new M("angularfire2.auth.use-device-language"),Gy=new M("angularfire.auth.persistence"),Wy=(t,e,n,r,i,o,s,a)=>eh(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),th=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,l,u,d,h,f){let g=new ke,y=O(void 0).pipe(zt(s.outsideAngular),be(()=>o.runOutsideAngular(()=>import("./chunk-KTRENSU5.js"))),L(()=>dc(n,o,r)),L(_=>Wy(_,o,a,l,u,d,c,h)),iu({bufferSize:1,refCount:!1}));if(Di(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=O(null);else{y.pipe(Rt()).subscribe();let _=y.pipe(be(D=>D.getRedirectResult().then(j=>j,()=>null)),At,iu({bufferSize:1,refCount:!1})),I=y.pipe(be(D=>new W(j=>({unsubscribe:o.runOutsideAngular(()=>D.onAuthStateChanged(B=>j.next(B),B=>j.error(B),()=>j.complete()))})))),P=y.pipe(be(D=>new W(j=>({unsubscribe:o.runOutsideAngular(()=>D.onIdTokenChanged(B=>j.next(B),B=>j.error(B),()=>j.complete()))}))));this.authState=_.pipe(ou(I),nn(s.outsideAngular),zt(s.insideAngular)),this.user=_.pipe(ou(P),nn(s.outsideAngular),zt(s.insideAngular)),this.idToken=this.user.pipe(be(D=>D?oe(D.getIdToken()):O(null))),this.idTokenResult=this.user.pipe(be(D=>D?oe(D.getIdTokenResult()):O(null))),this.credential=ra(_,g,this.authState.pipe(Ue(D=>!D))).pipe(L(D=>D?.user?D:null),nn(s.outsideAngular),zt(s.insideAngular))}return XC(this,y,o,{spy:{apply:(_,I,P)=>{(_.startsWith("signIn")||_.startsWith("createUser"))&&P.then(D=>g.next(D))}}})}static \u0275fac=function(r){return new(r||t)(b(is),b(os,8),b(it),b(H),b(Zd),b(Uy,8),b($y,8),b(Hy,8),b(zy,8),b(qy,8),b(Gy,8),b(Si,8))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var vB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fn={},A,mv=mv||{},q=vB||self;function mh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Dc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function _B(t){return Object.prototype.hasOwnProperty.call(t,Ky)&&t[Ky]||(t[Ky]=++wB)}var Ky="closure_uid_"+(1e9*Math.random()>>>0),wB=0;function bB(t,e,n){return t.call.apply(t.bind,arguments)}function EB(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ht(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ht=bB:ht=EB,ht.apply(null,arguments)}function nh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Je(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function kr(){this.s=this.s,this.o=this.o}var IB=0;kr.prototype.s=!1;kr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),IB!=0)&&_B(this)};kr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var fT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function gv(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function tT(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(mh(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function ft(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var xB=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};q.addEventListener("test",n,e),q.removeEventListener("test",n,e)}catch{}return t}();function yc(t){return/^[\s\xa0]*$/.test(t)}function gh(){var t=q.navigator;return t&&(t=t.userAgent)?t:""}function Rn(t){return gh().indexOf(t)!=-1}function yv(t){return yv[" "](t),t}yv[" "]=function(){};function DB(t,e){var n=fU;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var CB=Rn("Opera"),ls=Rn("Trident")||Rn("MSIE"),pT=Rn("Edge"),Jy=pT||ls,mT=Rn("Gecko")&&!(gh().toLowerCase().indexOf("webkit")!=-1&&!Rn("Edge"))&&!(Rn("Trident")||Rn("MSIE"))&&!Rn("Edge"),TB=gh().toLowerCase().indexOf("webkit")!=-1&&!Rn("Edge");function gT(){var t=q.document;return t?t.documentMode:void 0}var ev;e:{if(rh="",ih=function(){var t=gh();if(mT)return/rv:([^\);]+)(\)|;)/.exec(t);if(pT)return/Edge\/([\d\.]+)/.exec(t);if(ls)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(TB)return/WebKit\/(\S+)/.exec(t);if(CB)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),ih&&(rh=ih?ih[1]:""),ls&&(oh=gT(),oh!=null&&oh>parseFloat(rh))){ev=String(oh);break e}ev=rh}var rh,ih,oh,tv;q.document&&ls?(Qy=gT(),tv=Qy||parseInt(ev,10)||void 0):tv=void 0;var Qy,AB=tv;function vc(t,e){if(ft.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(mT){e:{try{yv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:SB[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&vc.$.h.call(this)}}Je(vc,ft);var SB={2:"touch",3:"pen",4:"mouse"};vc.prototype.h=function(){vc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cc="closure_listenable_"+(1e6*Math.random()|0),MB=0;function RB(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++MB,this.fa=this.ia=!1}function yh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function vv(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function NB(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function yT(t){let e={};for(let n in t)e[n]=t[n];return e}var nT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vT(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<nT.length;o++)n=nT[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vh(t){this.src=t,this.g={},this.h=0}vh.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=rv(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new RB(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function nv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=fT(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(yh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function rv(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var _v="closure_lm_"+(1e6*Math.random()|0),Yy={};function _T(t,e,n,r,i){if(r&&r.once)return bT(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_T(t,e[o],n,r,i);return null}return n=Ev(n),t&&t[Cc]?t.O(e,n,Dc(r)?!!r.capture:!!r,i):wT(t,e,n,!1,r,i)}function wT(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Dc(i)?!!i.capture:!!i,a=bv(t);if(a||(t[_v]=a=new vh(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=PB(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xB||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(IT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function PB(){function t(n){return e.call(t.src,t.listener,n)}let e=kB;return t}function bT(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bT(t,e[o],n,r,i);return null}return n=Ev(n),t&&t[Cc]?t.P(e,n,Dc(r)?!!r.capture:!!r,i):wT(t,e,n,!0,r,i)}function ET(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ET(t,e[o],n,r,i);else r=Dc(r)?!!r.capture:!!r,n=Ev(n),t&&t[Cc]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=rv(o,n,r,i),-1<n&&(yh(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=bv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=rv(e,n,r,i)),(n=-1<t?e[t]:null)&&wv(n))}function wv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Cc])nv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(IT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bv(e))?(nv(n,t),n.h==0&&(n.src=null,e[_v]=null)):yh(t)}}}function IT(t){return t in Yy?Yy[t]:Yy[t]="on"+t}function kB(t,e){if(t.fa)t=!0;else{e=new vc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&wv(t),t=n.call(r,e)}return t}function bv(t){return t=t[_v],t instanceof vh?t:null}var Zy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ev(t){return typeof t=="function"?t:(t[Zy]||(t[Zy]=function(e){return t.handleEvent(e)}),t[Zy])}function Xe(){kr.call(this),this.i=new vh(this),this.S=this,this.J=null}Je(Xe,kr);Xe.prototype[Cc]=!0;Xe.prototype.removeEventListener=function(t,e,n,r){ET(this,t,e,n,r)};function lt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ft(e,t);else if(e instanceof ft)e.target=e.target||t;else{var i=e;e=new ft(r,t),vT(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=sh(s,r,!0,e)&&i}if(s=e.g=t,i=sh(s,r,!0,e)&&i,i=sh(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=sh(s,r,!1,e)&&i}Xe.prototype.N=function(){if(Xe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)yh(n[r]);delete t.g[e],t.h--}}this.J=null};Xe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Xe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function sh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&nv(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Iv=q.JSON.stringify,iv=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function OB(){var t=xv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ov=class{constructor(){this.h=this.g=null}add(e,n){let r=xT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},xT=new iv(()=>new sv,t=>t.reset()),sv=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function FB(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function VB(t){q.setTimeout(()=>{throw t},0)}var _c,wc=!1,xv=new ov,DT=()=>{let t=q.Promise.resolve(void 0);_c=()=>{t.then(LB)}},LB=()=>{for(var t;t=OB();){try{t.h.call(t.g)}catch(n){VB(n)}var e=xT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}wc=!1};function _h(t,e){Xe.call(this),this.h=t||1,this.g=e||q,this.j=ht(this.qb,this),this.l=Date.now()}Je(_h,Xe);A=_h.prototype;A.ga=!1;A.T=null;A.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),lt(this,"tick"),this.ga&&(Dv(this),this.start()))}};A.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Dv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}A.N=function(){_h.$.N.call(this),Dv(this),delete this.g};function Cv(t,e,n){if(typeof t=="function")n&&(t=ht(t,n));else if(t&&typeof t.handleEvent=="function")t=ht(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:q.setTimeout(t,e||0)}function CT(t){t.g=Cv(()=>{t.g=null,t.i&&(t.i=!1,CT(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var av=class extends kr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CT(this)}N(){super.N(),this.g&&(q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function bc(t){kr.call(this),this.h=t,this.g={}}Je(bc,kr);var rT=[];function TT(t,e,n,r){Array.isArray(n)||(n&&(rT[0]=n.toString()),n=rT);for(var i=0;i<n.length;i++){var o=_T(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function AT(t){vv(t.g,function(e,n){this.g.hasOwnProperty(n)&&wv(e)},t),t.g={}}bc.prototype.N=function(){bc.$.N.call(this),AT(this)};bc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wh(){this.g=!0}wh.prototype.Ea=function(){this.g=!1};function jB(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+l+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function BB(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function as(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+$B(t,n)+(r?" "+r:"")})}function UB(t,e){t.info(function(){return"TIMEOUT: "+e})}wh.prototype.info=function(){};function $B(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return Iv(n)}catch{return e}}var Pi={},iT=null;function bh(){return iT=iT||new Xe}Pi.Ta="serverreachability";function ST(t){ft.call(this,Pi.Ta,t)}Je(ST,ft);function Ec(t){let e=bh();lt(e,new ST(e))}Pi.STAT_EVENT="statevent";function MT(t,e){ft.call(this,Pi.STAT_EVENT,t),this.stat=e}Je(MT,ft);function wt(t){let e=bh();lt(e,new MT(e,t))}Pi.Ua="timingevent";function RT(t,e){ft.call(this,Pi.Ua,t),this.size=e}Je(RT,ft);function Tc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){t()},e)}var Eh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},NT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Tv(){}Tv.prototype.h=null;function oT(t){return t.h||(t.h=t.i())}function PT(){}var Ac={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Av(){ft.call(this,"d")}Je(Av,ft);function Sv(){ft.call(this,"c")}Je(Sv,ft);var cv;function Ih(){}Je(Ih,Tv);Ih.prototype.g=function(){return new XMLHttpRequest};Ih.prototype.i=function(){return{}};cv=new Ih;function Sc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new bc(this),this.P=HB,t=Jy?125:void 0,this.V=new _h(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kT}function kT(){this.i=null,this.g="",this.h=!1}var HB=45e3,OT={},lv={};A=Sc.prototype;A.setTimeout=function(t){this.P=t};function uv(t,e,n){t.L=1,t.A=Dh(rr(e)),t.u=n,t.S=!0,FT(t,null)}function FT(t,e){t.G=Date.now(),Mc(t),t.B=rr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),zT(n.i,"t",r),t.o=0,n=t.l.J,t.h=new kT,t.g=dA(t.l,n?e:null,!t.u),0<t.O&&(t.M=new av(ht(t.Pa,t,t.g),t.O)),TT(t.U,t.g,"readystatechange",t.nb),e=t.I?yT(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ec(),jB(t.j,t.v,t.B,t.m,t.W,t.u)}A.nb=function(t){t=t.target;let e=this.M;e&&Nn(t)==3?e.l():this.Pa(t)};A.Pa=function(t){try{if(t==this.g)e:{let u=Nn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||Jy||this.g&&(this.h.h||this.g.ja()||lT(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Ec(3):Ec(2)),xh(this);var n=this.g.da();this.ca=n;t:if(VT(this)){var r=lT(this.g);t="";var i=r.length,o=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),gc(this);var s="";break t}this.h.i=new q.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,BB(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yc(a)){var l=a;break t}}l=null}if(n=l)as(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dv(this,n);else{this.i=!1,this.s=3,wt(12),Mi(this),gc(this);break e}}this.S?(LT(this,u,s),Jy&&this.i&&u==3&&(TT(this.U,this.V,"tick",this.mb),this.V.start())):(as(this.j,this.m,s,null),dv(this,s)),u==4&&Mi(this),this.i&&!this.J&&(u==4?aA(this.l,this):(this.i=!1,Mc(this)))}else uU(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Mi(this),gc(this)}}}catch{}finally{}};function VT(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function LT(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=zB(t,n),i==lv){e==4&&(t.s=4,wt(14),r=!1),as(t.j,t.m,null,"[Incomplete Response]");break}else if(i==OT){t.s=4,wt(15),as(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else as(t.j,t.m,i,null),dv(t,i);VT(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,wt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ov(e),e.M=!0,wt(11))):(as(t.j,t.m,n,"[Invalid Chunked Response]"),Mi(t),gc(t))}A.mb=function(){if(this.g){var t=Nn(this.g),e=this.g.ja();this.o<e.length&&(xh(this),LT(this,t,e),this.i&&t!=4&&Mc(this))}};function zB(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?lv:(n=Number(e.substring(n,r)),isNaN(n)?OT:(r+=1,r+n>e.length?lv:(e=e.slice(r,r+n),t.o=r+n,e)))}A.cancel=function(){this.J=!0,Mi(this)};function Mc(t){t.Y=Date.now()+t.P,jT(t,t.P)}function jT(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Tc(ht(t.lb,t),e)}function xh(t){t.C&&(q.clearTimeout(t.C),t.C=null)}A.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(UB(this.j,this.B),this.L!=2&&(Ec(),wt(17)),Mi(this),this.s=2,gc(this)):jT(this,this.Y-t)};function gc(t){t.l.H==0||t.J||aA(t.l,t)}function Mi(t){xh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Dv(t.V),AT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function dv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||hv(n.i,t))){if(!t.K&&hv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)dh(n),Ah(n);else break e;kv(n),wt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Tc(ht(n.ib,n),6e3));if(1>=WT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ri(n,11)}else if((t.K||n.g==t)&&dh(n),!yc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var o=r.i;o.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Mv(o,o.h),o.h=null))}if(r.F){let y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,Ee(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=uA(r,r.J?r.pa:null,r.Y),s.K){KT(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(xh(a),Mc(a)),r.g=s}else oA(r);0<n.j.length&&Sh(n)}else l[0]!="stop"&&l[0]!="close"||Ri(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Ri(n,7):Pv(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Ec(4)}catch{}}function qB(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(mh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function GB(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(mh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function BT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(mh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=GB(t),r=qB(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var UT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WB(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ni(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ni){this.h=t.h,lh(this,t.j),this.s=t.s,this.g=t.g,uh(this,t.m),this.l=t.l;var e=t.i,n=new Ic;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),sT(this,n),this.o=t.o}else t&&(e=String(t).match(UT))?(this.h=!1,lh(this,e[1]||"",!0),this.s=pc(e[2]||""),this.g=pc(e[3]||"",!0),uh(this,e[4]),this.l=pc(e[5]||"",!0),sT(this,e[6]||"",!0),this.o=pc(e[7]||"")):(this.h=!1,this.i=new Ic(null,this.h))}Ni.prototype.toString=function(){var t=[],e=this.j;e&&t.push(mc(e,aT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(mc(e,aT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(mc(n,n.charAt(0)=="/"?YB:QB,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",mc(n,XB)),t.join("")};function rr(t){return new Ni(t)}function lh(t,e,n){t.j=n?pc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function uh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function sT(t,e,n){e instanceof Ic?(t.i=e,JB(t.i,t.h)):(n||(e=mc(e,ZB)),t.i=new Ic(e,t.h))}function Ee(t,e,n){t.i.set(e,n)}function Dh(t){return Ee(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function pc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function mc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,KB),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function KB(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var aT=/[#\/\?@]/g,QB=/[#\?:]/g,YB=/[#\?]/g,ZB=/[#\?@]/g,XB=/#/g;function Ic(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Or(t){t.g||(t.g=new Map,t.h=0,t.i&&WB(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}A=Ic.prototype;A.add=function(t,e){Or(this),this.i=null,t=us(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function $T(t,e){Or(t),e=us(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function HT(t,e){return Or(t),e=us(t,e),t.g.has(e)}A.forEach=function(t,e){Or(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};A.ta=function(){Or(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};A.Z=function(t){Or(this);let e=[];if(typeof t=="string")HT(this,t)&&(e=e.concat(this.g.get(us(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};A.set=function(t,e){return Or(this),this.i=null,t=us(this,t),HT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};A.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function zT(t,e,n){$T(t,e),0<n.length&&(t.i=null,t.g.set(us(t,e),gv(n)),t.h+=n.length)}A.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function us(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function JB(t,e){e&&!t.j&&(Or(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&($T(this,r),zT(this,i,n))},t)),t.j=e}var eU=class{constructor(t,e){this.g=t,this.map=e}};function qT(t){this.l=t||tU,q.PerformanceNavigationTiming?(t=q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(q.g&&q.g.Ka&&q.g.Ka()&&q.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tU=10;function GT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function WT(t){return t.h?1:t.g?t.g.size:0}function hv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Mv(t,e){t.g?t.g.add(e):t.h=e}function KT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}qT.prototype.cancel=function(){if(this.i=QT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function QT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return gv(t.i)}var nU=class{stringify(t){return q.JSON.stringify(t,void 0)}parse(t){return q.JSON.parse(t,void 0)}};function rU(){this.g=new nU}function iU(t,e,n){let r=n||"";try{BT(t,function(i,o){let s=i;Dc(i)&&(s=Iv(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function oU(t,e){let n=new wh;if(q.Image){let r=new Image;r.onload=nh(ah,n,r,"TestLoadImage: loaded",!0,e),r.onerror=nh(ah,n,r,"TestLoadImage: error",!1,e),r.onabort=nh(ah,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=nh(ah,n,r,"TestLoadImage: timeout",!1,e),q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ah(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Rc(t){this.l=t.ec||null,this.j=t.ob||!1}Je(Rc,Tv);Rc.prototype.g=function(){return new Ch(this.l,this.j)};Rc.prototype.i=function(t){return function(){return t}}({});function Ch(t,e){Xe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Rv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Je(Ch,Xe);var Rv=0;A=Ch.prototype;A.open=function(t,e){if(this.readyState!=Rv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,xc(this)};A.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||q).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};A.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nc(this)),this.readyState=Rv};A.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,xc(this)),this.g&&(this.readyState=3,xc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;YT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function YT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}A.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Nc(this):xc(this),this.readyState==3&&YT(this)}};A.Za=function(t){this.g&&(this.response=this.responseText=t,Nc(this))};A.Ya=function(t){this.g&&(this.response=t,Nc(this))};A.ka=function(){this.g&&Nc(this)};function Nc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,xc(t)}A.setRequestHeader=function(t,e){this.v.append(t,e)};A.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};A.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function xc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ch.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var sU=q.JSON.parse;function Re(t){Xe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ZT,this.L=this.M=!1}Je(Re,Xe);var ZT="",aU=/^https?$/i,cU=["POST","PUT"];A=Re.prototype;A.Oa=function(t){this.M=t};A.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cv.g(),this.C=this.u?oT(this.u):oT(cv),this.g.onreadystatechange=ht(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){cT(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=q.FormData&&t instanceof q.FormData,!(0<=fT(cU,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{eA(this),0<this.B&&((this.L=lU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ht(this.ua,this)):this.A=Cv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){cT(this,o)}};function lU(t){return ls&&typeof t.timeout=="number"&&t.ontimeout!==void 0}A.ua=function(){typeof mv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lt(this,"timeout"),this.abort(8))};function cT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,XT(t),Th(t)}function XT(t){t.F||(t.F=!0,lt(t,"complete"),lt(t,"error"))}A.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,lt(this,"complete"),lt(this,"abort"),Th(this))};A.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Th(this,!0)),Re.$.N.call(this)};A.La=function(){this.s||(this.G||this.v||this.l?JT(this):this.kb())};A.kb=function(){JT(this)};function JT(t){if(t.h&&typeof mv<"u"&&(!t.C[1]||Nn(t)!=4||t.da()!=2)){if(t.v&&Nn(t)==4)Cv(t.La,0,t);else if(lt(t,"readystatechange"),Nn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(UT)[1]||null;!i&&q.self&&q.self.location&&(i=q.self.location.protocol.slice(0,-1)),r=!aU.test(i?i.toLowerCase():"")}n=r}if(n)lt(t,"complete"),lt(t,"success");else{t.m=6;try{var o=2<Nn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",XT(t)}}finally{Th(t)}}}}function Th(t,e){if(t.g){eA(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||lt(t,"ready");try{n.onreadystatechange=r}catch{}}}function eA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(q.clearTimeout(t.A),t.A=null)}A.isActive=function(){return!!this.g};function Nn(t){return t.g?t.g.readyState:0}A.da=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}};A.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};A.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),sU(e)}};function lT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case ZT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function uU(t){let e={};t=(t.g&&2<=Nn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(yc(t[r]))continue;var n=FB(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}NB(e,function(r){return r.join(", ")})}A.Ia=function(){return this.m};A.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function tA(t){let e="";return vv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Nv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=tA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ee(t,e,n))}function hc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nA(t){this.Ga=0,this.j=[],this.l=new wh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hc("baseRetryDelayMs",5e3,t),this.hb=hc("retryDelaySeedMs",1e4,t),this.eb=hc("forwardChannelMaxRetries",2,t),this.xa=hc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new qT(t&&t.concurrentRequestLimit),this.Ja=new rU,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}A=nA.prototype;A.ra=8;A.H=1;function Pv(t){if(rA(t),t.H==3){var e=t.W++,n=rr(t.I);if(Ee(n,"SID",t.K),Ee(n,"RID",e),Ee(n,"TYPE","terminate"),Pc(t,n),e=new Sc(t,t.l,e),e.L=2,e.A=Dh(rr(n)),n=!1,q.navigator&&q.navigator.sendBeacon)try{n=q.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&q.Image&&(new Image().src=e.A,n=!0),n||(e.g=dA(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Mc(e)}lA(t)}function Ah(t){t.g&&(Ov(t),t.g.cancel(),t.g=null)}function rA(t){Ah(t),t.u&&(q.clearTimeout(t.u),t.u=null),dh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&q.clearTimeout(t.m),t.m=null)}function Sh(t){if(!GT(t.i)&&!t.m){t.m=!0;var e=t.Na;_c||DT(),wc||(_c(),wc=!0),xv.add(e,t),t.C=0}}function dU(t,e){return WT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Tc(ht(t.Na,t,e),cA(t,t.C)),t.C++,!0)}A.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Sc(this,this.l,t),o=this.s;if(this.U&&(o?(o=yT(o),vT(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=iA(this,i,e),n=rr(this.I),Ee(n,"RID",t),Ee(n,"CVER",22),this.F&&Ee(n,"X-HTTP-Session-Id",this.F),Pc(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(tA(o)))+"&"+e:this.o&&Nv(n,this.o,o)),Mv(this.i,i),this.bb&&Ee(n,"TYPE","init"),this.P?(Ee(n,"$req",e),Ee(n,"SID","null"),i.aa=!0,uv(i,n,null)):uv(i,n,e),this.H=2}}else this.H==3&&(t?uT(this,t):this.j.length==0||GT(this.i)||uT(this))};function uT(t,e){var n;e?n=e.m:n=t.W++;let r=rr(t.I);Ee(r,"SID",t.K),Ee(r,"RID",n),Ee(r,"AID",t.V),Pc(t,r),t.o&&t.s&&Nv(r,t.o,t.s),n=new Sc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=iA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Mv(t.i,n),uv(n,r,e)}function Pc(t,e){t.na&&vv(t.na,function(n,r){Ee(e,r,n)}),t.h&&BT({},function(n,r){Ee(e,r,n)})}function iA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ht(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=o,0>l)o=Math.max(0,i[c].g-100),a=!1;else try{iU(u,s,"req"+l+"_")}catch{r&&r(u)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function oA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;_c||DT(),wc||(_c(),wc=!0),xv.add(e,t),t.A=0}}function kv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Tc(ht(t.Ma,t),cA(t,t.A)),t.A++,!0)}A.Ma=function(){if(this.u=null,sA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Tc(ht(this.jb,this),t)}};A.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,wt(10),Ah(this),sA(this))};function Ov(t){t.B!=null&&(q.clearTimeout(t.B),t.B=null)}function sA(t){t.g=new Sc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=rr(t.wa);Ee(e,"RID","rpc"),Ee(e,"SID",t.K),Ee(e,"AID",t.V),Ee(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ee(e,"TO",t.qa),Ee(e,"TYPE","xmlhttp"),Pc(t,e),t.o&&t.s&&Nv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Dh(rr(e)),n.u=null,n.S=!0,FT(n,t)}A.ib=function(){this.v!=null&&(this.v=null,Ah(this),kv(this),wt(19))};function dh(t){t.v!=null&&(q.clearTimeout(t.v),t.v=null)}function aA(t,e){var n=null;if(t.g==e){dh(t),Ov(t),t.g=null;var r=2}else if(hv(t.i,e))n=e.F,KT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=bh(),lt(r,new RT(r,n)),Sh(t)}else oA(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&dU(t,e)||r==2&&kv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ri(t,5);break;case 4:Ri(t,10);break;case 3:Ri(t,6);break;default:Ri(t,2)}}}function cA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ri(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ht(t.pb,t);n||(n=new Ni("//www.google.com/images/cleardot.gif"),q.location&&q.location.protocol=="http"||lh(n,"https"),Dh(n)),oU(n.toString(),r)}else wt(2);t.H=0,t.h&&t.h.za(e),lA(t),rA(t)}A.pb=function(t){t?(this.l.info("Successfully pinged google.com"),wt(2)):(this.l.info("Failed to ping google.com"),wt(1))};function lA(t){if(t.H=0,t.ma=[],t.h){let e=QT(t.i);(e.length!=0||t.j.length!=0)&&(tT(t.ma,e),tT(t.ma,t.j),t.i.i.length=0,gv(t.j),t.j.length=0),t.h.ya()}}function uA(t,e,n){var r=n instanceof Ni?rr(n):new Ni(n);if(r.g!="")e&&(r.g=e+"."+r.g),uh(r,r.m);else{var i=q.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Ni(null);r&&lh(o,r),e&&(o.g=e),i&&uh(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&Ee(r,n,e),Ee(r,"VER",t.ra),Pc(t,r),r}function dA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Re(new Rc({ob:n})):new Re(t.va),e.Oa(t.J),e}A.isActive=function(){return!!this.h&&this.h.isActive(this)};function hA(){}A=hA.prototype;A.Ba=function(){};A.Aa=function(){};A.za=function(){};A.ya=function(){};A.isActive=function(){return!0};A.Va=function(){};function hh(){if(ls&&!(10<=Number(AB)))throw Error("Environmental error: no available transport.")}hh.prototype.g=function(t,e){return new Ut(t,e)};function Ut(t,e){Xe.call(this),this.g=new nA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!yc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ds(this)}Je(Ut,Xe);Ut.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;wt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=uA(t,null,t.Y),Sh(t)};Ut.prototype.close=function(){Pv(this.g)};Ut.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Iv(t),t=n);e.j.push(new eU(e.fb++,t)),e.H==3&&Sh(e)};Ut.prototype.N=function(){this.g.h=null,delete this.j,Pv(this.g),delete this.g,Ut.$.N.call(this)};function fA(t){Av.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Je(fA,Av);function pA(){Sv.call(this),this.status=1}Je(pA,Sv);function ds(t){this.g=t}Je(ds,hA);ds.prototype.Ba=function(){lt(this.g,"a")};ds.prototype.Aa=function(t){lt(this.g,new fA(t))};ds.prototype.za=function(t){lt(this.g,new pA)};ds.prototype.ya=function(){lt(this.g,"b")};function hU(){this.blockSize=-1}function hn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Je(hn,hU);hn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Xy(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}hn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Xy(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Xy(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Xy(this,r),i=0;break}}this.h=i,this.i+=e};hn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function he(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var fU={};function Fv(t){return-128<=t&&128>t?DB(t,function(e){return new he([e|0],0>e?-1:0)}):new he([t|0],0>t?-1:0)}function Pn(t){if(isNaN(t)||!isFinite(t))return cs;if(0>t)return ct(Pn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=fv;return new he(e,0)}function mA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ct(mA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Pn(Math.pow(e,8)),r=cs,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Pn(Math.pow(e,o)),r=r.R(o).add(Pn(s))):(r=r.R(n),r=r.add(Pn(s)))}return r}var fv=4294967296,cs=Fv(0),pv=Fv(1),dT=Fv(16777216);A=he.prototype;A.ea=function(){if(Yt(this))return-ct(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:fv+r)*e,e*=fv}return t};A.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(nr(this))return"0";if(Yt(this))return"-"+ct(this).toString(t);for(var e=Pn(Math.pow(t,6)),n=this,r="";;){var i=ph(n,e).g;n=fh(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,nr(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};A.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function nr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Yt(t){return t.h==-1}A.X=function(t){return t=fh(this,t),Yt(t)?-1:nr(t)?0:1};function ct(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new he(n,~t.h).add(pv)}A.abs=function(){return Yt(this)?ct(this):this};A.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new he(n,n[n.length-1]&-2147483648?-1:0)};function fh(t,e){return t.add(ct(e))}A.R=function(t){if(nr(this)||nr(t))return cs;if(Yt(this))return Yt(t)?ct(this).R(ct(t)):ct(ct(this).R(t));if(Yt(t))return ct(this.R(ct(t)));if(0>this.X(dT)&&0>t.X(dT))return Pn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,ch(n,2*r+2*i),n[2*r+2*i+1]+=o*c,ch(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,ch(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,ch(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new he(n,0)};function ch(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function fc(t,e){this.g=t,this.h=e}function ph(t,e){if(nr(e))throw Error("division by zero");if(nr(t))return new fc(cs,cs);if(Yt(t))return e=ph(ct(t),e),new fc(ct(e.g),ct(e.h));if(Yt(e))return e=ph(t,ct(e)),new fc(ct(e.g),e.h);if(30<t.g.length){if(Yt(t)||Yt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=pv,r=e;0>=r.X(t);)n=hT(n),r=hT(r);var i=ss(n,1),o=ss(r,1);for(r=ss(r,2),n=ss(n,2);!nr(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=ss(r,1),n=ss(n,1)}return e=fh(t,i.R(e)),new fc(i,e)}for(i=cs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Pn(n),s=o.R(e);Yt(s)||0<s.X(t);)n-=r,o=Pn(n),s=o.R(e);nr(o)&&(o=pv),i=i.add(o),t=fh(t,s)}return new fc(i,t)}A.gb=function(t){return ph(this,t).h};A.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new he(n,this.h&t.h)};A.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new he(n,this.h|t.h)};A.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new he(n,this.h^t.h)};function hT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new he(n,t.h)}function ss(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new he(i,t.h)}hh.prototype.createWebChannel=hh.prototype.g;Ut.prototype.send=Ut.prototype.u;Ut.prototype.open=Ut.prototype.m;Ut.prototype.close=Ut.prototype.close;Eh.NO_ERROR=0;Eh.TIMEOUT=8;Eh.HTTP_ERROR=6;NT.COMPLETE="complete";PT.EventType=Ac;Ac.OPEN="a";Ac.CLOSE="b";Ac.ERROR="c";Ac.MESSAGE="d";Xe.prototype.listen=Xe.prototype.O;Re.prototype.listenOnce=Re.prototype.P;Re.prototype.getLastError=Re.prototype.Sa;Re.prototype.getLastErrorCode=Re.prototype.Ia;Re.prototype.getStatus=Re.prototype.da;Re.prototype.getResponseJson=Re.prototype.Wa;Re.prototype.getResponseText=Re.prototype.ja;Re.prototype.send=Re.prototype.ha;Re.prototype.setWithCredentials=Re.prototype.Oa;hn.prototype.digest=hn.prototype.l;hn.prototype.reset=hn.prototype.reset;hn.prototype.update=hn.prototype.j;he.prototype.add=he.prototype.add;he.prototype.multiply=he.prototype.R;he.prototype.modulo=he.prototype.gb;he.prototype.compare=he.prototype.X;he.prototype.toNumber=he.prototype.ea;he.prototype.toString=he.prototype.toString;he.prototype.getBits=he.prototype.D;he.fromNumber=Pn;he.fromString=mA;var gA=fn.createWebChannelTransport=function(){return new hh},yA=fn.getStatEventTarget=function(){return bh()},Mh=fn.ErrorCode=Eh,vA=fn.EventType=NT,_A=fn.Event=Pi,Vv=fn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},z7=fn.FetchXmlHttpFactory=Rc,kc=fn.WebChannel=PT,wA=fn.XhrIo=Re,bA=fn.Md5=hn,ki=fn.Integer=he;var EA="@firebase/firestore";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var Us="10.7.0";var $r=new Rl("@firebase/firestore");function gs(){return $r.logLevel}function bS(t){$r.setLogLevel(t)}function E(t,...e){if($r.logLevel<=vn.DEBUG){let n=e.map(Lw);$r.debug(`Firestore (${Us}): ${t}`,...n)}}function Fe(t,...e){if($r.logLevel<=vn.ERROR){let n=e.map(Lw);$r.error(`Firestore (${Us}): ${t}`,...n)}}function Xt(t,...e){if($r.logLevel<=vn.WARN){let n=e.map(Lw);$r.warn(`Firestore (${Us}): ${t}`,...n)}}function Lw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function N(t="Unexpected state"){let e=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: `+t;throw Fe(e),new Error(e)}function k(t,e){t||N()}function ES(t,e){t||N()}function S(t,e){return t}var m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends Kb{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var We=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Uh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$v=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ge.UNAUTHENTICATED))}shutdown(){}},Hv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},zv=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new We;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new We,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new We)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k(typeof r.accessToken=="string"),new Uh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return k(e===null||typeof e=="string"),new Ge(e)}},qv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Gv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Kv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,E("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(k(typeof n.token=="string"),this.R=n.token,new Wv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function pU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var $h=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=pU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function K(t,e){return t<e?-1:t>e?1:0}function Ds(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function IS(t){return t+"\0"}var Te=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var V=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Te(0,0))}static max(){return new t(new Te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Hh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&N(),r===void 0?r=e.length-n:r>e.length-n&&N(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ce=class t extends Hh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(m.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},mU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ve=class t extends Hh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return mU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new w(m.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(m.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new w(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new w(m.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var C=class t{constructor(e){this.path=e}static fromPath(e){return new t(ce.fromString(e))}static fromName(e){return new t(ce.fromString(e).popFirst(5))}static empty(){return new t(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ce(e.slice()))}};var Cs=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Qv(t){return t.fields.find(e=>e.kind===2)}function Fi(t){return t.fields.filter(e=>e.kind!==2)}Cs.UNKNOWN_ID=-1;var Es=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Gc=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Jt.min())}};function xS(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new Jt(i,C.empty(),e)}function DS(t){return new Jt(t.readTime,t.key,-1)}var Jt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(V.min(),C.empty(),-1)}static max(){return new t(V.max(),C.empty(),-1)}};function jw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=C.comparator(t.documentKey,e.documentKey),n!==0?n:K(t.largestBatchId,e.largestBatchId))}var CS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jr(t){return v(this,null,function*(){if(t.code!==m.FAILED_PRECONDITION||t.message!==CS)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&N(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var qh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new We,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new $i(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Bw(r.target.error);this.V.reject(new $i(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new $i(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Zv(n)}},Hr=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Sl())===12.2&&Fe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),Vi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ml())return!1;if(t.C())return!0;let e=Sl(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return v(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new $i(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new w(m.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new w(m.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new $i(e,s))},i.onupgradeneeded=o=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return v(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=qh.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),p.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(E("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Yv=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Vi(this.k.delete())}},$i=class extends w{constructor(e,n){super(m.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ei(t){return t.name==="IndexedDbTransactionError"}var Zv=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vi(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),Vi(this.store.add(e))}get(e){return Vi(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),Vi(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),Vi(this.store.count())}W(e,n){let r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){let i=this.cursor(r),o=[];return this.G(i,(s,a)=>{o.push(a)}).next(()=>o)}{let i=this.store.getAll(r.range);return new p((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=Bw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Yv(a),l=n(a.primaryKey,a.value,c);if(l instanceof p){let u=l.catch(d=>(c.done(),p.reject(d)));r.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Vi(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Bw(r.target.error);n(i)}})}var IA=!1;function Bw(t){let e=Hr.S(Sl());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IA||(IA=!0,setTimeout(()=>{throw r},0)),r}}return t}var Xv=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){E("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>v(this,null,function*(){this.task=null;try{E("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(n){ei(n)?E("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):yield Jr(n)}yield this.ee(6e4)}))}},Jv=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return v(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return E("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(E("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=DS(o);jw(s,r)>0&&(r=s)}),new Jt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var $t=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function gl(t){return t==null}function Wc(t){return t===0&&1/t==-1/0}function TS(t){return typeof t=="number"&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function bt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xA(e)),e=gU(t.get(n),e);return xA(e)}function gU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function xA(t){return t+""}function kn(t){let e=t.length;if(k(e>=2),e===2)return k(t.charAt(0)===""&&t.charAt(1)===""),ce.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&N(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:N()}o=s+2}return new ce(r)}var DA=["userId","batchId"];function Oh(t,e){return[t,bt(e)]}function AS(t,e,n){return[t,bt(e),n]}var yU={},vU=["prefixPath","collectionGroup","readTime","documentId"],_U=["prefixPath","collectionGroup","documentId"],wU=["collectionGroup","readTime","prefixPath","documentId"],bU=["canonicalId","targetId"],EU=["targetId","path"],IU=["path","targetId"],xU=["collectionId","parent"],DU=["indexId","uid"],CU=["uid","sequenceNumber"],TU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AU=["indexId","uid","orderedDocumentKey"],SU=["userId","collectionPath","documentId"],MU=["userId","collectionPath","largestBatchId"],RU=["userId","collectionGroup","largestBatchId"],SS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NU=[...SS,"documentOverlays"],MS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RS=MS,PU=[...RS,"indexConfiguration","indexState","indexEntries"];var Kc=class extends zh{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function tt(t,e){let n=S(t);return Hr.M(n.ae,e)}function CA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ie=class t{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bs(this.root,e,this.comparator,!1)}getReverseIterator(){return new bs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bs(this.root,e,this.comparator,!0)}},bs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Fn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw N();let e=this.left.check();if(e!==this.right.check())throw N();return e+(this.isRed()?0:1)}};Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw N()}get value(){throw N()}get color(){throw N()}get left(){throw N()}get right(){throw N()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ye=class t{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gh(this.data.getIterator())}getIteratorFrom(e){return new Gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Gh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function hs(t){return t.hasNext()?t.getNext():void 0}var Ht=class t{constructor(e){this.fields=e,e.sort(Ve.comparator)}static empty(){return new t([])}unionWith(e){let n=new ye(Ve.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ds(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Wh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function PS(){return typeof atob<"u"}var et=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};et.EMPTY_BYTE_STRING=new et("");var kU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(k(!!t),typeof t=="string"){let e=0,n=kU.exec(t);if(k(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}function Lf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uw(t){let e=t.mapValue.fields.__previous_value__;return Lf(e)?Uw(e):e}function Qc(t){let e=zr(t.mapValue.fields.__local_write_time__.timestampValue);return new Te(e.seconds,e.nanos)}var e_=class{constructor(e,n,r,i,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Gr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fh={nullValue:"NULL_VALUE"};function Hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lf(t)?4:kS(t)?9007199254740991:10:N()}function jn(t,e){if(t===e)return!0;let n=Hi(t);if(n!==Hi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=zr(i.timestampValue),a=zr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return qr(i.bytesValue).isEqual(qr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Wc(s)===Wc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ds(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(CA(s)!==CA(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!jn(s[c],a[c])))return!1;return!0}(t,e);default:return N()}}function Yc(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function Wr(t,e){if(t===e)return 0;let n=Hi(t),r=Hi(e);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),c=Ne(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return TA(t.timestampValue,e.timestampValue);case 4:return TA(Qc(t),Qc(e));case 5:return K(t.stringValue,e.stringValue);case 6:return function(o,s){let a=qr(o),c=qr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=K(a[l],c[l]);if(u!==0)return u}return K(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=K(Ne(o.latitude),Ne(s.latitude));return a!==0?a:K(Ne(o.longitude),Ne(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Wr(a[l],c[l]);if(u)return u}return K(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Br.mapValue&&s===Br.mapValue)return 0;if(o===Br.mapValue)return 1;if(s===Br.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=K(c[d],u[d]);if(h!==0)return h;let f=Wr(a[c[d]],l[u[d]]);if(f!==0)return f}return K(c.length,u.length)}(t.mapValue,e.mapValue);default:throw N()}}function TA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return K(t,e);let n=zr(t),r=zr(e),i=K(n.seconds,r.seconds);return i!==0?i:K(n.nanos,r.nanos)}function Ts(t){return t_(t)}function t_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return C.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=t_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${t_(n.fields[s])}`;return i+"}"}(t.mapValue):N()}function zi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function n_(t){return!!t&&"integerValue"in t}function Zc(t){return!!t&&"arrayValue"in t}function AA(t){return!!t&&"nullValue"in t}function SA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vh(t){return!!t&&"mapValue"in t}function Uc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Uc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function OU(t){return"nullValue"in t?Fh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?zi(Gr.empty(),C.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:N()}function FU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?zi(Gr.empty(),C.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Br:N()}function MA(t,e){let n=Wr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function RA(t,e){let n=Wr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var mt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uc(n)}setAll(e){let n=Ve.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Uc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){eo(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Uc(this.value))}};function OS(t){let e=[];return eo(t.fields,(n,r)=>{let i=new Ve([n]);if(Vh(r)){let o=OS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ht(e)}var Ke=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,V.min(),V.min(),V.min(),mt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,V.min(),V.min(),mt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,V.min(),V.min(),mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Bn=class{constructor(e,n){this.position=e,this.inclusive=n}};function NA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=C.comparator(C.fromName(s.referenceValue),n.key):r=Wr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function PA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}var qi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function VU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Kh=class{},ie=class t extends Kh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new o_(e,n,r):n==="array-contains"?new c_(e,r):n==="in"?new Qh(e,r):n==="not-in"?new l_(e,r):n==="array-contains-any"?new u_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new s_(e,r):new a_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wr(n,this.value)):n!==null&&Hi(this.value)===Hi(n)&&this.matchesComparison(Wr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return N()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fe=class t extends Kh{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return As(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function As(t){return t.op==="and"}function r_(t){return t.op==="or"}function $w(t){return FS(t)&&As(t)}function FS(t){for(let e of t.filters)if(e instanceof fe)return!1;return!0}function i_(t){if(t instanceof ie)return t.field.canonicalString()+t.op.toString()+Ts(t.value);if($w(t))return t.filters.map(e=>i_(e)).join(",");{let e=t.filters.map(n=>i_(n)).join(",");return`${t.op}(${e})`}}function VS(t,e){return t instanceof ie?function(r,i){return i instanceof ie&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(t,e):t instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&VS(s,i.filters[a]),!0):!1}(t,e):void N()}function LS(t,e){let n=t.filters.concat(e);return fe.create(n,t.op)}function jS(t){return t instanceof ie?function(n){return`${n.field.canonicalString()} ${n.op} ${Ts(n.value)}`}(t):t instanceof fe?function(n){return n.op.toString()+" {"+n.getFilters().map(jS).join(" ,")+"}"}(t):"Filter"}var o_=class extends ie{constructor(e,n,r){super(e,n,r),this.key=C.fromName(r.referenceValue)}matches(e){let n=C.comparator(e.key,this.key);return this.matchesComparison(n)}},s_=class extends ie{constructor(e,n){super(e,"in",n),this.keys=BS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},a_=class extends ie{constructor(e,n){super(e,"not-in",n),this.keys=BS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function BS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>C.fromName(r.referenceValue))}var c_=class extends ie{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Zc(n)&&Yc(n.arrayValue,this.value)}},Qh=class extends ie{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}},l_=class extends ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Yc(this.value.arrayValue,n)}},u_=class extends ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Zc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}};var d_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function h_(t,e=null,n=[],r=[],i=null,o=null,s=null){return new d_(t,e,n,r,i,o,s)}function Gi(t){let e=S(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>i_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),gl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ts(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ts(r)).join(",")),e.ce=n}return e.ce}function yl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!PA(t.startAt,e.startAt)&&PA(t.endAt,e.endAt)}function Yh(t){return C.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zh(t,e){return t.filters.filter(n=>n instanceof ie&&n.field.isEqual(e))}function kA(t,e,n){let r=Fh,i=!0;for(let o of Zh(t,e)){let s=Fh,a=!0;switch(o.op){case"<":case"<=":s=OU(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Fh}MA({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];MA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function OA(t,e,n){let r=Br,i=!0;for(let o of Zh(t,e)){let s=Br,a=!0;switch(o.op){case">=":case">":s=FU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Br}RA({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];RA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var pn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function US(t,e,n,r,i,o,s,a){return new pn(t,e,n,r,i,o,s,a)}function $s(t){return new pn(t)}function FA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Hw(t){return t.collectionGroup!==null}function Is(t){let e=S(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ye(Ve.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new qi(o,r))}),n.has(Ve.keyField().canonicalString())||e.le.push(new qi(Ve.keyField(),r))}return e.le}function Et(t){let e=S(t);return e.he||(e.he=LU(e,Is(t))),e.he}function LU(t,e){if(t.limitType==="F")return h_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new qi(i.field,o)});let n=t.endAt?new Bn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bn(t.startAt.position,t.startAt.inclusive):null;return h_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function f_(t,e){let n=t.filters.concat([e]);return new pn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xh(t,e,n){return new pn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vl(t,e){return yl(Et(t),Et(e))&&t.limitType===e.limitType}function $S(t){return`${Gi(Et(t))}|lt:${t.limitType}`}function ys(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jS(i)).join(", ")}]`),gl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ts(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ts(i)).join(",")),`Target(${r})`}(Et(t))}; limitType=${t.limitType})`}function _l(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):C.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Is(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=NA(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Is(r),i)||r.endAt&&!function(s,a,c){let l=NA(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Is(r),i))}(t,e)}function HS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zS(t){return(e,n)=>{let r=!1;for(let i of Is(t)){let o=jU(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function jU(t,e,n){let r=t.field.isKeyField()?C.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Wr(c,l):N()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return N()}}var Un=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return NS(this.inner)}size(){return this.innerSize}};var BU=new Ie(C.comparator);function St(){return BU}var qS=new Ie(C.comparator);function jc(...t){let e=qS;for(let n of t)e=e.insert(n.key,n);return e}function GS(t){let e=qS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function On(){return $c()}function WS(){return $c()}function $c(){return new Un(t=>t.toString(),(t,e)=>t.isEqual(e))}var UU=new Ie(C.comparator),$U=new ye(C.comparator);function Z(...t){let e=$U;for(let n of t)e=e.add(n);return e}var HU=new ye(K);function zw(){return HU}function KS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function QS(t){return{integerValue:""+t}}function YS(t,e){return TS(e)?QS(e):KS(t,e)}var Ss=class{constructor(){this._=void 0}};function zU(t,e,n){return t instanceof Kr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Lf(o)&&(o=Uw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof sr?XS(t,e):t instanceof ar?JS(t,e):function(i,o){let s=ZS(i,o),a=VA(s)+VA(i.Ie);return n_(s)&&n_(i.Ie)?QS(a):KS(i.serializer,a)}(t,e)}function qU(t,e,n){return t instanceof sr?XS(t,e):t instanceof ar?JS(t,e):n}function ZS(t,e){return t instanceof Qr?function(r){return n_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Kr=class extends Ss{},sr=class extends Ss{constructor(e){super(),this.elements=e}};function XS(t,e){let n=eM(e);for(let r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}var ar=class extends Ss{constructor(e){super(),this.elements=e}};function JS(t,e){let n=eM(e);for(let r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}var Qr=class extends Ss{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function VA(t){return Ne(t.integerValue||t.doubleValue)}function eM(t){return Zc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Wi=class{constructor(e,n){this.field=e,this.transform=n}};function GU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof sr&&i instanceof sr||r instanceof ar&&i instanceof ar?Ds(r.elements,i.elements,jn):r instanceof Qr&&i instanceof Qr?jn(r.Ie,i.Ie):r instanceof Kr&&i instanceof Kr}(t.transform,e.transform)}var p_=class{constructor(e,n){this.version=e,this.transformResults=n}},Pe=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ms=class{};function tM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zr(t.key,Pe.none()):new Yr(t.key,t.data,Pe.none());{let n=t.data,r=mt.empty(),i=new ye(Ve.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new mn(t.key,r,new Ht(i.toArray()),Pe.none())}}function WU(t,e,n){t instanceof Yr?function(i,o,s){let a=i.value.clone(),c=jA(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof mn?function(i,o,s){if(!Lh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=jA(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(nM(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Hc(t,e,n,r){return t instanceof Yr?function(o,s,a,c){if(!Lh(o.precondition,s))return a;let l=o.value.clone(),u=BA(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof mn?function(o,s,a,c){if(!Lh(o.precondition,s))return a;let l=BA(o.fieldTransforms,c,s),u=s.data;return u.setAll(nM(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return Lh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function KU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=ZS(r.transform,i||null);o!=null&&(n===null&&(n=mt.empty()),n.set(r.field,o))}return n||null}function LA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ds(r,i,(o,s)=>GU(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Yr=class extends Ms{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mn=class extends Ms{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function nM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function jA(t,e,n){let r=new Map;k(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,qU(s,a,n[i]))}return r}function BA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,zU(o,s,e))}return r}var Zr=class extends Ms{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Xc=class extends Ms{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Jc=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&WU(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Hc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=WS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=tM(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&Ds(this.mutations,e.mutations,(n,r)=>LA(n,r))&&Ds(this.baseMutations,e.baseMutations,(n,r)=>LA(n,r))}},m_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){k(e.mutations.length===r.length);let i=function(){return UU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var el=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var g_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ze,se;function rM(t){switch(t){default:return N();case m.CANCELLED:case m.UNKNOWN:case m.DEADLINE_EXCEEDED:case m.RESOURCE_EXHAUSTED:case m.INTERNAL:case m.UNAVAILABLE:case m.UNAUTHENTICATED:return!1;case m.INVALID_ARGUMENT:case m.NOT_FOUND:case m.ALREADY_EXISTS:case m.PERMISSION_DENIED:case m.FAILED_PRECONDITION:case m.ABORTED:case m.OUT_OF_RANGE:case m.UNIMPLEMENTED:case m.DATA_LOSS:return!0}}function iM(t){if(t===void 0)return Fe("GRPC error has no .code"),m.UNKNOWN;switch(t){case ze.OK:return m.OK;case ze.CANCELLED:return m.CANCELLED;case ze.UNKNOWN:return m.UNKNOWN;case ze.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case ze.INTERNAL:return m.INTERNAL;case ze.UNAVAILABLE:return m.UNAVAILABLE;case ze.UNAUTHENTICATED:return m.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case ze.NOT_FOUND:return m.NOT_FOUND;case ze.ALREADY_EXISTS:return m.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return m.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case ze.ABORTED:return m.ABORTED;case ze.OUT_OF_RANGE:return m.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return m.UNIMPLEMENTED;case ze.DATA_LOSS:return m.DATA_LOSS;default:return N()}}(se=ze||(ze={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var UA=null;function oM(){return new TextEncoder}var QU=new ki([4294967295,4294967295],0);function $A(t){let e=oM().encode(t),n=new bA;return n.update(e),new Uint8Array(n.digest())}function HA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ki([n,r],0),new ki([i,o],0)]}var y_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ui(`Invalid padding: ${n}`);if(r<0)throw new Ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ui(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ui(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ki.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ki.fromNumber(r)));return i.compare(QU)===1&&(i=new ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=$A(e),[r,i]=HA(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=$A(e),[r,i]=HA(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ui=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var tl=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,nl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(V.min(),i,new Ie(K),St(),Z())}},nl=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Z(),Z(),Z())}};var xs=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Jh=class{constructor(e,n){this.targetId=e,this.fe=n}},ef=class{constructor(e,n,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},tf=class{constructor(){this.ge=0,this.pe=qA(),this.ye=et.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Z(),n=Z(),r=Z();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:N()}}),new nl(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=qA()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,k(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},v_=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=St(),this.Qe=zA(),this.Ke=new Ie(K)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:N()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Yh(o))if(r===0){let s=new C(o.path);this.We(n,s,Ke.newNoDocument(s,V.min()))}else k(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}UA?.tt(function(u,d,h,f,g){var y,_,I,P,D,j;let B={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},G=d.unchangedNames;return G&&(B.bloomFilter={applied:g===0,hashCount:(y=G?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(P=(I=(_=G?.bits)===null||_===void 0?void 0:_.bitmap)===null||I===void 0?void 0:I.length)!==null&&P!==void 0?P:0,padding:(j=(D=G?.bits)===null||D===void 0?void 0:D.padding)!==null&&j!==void 0?j:0,mightContain:pe=>{var xt;return(xt=f?.mightContain(pe))!==null&&xt!==void 0&&xt}}),B}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=qr(r).toUint8Array()}catch(c){if(c instanceof Wh)return Xt("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new y_(s,i,o)}catch(c){return Xt(c instanceof Ui?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Yh(a.target)){let c=new C(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,Ke.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Z();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new tl(e,n,this.Ke,this.qe,r);return this.qe=St(),this.Qe=zA(),this.Ke=new Ie(K),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new tf,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new ye(K),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new tf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function zA(){return new Ie(C.comparator)}function qA(){return new Ie(C.comparator)}var YU=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),ZU=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),XU=(()=>({and:"AND",or:"OR"}))(),__=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function w_(t,e){return t.useProto3Json||gl(e)?e:{value:e}}function Rs(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JU(t,e){return Rs(t,e.toTimestamp())}function Le(t){return k(!!t),V.fromTimestamp(function(n){let r=zr(n);return new Te(r.seconds,r.nanos)}(t))}function qw(t,e){return function(r){return new ce(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function aM(t){let e=ce.fromString(t);return k(gM(e)),e}function rl(t,e){return qw(t.databaseId,e.path)}function Vn(t,e){let n=aM(e);if(n.get(1)!==t.databaseId.projectId)throw new w(m.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(m.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new C(lM(n))}function b_(t,e){return qw(t.databaseId,e)}function cM(t){let e=aM(t);return e.length===4?ce.emptyPath():lM(e)}function il(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lM(t){return k(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function GA(t,e,n){return{name:rl(t,e),fields:n.value.mapValue.fields}}function uM(t,e,n){let r=Vn(t,e.name),i=Le(e.updateTime),o=e.createTime?Le(e.createTime):V.min(),s=new mt({mapValue:{fields:e.fields}}),a=Ke.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function e$(t,e){return"found"in e?function(r,i){k(!!i.found),i.found.name,i.found.updateTime;let o=Vn(r,i.found.name),s=Le(i.found.updateTime),a=i.found.createTime?Le(i.found.createTime):V.min(),c=new mt({mapValue:{fields:i.found.fields}});return Ke.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){k(!!i.missing),k(!!i.readTime);let o=Vn(r,i.missing),s=Le(i.readTime);return Ke.newNoDocument(o,s)}(t,e):N()}function t$(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:N()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,u){return l.useProto3Json?(k(u===void 0||typeof u=="string"),et.fromBase64String(u||"")):(k(u===void 0||u instanceof Uint8Array),et.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let u=l.code===void 0?m.UNKNOWN:iM(l.code);return new w(u,l.message||"")}(s);n=new ef(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vn(t,r.document.name),o=Le(r.document.updateTime),s=r.document.createTime?Le(r.document.createTime):V.min(),a=new mt({mapValue:{fields:r.document.fields}}),c=Ke.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new xs(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Vn(t,r.document),o=r.readTime?Le(r.readTime):V.min(),s=Ke.newNoDocument(i,o),a=r.removedTargetIds||[];n=new xs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Vn(t,r.document),o=r.removedTargetIds||[];n=new xs([],o,i,null)}else{if(!("filter"in e))return N();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new g_(i,o),a=r.targetId;n=new Jh(a,s)}}return n}function ol(t,e){let n;if(e instanceof Yr)n={update:GA(t,e.key,e.value)};else if(e instanceof Zr)n={delete:rl(t,e.key)};else if(e instanceof mn)n={update:GA(t,e.key,e.data),updateMask:a$(e.fieldMask)};else{if(!(e instanceof Xc))return N();n={verify:rl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ar)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw N()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:JU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:N()}(t,e.precondition)),n}function E_(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Pe.updateTime(Le(o.updateTime)):o.exists!==void 0?Pe.exists(o.exists):Pe.none()}(e.currentDocument):Pe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)k(a.setToServerValue==="REQUEST_TIME"),c=new Kr;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new sr(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new ar(u)}else"increment"in a?c=new Qr(s,a.increment):N();let l=Ve.fromServerFormat(a.fieldPath);return new Wi(l,c)}(t,i)):[];if(e.update){e.update.name;let i=Vn(t,e.update.name),o=new mt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Ht(l.map(u=>Ve.fromServerFormat(u)))}(e.updateMask);return new mn(i,o,s,n,r)}return new Yr(i,o,n,r)}if(e.delete){let i=Vn(t,e.delete);return new Zr(i,n)}if(e.verify){let i=Vn(t,e.verify);return new Xc(i,n)}return N()}function n$(t,e){return t&&t.length>0?(k(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Le(i.updateTime):Le(o);return s.isEqual(V.min())&&(s=Le(o)),new p_(s,i.transformResults||[])}(n,e))):[]}function dM(t,e){return{documents:[b_(t,e.path)]}}function hM(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=b_(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=b_(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(c){if(c.length!==0)return mM(fe.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);let o=function(c){if(c.length!==0)return c.map(l=>function(d){return{field:vs(d.field),direction:i$(d.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let s=w_(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function fM(t){let e=cM(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){k(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(d){let h=pM(d);return h instanceof fe&&$w(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(g){return new qi(_s(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,gl(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Bn(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Bn(f,h)}(n.endAt)),US(e,i,s,o,a,"F",c,l)}function r$(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return N()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=_s(n.unaryFilter.field);return ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=_s(n.unaryFilter.field);return ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=_s(n.unaryFilter.field);return ie.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=_s(n.unaryFilter.field);return ie.create(s,"!=",{nullValue:"NULL_VALUE"});default:return N()}}(t):t.fieldFilter!==void 0?function(n){return ie.create(_s(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return N()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fe.create(n.compositeFilter.filters.map(r=>pM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return N()}}(n.compositeFilter.op))}(t):N()}function i$(t){return YU[t]}function o$(t){return ZU[t]}function s$(t){return XU[t]}function vs(t){return{fieldPath:t.canonicalString()}}function _s(t){return Ve.fromServerFormat(t.fieldPath)}function mM(t){return t instanceof ie?function(n){if(n.op==="=="){if(SA(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(AA(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(SA(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(AA(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:o$(n.op),value:n.value}}}(t):t instanceof fe?function(n){let r=n.getFilters().map(i=>mM(i));return r.length===1?r[0]:{compositeFilter:{op:s$(n.op),filters:r}}}(t):N()}function a$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ns=class t{constructor(e,n,r,i,o=V.min(),s=V.min(),a=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nf=class{constructor(e){this.ut=e}};function c$(t,e){let n;if(e.document)n=uM(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=C.fromSegments(e.noDocument.path),i=Qi(e.noDocument.readTime);n=Ke.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return N();{let r=C.fromSegments(e.unknownDocument.path),i=Qi(e.unknownDocument.version);n=Ke.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Te(i[0],i[1]);return V.fromTimestamp(o)}(e.readTime)),n}function WA(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:rf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:rl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Rs(o,s.version.toTimestamp()),createTime:Rs(o,s.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ki(e.version)};else{if(!e.isUnknownDocument())return N();r.unknownDocument={path:n.path.toArray(),version:Ki(e.version)}}return r}function rf(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ki(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qi(t){let e=new Te(t.seconds,t.nanoseconds);return V.fromTimestamp(e)}function Li(t,e){let n=(e.baseMutations||[]).map(o=>E_(t.ut,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>E_(t.ut,o)),i=Te.fromMillis(e.localWriteTimeMs);return new Jc(e.batchId,i,n,r)}function Bc(t){let e=Qi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Qi(t.lastLimboFreeSnapshotVersion):V.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return k(o.documents.length===1),Et($s(cM(o.documents[0])))}(t.query):function(o){return Et(fM(o))}(t.query),new Ns(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,et.fromBase64String(t.resumeToken))}function yM(t,e){let n=Ki(e.snapshotVersion),r=Ki(e.lastLimboFreeSnapshotVersion),i;i=Yh(e.target)?dM(t.ut,e.target):hM(t.ut,e.target);let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gi(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Gw(t){let e=fM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xh(e,e.limit,"L"):e}function Lv(t,e){return new el(e.largestBatchId,E_(t.ut,e.overlayMutation))}function KA(t,e){let n=e.path.lastSegment();return[t,bt(e.path.popLast()),n]}function QA(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ki(r.readTime),documentKey:bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var I_=class{getBundleMetadata(e,n){return YA(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Qi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return YA(e).put(function(i){return{bundleId:i.id,createTime:Ki(Le(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return ZA(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Gw(o.bundledQuery),readTime:Qi(o.readTime)}}(r)})}saveNamedQuery(e,n){return ZA(e).put(function(i){return{name:i.name,readTime:Ki(Le(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function YA(t){return tt(t,"bundles")}function ZA(t){return tt(t,"namedQueries")}var of=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Oc(e).get(KA(this.userId,n)).next(r=>r?Lv(this.serializer,r):null)}getOverlays(e,n){let r=On();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new el(n,s);i.push(this.lt(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(bt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Oc(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=On(),o=bt(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Oc(e).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Lv(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=On(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Oc(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=Lv(this.serializer,l);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):u.done()}).next(()=>o)}lt(e,n){return Oc(e).put(function(i,o,s){let[a,c,l]=KA(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ol(i.ut,s.mutation)}}(this.serializer,this.userId,n))}};function Oc(t){return tt(t,"documentOverlays")}var ir=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Wc(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(qr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?kS(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):N()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),C.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};ir.St=new ir;function l$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function XA(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=l$(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var x_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Bt(e),r=XA(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Bt(e),r=XA(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},D_=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},C_=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},ji=class{constructor(){this.Wt=new x_,this.Gt=new D_(this.Wt),this.zt=new C_(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var Bi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Fr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=JA(t.arrayValue,e.arrayValue),n!==0?n:(n=JA(t.directionalValue,e.directionalValue),n!==0?n:C.comparator(t.documentKey,e.documentKey)))}function JA(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var sf=class{constructor(e){this.Jt=new ye((n,r)=>Ve.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(k(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=Qv(e);if(n!==void 0&&!this.tn(n))return!1;let r=Fi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.nn(a,c)||!this.rn(this.Yt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Yt.length||!this.rn(this.Yt[s++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new ye(Ve.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Es(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Es(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Es(r.field,r.dir==="asc"?0:1)));return new Cs(Cs.UNKNOWN_ID,this.collectionId,n,Gc.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function vM(t){var e,n;if(k(t instanceof ie||t instanceof fe),t instanceof ie){if(t instanceof Qh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>ie.create(t.field,"==",o)))||[];return fe.create(i,"or")}return t}let r=t.filters.map(i=>vM(i));return fe.create(r,t.op)}function u$(t){if(t.getFilters().length===0)return[];let e=S_(vM(t));return k(_M(e)),T_(e)||A_(e)?[e]:e.getFilters()}function T_(t){return t instanceof ie}function A_(t){return t instanceof fe&&$w(t)}function _M(t){return T_(t)||A_(t)||function(n){if(n instanceof fe&&r_(n)){for(let r of n.getFilters())if(!T_(r)&&!A_(r))return!1;return!0}return!1}(t)}function S_(t){if(k(t instanceof ie||t instanceof fe),t instanceof ie)return t;if(t.filters.length===1)return S_(t.filters[0]);let e=t.filters.map(r=>S_(r)),n=fe.create(e,t.op);return n=af(n),_M(n)?n:(k(n instanceof fe),k(As(n)),k(n.filters.length>1),n.filters.reduce((r,i)=>Ww(r,i)))}function Ww(t,e){let n;return k(t instanceof ie||t instanceof fe),k(e instanceof ie||e instanceof fe),n=t instanceof ie?e instanceof ie?function(i,o){return fe.create([i,o],"and")}(t,e):eS(t,e):e instanceof ie?eS(e,t):function(i,o){if(k(i.filters.length>0&&o.filters.length>0),As(i)&&As(o))return LS(i,o.getFilters());let s=r_(i)?i:o,a=r_(i)?o:i,c=s.filters.map(l=>Ww(l,a));return fe.create(c,"or")}(t,e),af(n)}function eS(t,e){if(As(e))return LS(e,t.getFilters());{let n=e.filters.map(r=>Ww(t,r));return fe.create(n,"or")}}function af(t){if(k(t instanceof ie||t instanceof fe),t instanceof ie)return t;let e=t.getFilters();if(e.length===1)return af(e[0]);if(FS(t))return t;let n=e.map(i=>af(i)),r=[];return n.forEach(i=>{i instanceof ie?r.push(i):i instanceof fe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:fe.create(r,t.op)}var M_=class{constructor(){this.on=new sl}addToCollectionParentIndex(e,n){return this.on.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(Jt.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(Jt.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},sl=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ye(ce.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ye(ce.comparator)).toArray()}};var Rh=new Uint8Array(0),R_=class{constructor(e,n){this.user=e,this.databaseId=n,this._n=new sl,this.an=new Un(r=>Gi(r),(r,i)=>yl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let o={collectionId:r,parent:bt(i)};return tS(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[IS(n),""],!1,!0);return tS(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(kn(s.parent))}return r})}addFieldIndex(e,n){let r=Fc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=ps(e);return o.next(a=>{s.put(QA(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Fc(e),i=ps(e),o=fs(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Fc(e),r=fs(e),i=ps(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new sf(r).sn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=fs(e),i=!0,o=new Map;return p.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Z(),a=[];return p.forEach(o,(c,l)=>{E("IndexedDbIndexManager",`Using index ${function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(j=>`${j.fieldPath}:${j.kind}`).join(",")}`}(c)} to execute ${Gi(n)}`);let u=function(D,j){let B=Qv(j);if(B===void 0)return null;for(let G of Zh(D,B.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(l,c),d=function(D,j){let B=new Map;for(let G of Fi(j))for(let pe of Zh(D,G.fieldPath))switch(pe.op){case"==":case"in":B.set(G.fieldPath.canonicalString(),pe.value);break;case"not-in":case"!=":return B.set(G.fieldPath.canonicalString(),pe.value),Array.from(B.values())}return null}(l,c),h=function(D,j){let B=[],G=!0;for(let pe of Fi(j)){let xt=pe.kind===0?kA(D,pe.fieldPath,D.startAt):OA(D,pe.fieldPath,D.startAt);B.push(xt.value),G&&(G=xt.inclusive)}return new Bn(B,G)}(l,c),f=function(D,j){let B=[],G=!0;for(let pe of Fi(j)){let xt=pe.kind===0?OA(D,pe.fieldPath,D.endAt):kA(D,pe.fieldPath,D.endAt);B.push(xt.value),G&&(G=xt.inclusive)}return new Bn(B,G)}(l,c),g=this.ln(c,l,h),y=this.ln(c,l,f),_=this.hn(c,l,d),I=this.Pn(c.indexId,u,g,h.inclusive,y,f.inclusive,_);return p.forEach(I,P=>r.j(P,n.limit).next(D=>{D.forEach(j=>{let B=C.fromSegments(j.documentKey);s.has(B)||(s=s.add(B),a.push(B))})}))}).next(()=>a)}return p.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=u$(fe.create(e.filters,"and")).map(r=>h_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.In(n[d/l]):Rh,f=this.Tn(e,h,r[d%l],i),g=this.En(e,h,o[d%l],s),y=a.map(_=>this.Tn(e,h,_,!0));u.push(...this.createRange(f,g,y))}return u}Tn(e,n,r,i){let o=new Bi(e,C.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){let o=new Bi(e,C.empty(),n,r);return i?o.Ht():o}cn(e,n){let r=new sf(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.un(n);return p.forEach(i,o=>this.cn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new ye(Ve.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new ji;for(let i of Fi(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.jt(i.kind);ir.St.ht(o,s)}return r.Ut()}In(e){let n=new ji;return ir.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new ji;return ir.St.ht(zi(this.databaseId,n),r.jt(function(o){let s=Fi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new ji);let o=0;for(let s of Fi(e)){let a=r[o++];for(let c of i)if(this.Rn(n,s.fieldPath)&&Zc(a))i=this.Vn(i,s,a);else{let l=c.jt(s.kind);ir.St.ht(a,l)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new ji;c.seed(a.Ut()),ir.St.ht(s,c.jt(n.kind)),o.push(c)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Fc(e),i=ps(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(u,d){let h=d?new Gc(d.sequenceNumber,new Jt(Qi(d.readTime),new C(kn(d.documentKey)),d.largestBatchId)):Gc.empty(),f=u.fields.map(([g,y])=>new Es(Ve.fromServerFormat(g),y));return new Cs(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:K(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Fc(e),o=ps(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,c=>o.put(QA(c.indexId,this.user,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,c=>this.gn(e,i,c).next(l=>{let u=this.pn(o,c);return l.isEqual(u)?p.resolve():this.yn(e,o,c,l,u)}))))})}wn(e,n,r,i){return fs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return fs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=fs(e),o=new ye(Fr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new Bi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new ye(Fr),i=this.dn(n,e);if(i==null)return r;let o=Qv(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Zc(s))for(let a of s.arrayValue.values||[])r=r.add(new Bi(n.indexId,e.key,this.In(a),i))}else r=r.add(new Bi(n.indexId,e.key,Rh,i));return r}yn(e,n,r,i,o){E("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,l,u,d,h){let f=c.getIterator(),g=l.getIterator(),y=hs(f),_=hs(g);for(;y||_;){let I=!1,P=!1;if(y&&_){let D=u(y,_);D<0?P=!0:D>0&&(I=!0)}else y!=null?P=!0:I=!0;I?(d(_),_=hs(g)):P?(h(y),y=hs(f)):(y=hs(f),_=hs(g))}}(i,o,Fr,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),p.waitFor(s)}fn(e){let n=1;return ps(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Fr(s,a)).filter((s,a,c)=>!a||Fr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Fr(s,e),c=Fr(s,n);if(a===0)i[0]=e.Ht();else if(a>0&&c<0)i.push(s),i.push(s.Ht());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Rh,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Rh,[]];o.push(IDBKeyRange.bound(a,c))}return o}bn(e,n){return Fr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(nS)}getMinOffset(e,n){return p.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||N())).next(nS)}};function tS(t){return tt(t,"collectionParents")}function fs(t){return tt(t,"indexEntries")}function Fc(t){return tt(t,"indexConfiguration")}function ps(t){return tt(t,"indexState")}function nS(t){k(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;jw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Jt(e.readTime,e.documentKey,n)}var rS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function wM(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:s},(u,d,h)=>(a++,h.delete()));o.push(c.next(()=>{k(a===1)}));let l=[];for(let u of n.mutations){let d=AS(e,u.key.path,n.batchId);o.push(i.delete(d)),l.push(u.key)}return p.waitFor(o).next(()=>l)}function cf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw N();e=t.noDocument}return JSON.stringify(e).length}Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(41943040,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);var lf=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){k(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=ws(e),s=Vr(e);return s.add({}).next(a=>{k(typeof a=="number");let c=new Jc(a,n,r,i),l=function(f,g,y){let _=y.baseMutations.map(P=>ol(f.ut,P)),I=y.mutations.map(P=>ol(f.ut,P));return{userId:g,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:_,mutations:I}}(this.serializer,this.userId,c),u=[],d=new ye((h,f)=>K(h.canonicalString(),f.canonicalString()));for(let h of i){let f=AS(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(s.put(l)),u.push(o.put(f,yU))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),p.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return Vr(e).get(n).next(r=>r?(k(r.userId===this.userId),Li(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?p.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Vr(e).Y({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(k(a.batchId>=r),o=Li(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Vr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).W("userMutationsIndex",n).next(r=>r.map(i=>Li(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Oh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return ws(e).Y({range:i},(s,a,c)=>{let[l,u,d]=s,h=kn(u);if(l===this.userId&&n.path.isEqual(h))return Vr(e).get(d).next(f=>{if(!f)throw N();k(f.userId===this.userId),o.push(Li(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ye(K),i=[];return n.forEach(o=>{let s=Oh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ws(e).Y({range:a},(l,u,d)=>{let[h,f,g]=l,y=kn(f);h===this.userId&&o.path.isEqual(y)?r=r.add(g):d.done()});i.push(c)}),p.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Oh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ye(K);return ws(e).Y({range:s},(c,l,u)=>{let[d,h,f]=c,g=kn(h);d===this.userId&&r.isPrefixOf(g)?g.length===i&&(a=a.add(f)):u.done()}).next(()=>this.vn(e,a))}vn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Vr(e).get(o).next(s=>{if(s===null)throw N();k(s.userId===this.userId),r.push(Li(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return wM(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ws(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=kn(o[1]);i.push(c)}else a.done()}).next(()=>{k(i.length===0)})})}containsKey(e,n){return bM(e,this.userId,n)}Mn(e){return EM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function bM(t,e,n){let r=Oh(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ws(t).Y({range:o,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===i&&(s=!0),l.done()}).next(()=>s)}function Vr(t){return tt(t,"mutations")}function ws(t){return tt(t,"documentMutations")}function EM(t){return tt(t,"mutationQueues")}var Ps=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var N_=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Ps(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>V.fromTimestamp(new Te(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ms(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0,o=[];return ms(e).Y((s,a)=>{let c=Bc(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return ms(e).Y((r,i)=>{let o=Bc(i);n(o)})}Bn(e){return iS(e).get("targetGlobalKey").next(n=>(k(n!==null),n))}Ln(e,n){return iS(e).put("targetGlobalKey",n)}kn(e,n){return ms(e).put(yM(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Gi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ms(e).Y({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Bc(a);yl(n,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Lr(e);return n.forEach(s=>{let a=bt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=Lr(e);return p.forEach(n,o=>{let s=bt(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Lr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Lr(e),o=Z();return i.Y({range:r,J:!0},(s,a,c)=>{let l=kn(s[1]),u=new C(l);o=o.add(u)}).next(()=>o)}containsKey(e,n){let r=bt(n.path),i=IDBKeyRange.bound([r],[IS(r)],!1,!0),o=0;return Lr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}_t(e,n){return ms(e).get(n).next(r=>r?Bc(r):null)}};function ms(t){return tt(t,"targets")}function iS(t){return tt(t,"targetGlobal")}function Lr(t){return tt(t,"targetDocuments")}function oS([t,e],[n,r]){let i=K(t,n);return i===0?K(e,r):i}var P_=class{constructor(e){this.Qn=e,this.buffer=new ye(oS),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();oS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},k_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){E("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ei(n)?E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Jr(n)}yield this.Gn(3e5)}))}},O_=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve($t._e);let r=new P_(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(E("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(rS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rS):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),gs()<=vn.DEBUG&&E("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function d$(t,e){return new O_(t,e)}var F_=class{constructor(e,n){this.db=e,this.garbageCollector=d$(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Nh(e,r)}removeReference(e,n,r){return Nh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Nh(e,n)}Xn(e,n){return function(i,o){let s=!1;return EM(i).Z(a=>bM(i,a,o).next(c=>(c&&(s=!0),p.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Zn(e,(s,a)=>{if(a<=n){let c=this.Xn(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,V.min()),Lr(e).delete(function(d){return[0,bt(d.path)]}(s))))});i.push(c)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Nh(e,n)}Zn(e,n){let r=Lr(e),i,o=$t._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==$t._e&&n(new C(kn(i)),o),o=l,i=c):o=$t._e}).next(()=>{o!==$t._e&&n(new C(kn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Nh(t,e){return Lr(t).put(function(r,i){return{targetId:0,path:bt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var uf=class{constructor(){this.changes=new Un(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ke.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var V_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Oi(e).put(r)}removeEntry(e,n,r){return Oi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],rf(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Ke.newInvalidDocument(n);return Oi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vc(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:Ke.newInvalidDocument(n)};return Oi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vc(n))},(i,o)=>{r={document:this.tr(n,o),size:cf(o)}}).next(()=>r)}getEntries(e,n){let r=St();return this.rr(e,n,(i,o)=>{let s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=St(),i=new Ie(C.comparator);return this.rr(e,n,(o,s)=>{let a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,cf(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return p.resolve();let i=new ye(cS);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Vc(i.first()),Vc(i.last())),s=i.getIterator(),a=s.getNext();return Oi(e).Y({index:"documentKeyIndex",range:o},(c,l,u)=>{let d=C.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&cS(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?u.U(Vc(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),rf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oi(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=St();for(let d of l){let h=this.tr(C.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(_l(n,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,i){let o=St(),s=aS(n,r),a=aS(n,Jt.max());return Oi(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let d=this.tr(C.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(d.key,d),o.size===i&&u.done()}).next(()=>o)}newChangeBuffer(e){return new L_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return sS(e).get("remoteDocumentGlobalKey").next(n=>(k(!!n),n))}er(e,n){return sS(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=c$(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(V.min())))return r}return Ke.newInvalidDocument(e)}};function IM(t){return new V_(t)}var L_=class extends uf{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Un(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new ye((o,s)=>K(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=WA(this._r.serializer,s);i=i.add(o.path.popLast());let l=cf(c);r+=l-a.size,n.push(this._r.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=WA(this._r.serializer,s.convertToNoDocument(V.min()));n.push(this._r.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function sS(t){return tt(t,"remoteDocumentGlobal")}function Oi(t){return tt(t,"remoteDocumentsV14")}function Vc(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aS(t,e){let n=e.documentKey.path.toArray();return[t,rf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cS(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=K(n[o],r[o]),i)return i;return i=K(n.length,r.length),i||(i=K(n[n.length-2],r[r.length-2]),i||K(n[n.length-1],r[r.length-1]))}var j_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var df=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Hc(r.mutation,i,Ht.empty(),Te.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Z()){let i=On();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=jc();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=On();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Z()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=St(),s=$c(),a=function(){return $c()}();return n.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof mn)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),Hc(u.mutation,l,u.mutation.getFieldMask(),Te.now())):s.set(l.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new j_(u,(d=s.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=$c(),i=new Ie((s,a)=>s-a),o=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=r.get(c)||Ht.empty();u=a.applyToLocalView(l,u),r.set(c,u);let d=(i.get(a.batchId)||Z()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=WS();u.forEach(h=>{if(!o.has(h)){let f=tM(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return C.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Hw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(On()),a=-1,c=o;return s.next(l=>p.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?p.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,Z())).next(u=>({batchId:a,changes:GS(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new C(n)).next(r=>{let i=jc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=jc();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,c=>{let l=function(d,h){return new pn(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,Ke.newInvalidDocument(u)))});let a=jc();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&Hc(u.mutation,l,Ht.empty(),Te.now()),_l(n,l)&&(a=a.insert(c,l))}),a})}};var B_=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return p.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Le(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:Gw(i.bundledQuery),readTime:Le(i.readTime)}}(n)),p.resolve()}};var U_=class{constructor(){this.overlays=new Ie(C.comparator),this.lr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=On();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=On(),o=n.length+1,s=new C(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ie((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=On(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=On(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return p.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new el(n,r));let o=this.lr.get(n);o===void 0&&(o=Z(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}};var al=class{constructor(){this.hr=new ye(qe.Pr),this.Ir=new ye(qe.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new qe(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new C(new ce([])),r=new qe(n,e),i=new qe(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new C(new ce([])),r=new qe(n,e),i=new qe(n,e+1),o=Z();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new qe(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return C.comparator(e.key,n.key)||K(e.gr,n.gr)}static Tr(e,n){return K(e.gr,n.gr)||C.comparator(e.key,n.key)}};var $_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new ye(qe.Pr)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Jc(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.yr=this.yr.add(new qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{let a=this.wr(s.gr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ye(K);return n.forEach(i=>{let o=new qe(i,0),s=new qe(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),p.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;C.isDocumentKey(o)||(o=o.child(""));let s=new qe(new C(o),0),a=new ye(K);return this.yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.gr)),!0)},s),p.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){k(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return p.forEach(n.mutations,i=>{let o=new qe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new qe(n,0),i=this.yr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var H_=class{constructor(e){this.Cr=e,this.docs=function(){return new Ie(C.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Ke.newInvalidDocument(n))}getEntries(e,n){let r=St();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ke.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=St(),s=n.path,a=new C(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||jw(DS(u),r)<=0||(i.has(u.key)||_l(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){N()}vr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new z_(this)}getSize(e){return p.resolve(this.size)}},z_=class extends uf{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var q_=class{constructor(e){this.persistence=e,this.Fr=new Un(n=>Gi(n),yl),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Mr=0,this.Or=new al,this.targetCount=0,this.Nr=Ps.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),p.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ps(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.kn(n),p.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Or.containsKey(n))}};var hf=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new $t(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new q_(this),this.indexManager=new M_,this.remoteDocumentCache=function(i){return new H_(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new nf(n),this.Kr=new B_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new $_(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new G_(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return p.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},G_=class extends zh{constructor(e){super(),this.currentSequenceNumber=e}},ff=class t{constructor(e){this.persistence=e,this.Gr=new al,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw N()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),p.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Hr,r=>{let i=C.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,V.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return p.or([()=>p.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var W_=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new qh("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DA,{unique:!0}),c.createObjectStore("documentMutations")}(e),lS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),lS(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:V.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DA,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:SU});l.createIndex("collectionPathOverlayIndex",MU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",RU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:vU});l.createIndex("documentKeyIndex",_U),l.createIndex("collectionGroupIndex",wU)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:DU}).createIndex("sequenceNumberIndex",CU,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:TU}).createIndex("documentKeyIndex",AU,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=cf(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,c=>{k(c.userId===o.userId);let l=Li(this.serializer,c);return wM(e,o.userId,l).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let c=new ce(s),l=function(d){return[0,bt(d)]}(c);o.push(n.get(l).next(u=>u?p.resolve():(d=>n.put({targetId:0,path:bt(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>p.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:xU});let r=n.store("collectionParents"),i=new sl,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:bt(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new ce(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],l)=>{let u=kn(a);return o(u.popLast())}))}ni(e){let n=e.store("targets");return n.Y((r,i)=>{let o=Bc(i),s=yM(this.serializer,o);return n.put(s)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new C(ce.fromString(d.document.name).popFirst(5)):d.noDocument?C.fromSegments(d.noDocument.path):d.unknownDocument?C.fromSegments(d.unknownDocument.path):N()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>p.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=IM(this.serializer),o=new hf(ff.jr,this.serializer.ut);return r.W().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:Z();Li(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),p.forEach(a,(c,l)=>{let u=new Ge(l),d=of.ct(this.serializer,u),h=o.getIndexManager(u),f=lf.ct(u,this.serializer,h,o.referenceDelegate);return new df(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Kc(n,$t._e),c).next()})})}};function lS(t){t.createObjectStore("targetDocuments",{keyPath:EU}).createIndex("documentTargetsIndex",IU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bU,{unique:!0}),t.createObjectStore("targetGlobal")}var jv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",K_=class t{constructor(e,n,r,i,o,s,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=l,this._i=u,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new w(m.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new F_(this,i),this.Ii=n+"main",this.serializer=new nf(c),this.Ti=new Hr(this.Ii,this.ai,new W_(this.serializer)),this.qr=new N_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=IM(this.serializer),this.Kr=new I_,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,u===!1&&Fe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(m.FAILED_PRECONDITION,jv);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new $t(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>v(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>v(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>v(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ph(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(ei(e))return E("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Lc(e).get("owner").next(n=>p.resolve(this.wi(n)))}Si(e){return Ph(e).delete(this.clientId)}bi(){return v(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=tt(n,"clientMetadata");return r.W().next(i=>{let o=this.Ci(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?p.resolve(!0):Lc(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new w(m.FAILED_PRECONDITION,jv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ph(e).W().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&E("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return v(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Kc(e,$t._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Ph(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return lf.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new R_(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return of.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?PU:c===14?RS:c===13?MS:c===12?NU:c===11?SS:void N()}(this.ai),s;return this.Ti.runTransaction(e,i,o,a=>(s=new Kc(a,this.Lr?this.Lr.next():$t._e),n==="readwrite-primary"?this.fi(s).next(c=>!!c||this.gi(s)).next(c=>{if(!c)throw Fe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new w(m.FAILED_PRECONDITION,CS);return r(s)}).next(c=>this.yi(s).next(()=>c)):this.Li(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return Lc(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(m.FAILED_PRECONDITION,jv)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lc(e).put("owner",n)}static D(){return Hr.D()}pi(e){let n=Lc(e);return n.get("owner").next(r=>this.wi(r)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Fe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;Wb()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return E("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Fe("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Lc(t){return tt(t,"owner")}function Ph(t){return tt(t,"clientMetadata")}function Kw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Q_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Z(),i=Z();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Y_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pf=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Y_;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(gs()<=vn.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),p.resolve()):(gs()<=vn.DEBUG&&E("QueryEngine","Query:",ys(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(gs()<=vn.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Et(n))):p.resolve())}zi(e,n){if(FA(n))return p.resolve(null);let r=Et(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xh(n,null,"F"),r=Et(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Z(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Yi(n,a);return this.Zi(n,l,s,c.readTime)?this.zi(e,Xh(n,null,"F")):this.Xi(e,l,n,c)}))})))}ji(e,n,r,i){return FA(n)||i.isEqual(V.min())?p.resolve(null):this.Gi.getDocuments(e,r).next(o=>{let s=this.Yi(n,o);return this.Zi(n,s,r,i)?p.resolve(null):(gs()<=vn.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ys(n)),this.Xi(e,s,n,xS(i,-1)).next(a=>a))})}Yi(e,n){let r=new ye(zS(e));return n.forEach((i,o)=>{_l(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return gs()<=vn.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",ys(n)),this.Gi.getDocumentsMatchingQuery(e,n,Jt.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Z_=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Ie(K),this.ns=new Un(o=>Gi(o),yl),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new df(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function xM(t,e,n,r){return new Z_(t,e,n,r)}function DM(t,e){return v(this,null,function*(){let n=S(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Z();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({_s:l,removedBatchIds:s,addedBatchIds:a}))})})})}function h$(t,e){let n=S(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=p.resolve();return h.forEach(g=>{f=f.next(()=>u.getEntry(c,g)).next(y=>{let _=l.docVersions.get(g);k(_!==null),y.version.compareTo(_)<0&&(d.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),u.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Z();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function CM(t){let e=S(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function f$(t,e){let n=S(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((u,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.qr.addMatchingKeys(o,u.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(et.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(y,_,I){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(h,f,u)&&a.push(n.qr.updateTargetData(o,f))});let c=St(),l=Z();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(TM(o,s,e.documentUpdates).next(u=>{c=u.us,l=u.cs})),!r.isEqual(V.min())){let u=n.qr.getLastRemoteSnapshotVersion(o).next(d=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ts=i,o))}function TM(t,e,n){let r=Z(),i=Z();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=St();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(V.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{us:s,cs:i}})}function p$(t,e){let n=S(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ks(t,e){let n=S(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new Ns(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function Os(t,e,n){return v(this,null,function*(){let r=S(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ei(s))throw s;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function mf(t,e,n){let r=S(t),i=V.min(),o=Z();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,u){let d=S(c),h=d.ns.get(u);return h!==void 0?p.resolve(d.ts.get(h)):d.qr.getTargetData(l,u)}(r,s,Et(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:V.min(),n?o:Z())).next(a=>(MM(r,HS(e),a),{documents:a,ls:o})))}function AM(t,e){let n=S(t),r=S(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function SM(t,e){let n=S(t),r=n.rs.get(e)||V.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,xS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(MM(n,e,i),i))}function MM(t,e,n){let r=t.rs.get(e)||V.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function m$(t,e,n,r){return v(this,null,function*(){let i=S(t),o=Z(),s=St();for(let l of n){let u=e.hs(l.metadata.name);l.document&&(o=o.add(u));let d=e.Ps(l);d.setReadTime(e.Is(l.metadata.readTime)),s=s.insert(u,d)}let a=i.ss.newChangeBuffer({trackRemovals:!0}),c=yield ks(i,function(u){return Et($s(ce.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>TM(l,a,s).next(u=>(a.apply(l),u)).next(u=>i.qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.qr.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,u.us,u.cs)).next(()=>u.us)))})}function g$(r,i){return v(this,arguments,function*(t,e,n=Z()){let o=yield ks(t,Et(Gw(e.bundledQuery))),s=S(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Le(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Kr.saveNamedQuery(a,e);let l=o.withResumeToken(et.EMPTY_BYTE_STRING,c);return s.ts=s.ts.insert(l.targetId,l),s.qr.updateTargetData(a,l).next(()=>s.qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.Kr.saveNamedQuery(a,e))})})}function uS(t,e){return`firestore_clients_${t}_${e}`}function dS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Bv(t,e){return`firestore_targets_${t}_${e}`}var gf=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new w(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Fe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},zc=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new w(r.error.code,r.error.message))),o?new t(e,r.state,i):(Fe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},yf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=zw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=TS(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Fe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},X_=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Fe("SharedClientState",`Failed to parse online state: ${e}`),null)}},cl=class{constructor(){this.activeTargetIds=zw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},qc=class{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ie(K),this.started=!1,this.ps=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=uS(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new cl),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return v(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(uS(this.persistenceKey,r));if(i){let o=yf.Ts(r,i);o&&(this.gs=this.gs.insert(o.clientId,o))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Bv(this.persistenceKey,e));if(r){let i=zc.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bv(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return E("SharedClientState","READ",e,n),n}setItem(e,n){E("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void Fe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>v(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(o){let s=$t._e;if(o!=null)try{let a=JSON.parse(o);k(typeof a=="number"),s=a}catch(a){Fe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==$t._e&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){let i=new gf(this.currentUser,e,n,r),o=dS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){let n=dS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=Bv(this.persistenceKey,e),o=new zc(e,n,r);this.setItem(i,o.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return yf.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return gf.Ts(new Ge(o),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return zc.Ts(i,n)}Ms(e){return X_.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return v(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);E("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=zw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},vf=class{constructor(){this.eo=new cl,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new cl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var J_=class{ro(e){}shutdown(){}};var _f=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var kh=null;function Uv(){return kh===null?kh=function(){return 268435456+Math.round(2147483648*Math.random())}():kh++,"0x"+kh.toString(16)}var y$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ew=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var pt="WebChannelConnection",tw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){let a=Uv(),c=this.So(n,r);E("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,o,s),this.Do(n,c,l,i).then(u=>(E("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Xt("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}Co(n,r,i,o,s,a){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Us}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){let i=y$[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){let o=Uv();return new Promise((s,a)=>{let c=new wA;c.setWithCredentials(!0),c.listenOnce(vA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Mh.NO_ERROR:let u=c.getResponseJson();E(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case Mh.TIMEOUT:E(pt,`RPC '${e}' ${o} timed out`),a(new w(m.DEADLINE_EXCEEDED,"Request time out"));break;case Mh.HTTP_ERROR:let d=c.getStatus();if(E(pt,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let g=function(_){let I=_.toLowerCase().replace(/_/g,"-");return Object.values(m).indexOf(I)>=0?I:m.UNKNOWN}(f.status);a(new w(g,f.message))}else a(new w(m.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new w(m.UNAVAILABLE,"Connection failed."));break;default:N()}}finally{E(pt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);E(pt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",l,r,15)})}vo(e,n,r){let i=Uv(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=gA(),a=yA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let u=o.join("");E(pt,`Creating RPC '${e}' stream ${i}: ${u}`,c);let d=s.createWebChannel(u,c),h=!1,f=!1,g=new ew({co:_=>{f?E(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(E(pt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(pt,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},lo:()=>d.close()}),y=(_,I,P)=>{_.listen(I,D=>{try{P(D)}catch(j){setTimeout(()=>{throw j},0)}})};return y(d,kc.EventType.OPEN,()=>{f||E(pt,`RPC '${e}' stream ${i} transport opened.`)}),y(d,kc.EventType.CLOSE,()=>{f||(f=!0,E(pt,`RPC '${e}' stream ${i} transport closed`),g.Ro())}),y(d,kc.EventType.ERROR,_=>{f||(f=!0,Xt(pt,`RPC '${e}' stream ${i} transport errored:`,_),g.Ro(new w(m.UNAVAILABLE,"The operation could not be completed")))}),y(d,kc.EventType.MESSAGE,_=>{var I;if(!f){let P=_.data[0];k(!!P);let D=P,j=D.error||((I=D[0])===null||I===void 0?void 0:I.error);if(j){E(pt,`RPC '${e}' stream ${i} received error:`,j);let B=j.status,G=function(rp){let Tl=ze[rp];if(Tl!==void 0)return iM(Tl)}(B),pe=j.message;G===void 0&&(G=m.INTERNAL,pe="Unknown error status: "+B+" with message "+j.message),f=!0,g.Ro(new w(G,pe)),d.close()}else E(pt,`RPC '${e}' stream ${i} received:`,P),g.Vo(P)}}),y(a,_A.STAT_EVENT,_=>{_.stat===Vv.PROXY?E(pt,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Vv.NOPROXY&&E(pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ao()},0),g}};function RM(){return typeof window<"u"?window:null}function jh(){return typeof document<"u"?document:null}function wl(t){return new __(t,!0)}var ll=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var wf=class{constructor(e,n,r,i,o,s,a,c){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new ll(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return v(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return v(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return v(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===m.RESOURCE_EXHAUSTED?(Fe(n.toString()),Fe("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===m.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{let i=new w(m.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){let r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(()=>v(this,null,function*(){this.state=0,this.start()}))}o_(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nw=class extends wf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=t$(this.serializer,e),r=function(o){if(!("targetChange"in o))return V.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?V.min():s.readTime?Le(s.readTime):V.min()}(e);return this.listener.a_(n,r)}u_(e){let n={};n.database=il(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Yh(c)?{documents:dM(o,c)}:{query:hM(o,c)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=sM(o,s.resumeToken);let l=w_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(V.min())>0){a.readTime=Rs(o,s.snapshotVersion.toTimestamp());let l=w_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=r$(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){let n={};n.database=il(this.serializer),n.removeTarget=e,this.e_(n)}},rw=class extends wf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let n=n$(e.writeResults,e.commitTime),r=Le(e.commitTime);return this.listener.I_(r,n)}return k(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=il(this.serializer),this.e_(e)}P_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>ol(this.serializer,r))};this.e_(n)}};var iw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new w(m.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new w(m.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(m.UNKNOWN,o.toString())})}terminate(){this.d_=!0}};var ow=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Fe(n),this.f_=!1):E("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var sw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(s=>{r.enqueueAndForget(()=>v(this,null,function*(){ti(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=S(c);l.C_.add(4),yield Hs(l),l.M_.set("Unknown"),l.C_.delete(4),yield bl(l)})}(this))}))}),this.M_=new ow(r,i)}};function bl(t){return v(this,null,function*(){if(ti(t))for(let e of t.v_)yield e(!0)})}function Hs(t){return v(this,null,function*(){for(let e of t.v_)yield e(!1)})}function jf(t,e){let n=S(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Zw(n)?Yw(n):qs(n).Ho()&&Qw(n,e))}function ul(t,e){let n=S(t),r=qs(n);n.D_.delete(e),r.Ho()&&NM(n,e),n.D_.size===0&&(r.Ho()?r.Zo():ti(n)&&n.M_.set("Unknown"))}function Qw(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(V.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).u_(e)}function NM(t,e){t.x_.Oe(e),qs(t).c_(e)}function Yw(t){t.x_=new v_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.M_.g_()}function Zw(t){return ti(t)&&!qs(t).jo()&&t.D_.size>0}function ti(t){return S(t).C_.size===0}function PM(t){t.x_=void 0}function v$(t){return v(this,null,function*(){t.D_.forEach((e,n)=>{Qw(t,e)})})}function _$(t,e){return v(this,null,function*(){PM(t),Zw(t)?(t.M_.w_(e),Yw(t)):t.M_.set("Unknown")})}function w$(t,e,n){return v(this,null,function*(){if(t.M_.set("Online"),e instanceof ef&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.D_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.D_.delete(a),i.x_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bf(t,r)}else if(e instanceof xs?t.x_.$e(e):e instanceof Jh?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(V.min()))try{let r=yield CM(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.x_.it(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.D_.get(l);u&&o.D_.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.D_.get(c);if(!u)return;o.D_.set(c,u.withResumeToken(et.EMPTY_BYTE_STRING,u.snapshotVersion)),NM(o,c);let d=new Ns(u.target,c,l,u.sequenceNumber);Qw(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield bf(t,r)}})}function bf(t,e,n){return v(this,null,function*(){if(!ei(e))throw e;t.C_.add(1),yield Hs(t),t.M_.set("Offline"),n||(n=()=>CM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield bl(t)}))})}function kM(t,e){return e().catch(n=>bf(t,n,e))}function zs(t){return v(this,null,function*(){let e=S(t),n=Xr(e),r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;b$(e);)try{let i=yield p$(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,E$(e,i)}catch(i){yield bf(e,i)}OM(e)&&FM(e)})}function b$(t){return ti(t)&&t.b_.length<10}function E$(t,e){t.b_.push(e);let n=Xr(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function OM(t){return ti(t)&&!Xr(t).jo()&&t.b_.length>0}function FM(t){Xr(t).start()}function I$(t){return v(this,null,function*(){Xr(t).E_()})}function x$(t){return v(this,null,function*(){let e=Xr(t);for(let n of t.b_)e.P_(n.mutations)})}function D$(t,e,n){return v(this,null,function*(){let r=t.b_.shift(),i=m_.from(r,e,n);yield kM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield zs(t)})}function C$(t,e){return v(this,null,function*(){e&&Xr(t).h_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return rM(s)&&s!==m.ABORTED}(i.code)){let o=r.b_.shift();Xr(r).Yo(),yield kM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield zs(r)}})}(t,e)),OM(t)&&FM(t)})}function hS(t,e){return v(this,null,function*(){let n=S(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=ti(n);n.C_.add(3),yield Hs(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield bl(n)})}function aw(t,e){return v(this,null,function*(){let n=S(t);e?(n.C_.delete(2),yield bl(n)):e||(n.C_.add(2),yield Hs(n),n.M_.set("Unknown"))})}function qs(t){return t.O_||(t.O_=function(n,r,i){let o=S(n);return o.A_(),new nw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:v$.bind(null,t),Io:_$.bind(null,t),a_:w$.bind(null,t)}),t.v_.push(e=>v(this,null,function*(){e?(t.O_.Yo(),Zw(t)?Yw(t):t.M_.set("Unknown")):(yield t.O_.stop(),PM(t))}))),t.O_}function Xr(t){return t.N_||(t.N_=function(n,r,i){let o=S(n);return o.A_(),new rw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:I$.bind(null,t),Io:C$.bind(null,t),T_:x$.bind(null,t),I_:D$.bind(null,t)}),t.v_.push(e=>v(this,null,function*(){e?(t.N_.Yo(),yield zs(t)):(yield t.N_.stop(),t.b_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}var cw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new We,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(m.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Gs(t,e){if(Fe("AsyncQueue",`${e}: ${t}`),ei(t))return new w(m.UNAVAILABLE,`${e}: ${t}`);throw t}var Ef=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||C.comparator(n.key,r.key):(n,r)=>C.comparator(n.key,r.key),this.keyedMap=jc(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var If=class{constructor(){this.B_=new Ie(C.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):N():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},Fs=class t{constructor(e,n,r,i,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Ef.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var lw=class{constructor(){this.k_=void 0,this.listeners=[]}},uw=class{constructor(){this.queries=new Un(e=>$S(e),vl),this.onlineState="Unknown",this.q_=new Set}};function Xw(t,e){return v(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new lw),i)try{o.k_=yield n.onListen(r)}catch(s){let a=Gs(s,`Initialization of query '${ys(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&eb(n)})}function Jw(t,e){return v(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function T$(t,e){let n=S(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.listeners)a.K_(i)&&(r=!0);s.k_=i}}r&&eb(n)}function A$(t,e,n){let r=S(t),i=r.queries.get(e);if(i)for(let o of i.listeners)o.onError(n);r.queries.delete(e)}function eb(t){t.q_.forEach(e=>{e.next()})}var dl=class{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Fs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var dw=class{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}};var xf=class{constructor(e){this.serializer=e}hs(e){return Vn(this.serializer,e)}Ps(e){return e.metadata.exists?uM(this.serializer,e.document,!1):Ke.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Le(e)}},hw=class{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VM(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;let r=ce.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){let n=new Map,r=new xf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.hs(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||Z()).add(o);n.set(s,a)}}return n}complete(){return v(this,null,function*(){let e=yield m$(this.localStore,new xf(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(let r of this.queries)yield g$(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function VM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Df=class{constructor(e){this.key=e}},Cf=class{constructor(e){this.key=e}},Tf=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Z(),this.mutatedKeys=Z(),this._a=zS(e),this.aa=new Ef(this._a)}get ua(){return this.ia}ca(e,n){let r=n?n.la:new If,i=n?n.aa:this.aa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{let h=i.get(u),f=_l(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),_=!1;h&&f?h.data.isEqual(f.data)?g!==y&&(r.track({type:3,doc:f}),_=!0):this.ha(h,f)||(r.track({type:2,doc:f}),_=!0,(c&&this._a(f,c)>0||l&&this._a(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(c||l)&&(a=!0)),_&&(f?(s=s.add(f),o=y?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{aa:s,la:r,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let s=e.la.L_();s.sort((u,d)=>function(f,g){let y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return N()}};return y(f)-y(g)}(u.type,d.type)||this._a(u.doc,d.doc)),this.Pa(r),i=i!=null&&i;let a=n&&!i?this.Ia():[],c=this.oa.size===0&&this.current&&!i?1:0,l=c!==this.sa;return this.sa=c,s.length!==0||l?{snapshot:new Fs(this.query,e.aa,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new If,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=Z(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});let n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new Cf(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new Df(r))}),n}da(e){this.ia=e.ls,this.oa=Z();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Fs.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},fw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},pw=class{constructor(e){this.key=e,this.Ra=!1}},mw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Un(a=>$S(a),vl),this.fa=new Map,this.ga=new Set,this.pa=new Ie(C.comparator),this.ya=new Map,this.wa=new al,this.Sa={},this.ba=new Map,this.Da=Ps.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function S$(t,e){return v(this,null,function*(){let n=ob(t),r,i,o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{let s=yield ks(n.localStore,Et(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield tb(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&jf(n.remoteStore,s)}return i})}function tb(t,e,n,r,i){return v(this,null,function*(){t.va=(d,h,f)=>function(y,_,I,P){return v(this,null,function*(){let D=_.view.ca(I);D.Zi&&(D=yield mf(y.localStore,_.query,!1).then(({documents:pe})=>_.view.ca(pe,D)));let j=P&&P.targetChanges.get(_.targetId),B=P&&P.targetMismatches.get(_.targetId)!=null,G=_.view.applyChanges(D,y.isPrimaryClient,j,B);return gw(y,_.targetId,G.Ta),G.snapshot})}(t,d,h,f);let o=yield mf(t.localStore,e,!0),s=new Tf(e,o.ls),a=s.ca(o.documents),c=nl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,c);gw(t,n,l.Ta);let u=new fw(e,n,s);return t.ma.set(e,u),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot})}function M$(t,e){return v(this,null,function*(){let n=S(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!vl(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Os(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ul(n.remoteStore,r.targetId),Vs(n,r.targetId)}).catch(Jr))):(Vs(n,r.targetId),yield Os(n.localStore,r.targetId,!0))})}function R$(t,e,n){return v(this,null,function*(){let r=sb(t);try{let i=yield function(s,a){let c=S(s),l=Te.now(),u=a.reduce((f,g)=>f.add(g.key),Z()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=St(),y=Z();return c.ss.getEntries(f,u).next(_=>{g=_,g.forEach((I,P)=>{P.isValidDocument()||(y=y.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,g)).next(_=>{d=_;let I=[];for(let P of a){let D=KU(P,d.get(P.key).overlayedDocument);D!=null&&I.push(new mn(P.key,D,OS(D.value.mapValue),Pe.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,I,a)}).next(_=>{h=_;let I=_.applyToLocalDocumentSet(d,y);return c.documentOverlayCache.saveOverlays(f,_.batchId,I)})}).then(()=>({batchId:h.batchId,changes:GS(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Sa[s.currentUser.toKey()];l||(l=new Ie(K)),l=l.insert(a,c),s.Sa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield ur(r,i.changes),yield zs(r.remoteStore)}catch(i){let o=Gs(i,"Failed to persist write");n.reject(o)}})}function LM(t,e){return v(this,null,function*(){let n=S(t);try{let r=yield f$(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.ya.get(o);s&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?k(s.Ra):i.removedDocuments.size>0&&(k(s.Ra),s.Ra=!1))}),yield ur(n,r,e)}catch(r){yield Jr(r)}})}function fS(t,e,n){let r=S(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ma.forEach((o,s)=>{let a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=S(s);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.listeners)h.Q_(a)&&(l=!0)}),l&&eb(c)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function N$(t,e,n){return v(this,null,function*(){let r=S(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.ya.get(e),o=i&&i.key;if(o){let s=new Ie(C.comparator);s=s.insert(o,Ke.newNoDocument(o,V.min()));let a=Z().add(o),c=new tl(V.min(),new Map,new Ie(K),s,a);yield LM(r,c),r.pa=r.pa.remove(o),r.ya.delete(e),ib(r)}else yield Os(r.localStore,e,!1).then(()=>Vs(r,e,n)).catch(Jr)})}function P$(t,e){return v(this,null,function*(){let n=S(t),r=e.batch.batchId;try{let i=yield h$(n.localStore,e);rb(n,r,null),nb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ur(n,i)}catch(i){yield Jr(i)}})}function k$(t,e,n){return v(this,null,function*(){let r=S(t);try{let i=yield function(s,a){let c=S(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(k(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);rb(r,e,n),nb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ur(r,i)}catch(i){yield Jr(i)}})}function O$(t,e){return v(this,null,function*(){let n=S(t);ti(n.remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=S(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){let i=Gs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function nb(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function rb(t,e,n){let r=S(t),i=r.Sa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Vs(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||jM(t,r)})}function jM(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(ul(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),ib(t))}function gw(t,e,n){for(let r of n)r instanceof Df?(t.wa.addReference(r.key,e),F$(t,r)):r instanceof Cf?(E("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||jM(t,r.key)):N()}function F$(t,e){let n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ga.add(r),ib(t))}function ib(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new C(ce.fromString(e)),r=t.Da.next();t.ya.set(r,new pw(n)),t.pa=t.pa.insert(n,r),jf(t.remoteStore,new Ns(Et($s(n.path)),r,"TargetPurposeLimboResolution",$t._e))}}function ur(t,e,n){return v(this,null,function*(){let r=S(t),i=[],o=[],s=[];r.ma.isEmpty()||(r.ma.forEach((a,c)=>{s.push(r.va(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=Q_.Qi(c.targetId,l);o.push(u)}}))}),yield Promise.all(s),r.Va.a_(i),yield function(c,l){return v(this,null,function*(){let u=S(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(l,h=>p.forEach(h.ki,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ei(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ts.get(h),g=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(g);u.ts=u.ts.insert(h,y)}}})}(r.localStore,o))})}function V$(t,e){return v(this,null,function*(){let n=S(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield DM(n.localStore,e);n.currentUser=e,function(o,s){o.ba.forEach(a=>{a.forEach(c=>{c.reject(new w(m.CANCELLED,s))})}),o.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ur(n,r._s)}})}function L$(t,e){let n=S(t),r=n.ya.get(e);if(r&&r.Ra)return Z().add(r.key);{let i=Z(),o=n.fa.get(e);if(!o)return i;for(let s of o){let a=n.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function j$(t,e){return v(this,null,function*(){let n=S(t),r=yield mf(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&gw(n,e.targetId,i.Ta),i})}function B$(t,e){return v(this,null,function*(){let n=S(t);return SM(n.localStore,e).then(r=>ur(n,r))})}function U$(t,e,n,r){return v(this,null,function*(){let i=S(t),o=yield function(a,c){let l=S(a),u=S(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Cn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield zs(i.remoteStore):n==="acknowledged"||n==="rejected"?(rb(i,e,r||null),nb(i,e),function(a,c){S(S(a).mutationQueue).Fn(c)}(i.localStore,e)):N(),yield ur(i,o)):E("SyncEngine","Cannot apply mutation batch with id: "+e)})}function $$(t,e){return v(this,null,function*(){let n=S(t);if(ob(n),sb(n),e===!0&&n.Ca!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield pS(n,r.toArray());n.Ca=!0,yield aw(n.remoteStore,!0);for(let o of i)jf(n.remoteStore,o)}else if(e===!1&&n.Ca!==!1){let r=[],i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Vs(n,s),Os(n.localStore,s,!0))),ul(n.remoteStore,s)}),yield i,yield pS(n,r),function(s){let a=S(s);a.ya.forEach((c,l)=>{ul(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Ie(C.comparator)}(n),n.Ca=!1,yield aw(n.remoteStore,!1)}})}function pS(t,e,n){return v(this,null,function*(){let r=S(t),i=[],o=[];for(let s of e){let a,c=r.fa.get(s);if(c&&c.length!==0){a=yield ks(r.localStore,Et(c[0]));for(let l of c){let u=r.ma.get(l),d=yield j$(r,u);d.snapshot&&o.push(d.snapshot)}}else{let l=yield AM(r.localStore,s);a=yield ks(r.localStore,l),yield tb(r,BM(l),s,!1,a.resumeToken)}i.push(a)}return r.Va.a_(o),i})}function BM(t){return US(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function H$(t){return function(n){return S(S(n).persistence).Bi()}(S(t).localStore)}function z$(t,e,n,r){return v(this,null,function*(){let i=S(t);if(i.Ca)return void E("SyncEngine","Ignoring unexpected query state notification.");let o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield SM(i.localStore,HS(o[0])),a=tl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",et.EMPTY_BYTE_STRING);yield ur(i,s,a);break}case"rejected":yield Os(i.localStore,e,!0),Vs(i,e,r);break;default:N()}})}function q$(t,e,n){return v(this,null,function*(){let r=ob(t);if(r.Ca){for(let i of e){if(r.fa.has(i)){E("SyncEngine","Adding an already active target "+i);continue}let o=yield AM(r.localStore,i),s=yield ks(r.localStore,o);yield tb(r,BM(o),s.targetId,!1,s.resumeToken),jf(r.remoteStore,s)}for(let i of n)r.fa.has(i)&&(yield Os(r.localStore,i,!1).then(()=>{ul(r.remoteStore,i),Vs(r,i)}).catch(Jr))}})}function ob(t){let e=S(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N$.bind(null,e),e.Va.a_=T$.bind(null,e.eventManager),e.Va.Fa=A$.bind(null,e.eventManager),e}function sb(t){let e=S(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k$.bind(null,e),e}function G$(t,e,n){let r=S(t);(function(o,s,a){return v(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,g){let y=S(f),_=Le(g.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",I=>y.Kr.getBundleMetadata(I,g.id)).then(I=>!!I&&I.createTime.compareTo(_)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(VM(c));let l=new hw(c,o.localStore,s.serializer),u=yield s.Ma();for(;u;){let h=yield l.ea(u);h&&a._updateProgress(h),u=yield s.Ma()}let d=yield l.complete();return yield ur(o,d.ra,void 0),yield function(f,g){let y=S(f);return y.persistence.runTransaction("Save bundle","readwrite",_=>y.Kr.saveBundleMetadata(_,g))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.na)}catch(c){return Xt("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var hl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=wl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return xM(this.persistence,new pf,e.initialUser,this.serializer)}createPersistence(e){return new hf(ff.jr,this.serializer)}createSharedClientState(e){return new vf}terminate(){return v(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Af=class t extends hl{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){yield ip(t.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield sb(this.xa.syncEngine),yield zs(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return xM(this.persistence,new pf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new k_(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Jv(n,this.persistence);return new Xv(e.asyncQueue,r)}createPersistence(e){let n=Kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new K_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,RM(),jh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new vf}},yw=class t extends Af{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return v(this,null,function*(){yield ip(t.prototype,this,"initialize").call(this,e);let n=this.xa.syncEngine;this.sharedClientState instanceof qc&&(this.sharedClientState.syncEngine={Ys:U$.bind(null,n),Zs:z$.bind(null,n),Xs:q$.bind(null,n),Bi:H$.bind(null,n),Js:B$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>v(this,null,function*(){yield $$(this.xa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=RM();if(!qc.D(n))throw new w(m.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qc(n,e.asyncQueue,r,e.clientId,e.initialUser)}},fl=class{initialize(e,n){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V$.bind(null,this.syncEngine),yield aw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new uw}()}createDatastore(e){let n=wl(e.databaseInfo.databaseId),r=function(o){return new tw(o)}(e.databaseInfo);return function(o,s,a,c){return new iw(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new sw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>fS(this.syncEngine,n,0),function(){return _f.D()?new _f:new J_}())}createSyncEngine(e,n){return function(i,o,s,a,c,l,u){let d=new mw(i,o,s,a,c,l);return u&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return v(this,null,function*(){let r=S(n);E("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield Hs(r),r.F_.shutdown(),r.M_.set("Unknown")})}(this.remoteStore)}};function mS(t,e=10240){let n=0;return{read(){return v(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return v(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ls=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Fe("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var vw=class{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new We,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){return v(this,null,function*(){return this.metadata.promise})}Ma(){return v(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return v(this,null,function*(){let e=yield this.qa();if(e===null)return null;let n=this.La.decode(e),r=Number(n);isNaN(r)&&this.Qa(`length string (${n}) is not valid number`);let i=yield this.Ka(r);return new dw(JSON.parse(i),e.length+r)})}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){return v(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ka(e){return v(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return v(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var _w=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return v(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new w(m.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let n=yield function(i,o){return v(this,null,function*(){let s=S(i),a=il(s.serializer)+"/documents",c={documents:o.map(h=>rl(s.serializer,h))},l=yield s.Co("BatchGetDocuments",a,c,o.length),u=new Map;l.forEach(h=>{let f=e$(s.serializer,h);u.set(f.key.toString(),f)});let d=[];return o.forEach(h=>{let f=u.get(h.toString());k(!!f),d.push(f)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return v(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=C.fromPath(r);this.mutations.push(new Xc(i,this.precondition(i)))}),yield function(r,i){return v(this,null,function*(){let o=S(r),s=il(o.serializer)+"/documents",a={writes:i.map(c=>ol(o.serializer,c))};yield o.wo("Commit",s,a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw N();n=V.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(m.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(V.min())?Pe.exists(!1):Pe.updateTime(n):Pe.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(V.min()))throw new w(m.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pe.updateTime(n)}return Pe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var ww=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new ll(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>v(this,null,function*(){let e=new _w(this.datastore),n=this.za(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ja(i)}))}).catch(r=>{this.ja(r)})}))}za(e){try{let n=this.updateFunction(e);return!gl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!rM(n)}return!1}};var bw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=$h.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>v(this,null,function*(){E("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(E("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){return v(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(m.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new We;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Gs(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Bh(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield DM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Ew(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield ab(t);E("FirestoreClient","Initializing OnlineComponentProvider");let r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>hS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>hS(e.remoteStore,o)),t._onlineComponents=e})}function UM(t){return t.name==="FirebaseError"?t.code===m.FAILED_PRECONDITION||t.code===m.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function ab(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Bh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!UM(n))throw n;Xt("Error using user provided cache. Falling back to memory cache: "+n),yield Bh(t,new hl)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield Bh(t,new hl);return t._offlineComponents})}function Bf(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ew(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield Ew(t,new fl))),t._onlineComponents})}function $M(t){return ab(t).then(e=>e.persistence)}function cb(t){return ab(t).then(e=>e.localStore)}function HM(t){return Bf(t).then(e=>e.remoteStore)}function lb(t){return Bf(t).then(e=>e.syncEngine)}function W$(t){return Bf(t).then(e=>e.datastore)}function js(t){return v(this,null,function*(){let e=yield Bf(t),n=e.eventManager;return n.onListen=S$.bind(null,e.syncEngine),n.onUnlisten=M$.bind(null,e.syncEngine),n})}function K$(t){return t.asyncQueue.enqueue(()=>v(this,null,function*(){let e=yield $M(t),n=yield HM(t);return e.setNetworkEnabled(!0),function(i){let o=S(i);return o.C_.delete(0),bl(o)}(n)}))}function Q$(t){return t.asyncQueue.enqueue(()=>v(this,null,function*(){let e=yield $M(t),n=yield HM(t);return e.setNetworkEnabled(!1),function(i){return v(this,null,function*(){let o=S(i);o.C_.add(0),yield Hs(o),o.M_.set("Offline")})}(n)}))}function Y$(t,e){let n=new We;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(i,o,s){return v(this,null,function*(){try{let a=yield function(l,u){let d=S(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new w(m.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Gs(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield cb(t),e,n)})),n.promise}function zM(t,e,n={}){let r=new We;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,c,l){let u=new Ls({next:h=>{s.enqueueAndForget(()=>Jw(o,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new w(m.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new w(m.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new dl($s(a.path),u,{includeMetadataChanges:!0,J_:!0});return Xw(o,d)}(yield js(t),t.asyncQueue,e,n,r)})),r.promise}function Z$(t,e){let n=new We;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(i,o,s){return v(this,null,function*(){try{let a=yield mf(i,o,!0),c=new Tf(o,a.ls),l=c.ca(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=Gs(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield cb(t),e,n)})),n.promise}function qM(t,e,n={}){let r=new We;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,c,l){let u=new Ls({next:h=>{s.enqueueAndForget(()=>Jw(o,d)),h.fromCache&&c.source==="server"?l.reject(new w(m.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new dl(a,u,{includeMetadataChanges:!0,J_:!0});return Xw(o,d)}(yield js(t),t.asyncQueue,e,n,r)})),r.promise}function X$(t,e){let n=new Ls(e);return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(i,o){S(i).q_.add(o),o.next()}(yield js(t),n)})),()=>{n.Na(),t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(i,o){S(i).q_.delete(o)}(yield js(t),n)}))}}function J$(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?oM().encode(s):s,function(u,d){return new vw(u,d)}(function(u,d){if(u instanceof Uint8Array)return mS(u,d);if(u instanceof ArrayBuffer)return mS(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,wl(e));t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){G$(yield lb(t),i,r)}))}function e4(t,e){return t.asyncQueue.enqueue(()=>v(this,null,function*(){return function(r,i){let o=S(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield cb(t),e)}))}function GM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var gS=new Map;function ub(t,e,n){if(!n)throw new w(m.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function db(t,e,n,r){if(e===!0&&r===!0)throw new w(m.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yS(t){if(!C.isDocumentKey(t))throw new w(m.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vS(t){if(C.isDocumentKey(t))throw new w(m.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Uf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":N()}function ae(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(m.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Uf(t);throw new w(m.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function WM(t,e){if(e<=0)throw new w(m.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Sf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}db("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(m.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(m.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(m.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Yi=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $v;switch(r.type){case"firstParty":return new Gv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(m.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=gS.get(n);r&&(E("ComponentProvider","Removing Datastore"),gS.delete(n),r.terminate())}(this),Promise.resolve()}};function KM(t,e,n,r={}){var i;let o=(t=ae(t,Yi))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Xt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ge.MOCK_USER;else{a=Gb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new w(m.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ge(l)}t._authCredentials=new Hv(new Uh(a,c))}}var ut=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},_e=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ln(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ln=class t extends ut{constructor(e,n,r){super(e,n,$s(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _e(this.firestore,null,new C(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function hb(t,e,...n){if(t=De(t),ub("collection","path",e),t instanceof Yi){let r=ce.fromString(e,...n);return vS(r),new Ln(t,null,r)}{if(!(t instanceof _e||t instanceof Ln))throw new w(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ce.fromString(e,...n));return vS(r),new Ln(t.firestore,null,r)}}function QM(t,e){if(t=ae(t,Yi),ub("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(m.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ut(t,null,function(r){return new pn(ce.emptyPath(),r)}(e))}function El(t,e,...n){if(t=De(t),arguments.length===1&&(e=$h.newId()),ub("doc","path",e),t instanceof Yi){let r=ce.fromString(e,...n);return yS(r),new _e(t,null,new C(r))}{if(!(t instanceof _e||t instanceof Ln))throw new w(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ce.fromString(e,...n));return yS(r),new _e(t.firestore,t instanceof Ln?t.converter:null,new C(r))}}function fb(t,e){return t=De(t),e=De(e),(t instanceof _e||t instanceof Ln)&&(e instanceof _e||e instanceof Ln)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function pb(t,e){return t=De(t),e=De(e),t instanceof ut&&e instanceof ut&&t.firestore===e.firestore&&vl(t._query,e._query)&&t.converter===e.converter}var Iw=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new ll(this,"async_queue_retry"),this.iu=()=>{let n=jh();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=jh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=jh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new We;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return v(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!ei(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Fe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);let i=cw.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&N()}verifyOperationInProgress(){}uu(){return v(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};function xw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Dw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new We,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var YM=-1,xe=class extends Yi{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Iw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZM(this),this._firestoreClient.terminate()}};function Qe(t){return t._firestoreClient||ZM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ZM(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,l,u){return new e_(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,GM(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new bw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function XM(t,e){aR(t=ae(t,xe));let n=Qe(t);if(n._uninitializedComponentsProvider)throw new w(m.FAILED_PRECONDITION,"SDK cache is already specified.");Xt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new fl;return eR(n,i,new Af(i,r.cacheSizeBytes,e?.forceOwnership))}function JM(t){aR(t=ae(t,xe));let e=Qe(t);if(e._uninitializedComponentsProvider)throw new w(m.FAILED_PRECONDITION,"SDK cache is already specified.");Xt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new fl;return eR(e,r,new yw(r,n.cacheSizeBytes))}function eR(t,e,n){let r=new We;return t.asyncQueue.enqueue(()=>v(this,null,function*(){try{yield Bh(t,n),yield Ew(t,e),r.resolve()}catch(i){let o=i;if(!UM(o))throw o;Xt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function tR(t){if(t._initialized&&!t._terminated)throw new w(m.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new We;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{yield function(r){return v(this,null,function*(){if(!Hr.D())return Promise.resolve();let i=r+"main";yield Hr.delete(i)})}(Kw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function nR(t){return function(n){let r=new We;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return O$(yield lb(n),r)})),r.promise}(Qe(t=ae(t,xe)))}function rR(t){return K$(Qe(t=ae(t,xe)))}function iR(t){return Q$(Qe(t=ae(t,xe)))}function oR(t,e){let n=Qe(t=ae(t,xe)),r=new Dw;return J$(n,t._databaseId,e,r),r}function sR(t,e){return e4(Qe(t=ae(t,xe)),e).then(n=>n?new ut(t,null,n.query):null)}function aR(t){if(t._initialized||t._terminated)throw new w(m.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var $n=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(et.fromBase64String(e))}catch(n){throw new w(m.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var gn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ve(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cr=class{constructor(e){this._methodName=e}};var Zi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}};var t4=/^__.*__$/,Cw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yr(e,this.data,n,this.fieldTransforms)}},Mf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function cR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw N()}}var Rf=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Nf(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(cR(this.Iu)&&t4.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},Tw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wl(e)}pu(e,n,r,i=!1){return new Rf({Iu:e,methodName:n,gu:r,path:Ve.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function to(t){let e=t._freezeSettings(),n=wl(t._databaseId);return new Tw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $f(t,e,n,r,i,o={}){let s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);yb("Data must be an object, but it was:",s,r);let a=dR(r,s),c,l;if(o.merge)c=new Ht(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let d of o.mergeFields){let h=Nw(e,d,n);if(!s.contains(h))throw new w(m.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);fR(u,h)||u.push(h)}c=new Ht(u),l=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=s.fieldTransforms;return new Cw(new mt(a),c,l)}var pl=class t extends cr{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function lR(t,e,n){return new Rf({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Aw=class t extends cr{_toFieldTransform(e){return new Wi(e.path,new Kr)}isEqual(e){return e instanceof t}},Sw=class extends cr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=lR(this,e,!0),r=this.yu.map(o=>no(o,n)),i=new sr(r);return new Wi(e.path,i)}isEqual(e){return this===e}},Mw=class extends cr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=lR(this,e,!0),r=this.yu.map(o=>no(o,n)),i=new ar(r);return new Wi(e.path,i)}isEqual(e){return this===e}},Rw=class extends cr{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){let n=new Qr(e.serializer,YS(e.serializer,this.wu));return new Wi(e.path,n)}isEqual(e){return this===e}};function mb(t,e,n,r){let i=t.pu(1,e,n);yb("Data must be an object, but it was:",i,r);let o=[],s=mt.empty();eo(r,(c,l)=>{let u=vb(e,c,n);l=De(l);let d=i.Ru(u);if(l instanceof pl)o.push(u);else{let h=no(l,d);h!=null&&(o.push(u),s.set(u,h))}});let a=new Ht(o);return new Mf(s,a,i.fieldTransforms)}function gb(t,e,n,r,i,o){let s=t.pu(1,e,n),a=[Nw(e,r,n)],c=[i];if(o.length%2!=0)throw new w(m.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(Nw(e,o[h])),c.push(o[h+1]);let l=[],u=mt.empty();for(let h=a.length-1;h>=0;--h)if(!fR(l,a[h])){let f=a[h],g=c[h];g=De(g);let y=s.Ru(f);if(g instanceof pl)l.push(f);else{let _=no(g,y);_!=null&&(l.push(f),u.set(f,_))}}let d=new Ht(l);return new Mf(u,d,s.fieldTransforms)}function uR(t,e,n,r=!1){return no(n,t.pu(r?4:3,e))}function no(t,e){if(hR(t=De(t)))return yb("Unsupported field value:",e,t),dR(t,e);if(t instanceof cr)return function(r,i){if(!cR(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=no(a,i.Vu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Te.fromDate(r);return{timestampValue:Rs(i.serializer,o)}}if(r instanceof Te){let o=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rs(i.serializer,o)}}if(r instanceof Zi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:sM(i.serializer,r._byteString)};if(r instanceof _e){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${Uf(r)}`)}(t,e)}function dR(t,e){let n={};return NS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(t,(r,i)=>{let o=no(i,e.Eu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function hR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof Zi||t instanceof $n||t instanceof _e||t instanceof cr)}function yb(t,e,n){if(!hR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Uf(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function Nw(t,e,n){if((e=De(e))instanceof gn)return e._internalPath;if(typeof e=="string")return vb(t,e);throw Nf("Field path arguments must be of type string or ",t,!1,void 0,n)}var n4=new RegExp("[~\\*/\\[\\]]");function vb(t,e,n){if(e.search(n4)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gn(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new w(m.INVALID_ARGUMENT,a+t+c)}function fR(t,e){return t.some(n=>n.isEqual(e))}var Xi=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new _e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Pw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Pw=class extends Xi{data(){return super.data()}};function Hf(t,e){return typeof e=="string"?vb(t,e):e instanceof gn?e._internalPath:e._delegate._internalPath}function pR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(m.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ml=class{},Ji=class extends ml{};function dr(t,e,...n){let r=[];e instanceof ml&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof kw).length,a=o.filter(c=>c instanceof Pf).length;if(s>1||s>0&&a>0)throw new w(m.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Pf=class t extends Ji{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return xR(e._query,n),new ut(e.firestore,e.converter,f_(e._query,n))}_parse(e){let n=to(e.firestore);return function(o,s,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new w(m.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){wS(d,u);let f=[];for(let g of d)f.push(_S(c,o,g));h={arrayValue:{values:f}}}else h=_S(c,o,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||wS(d,u),h=uR(a,s,d,u==="in"||u==="not-in");return ie.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function mR(t,e,n){let r=e,i=Hf("where",t);return Pf._create(i,r,n)}var kw=class t extends ml{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fe.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)xR(s,c),s=f_(s,c)}(e._query,n),new ut(e.firestore,e.converter,f_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ow=class t extends Ji{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new w(m.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(m.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qi(o,s)}(e._query,this._field,this._direction);return new ut(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new pn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function gR(t,e="asc"){let n=e,r=Hf("orderBy",t);return Ow._create(r,n)}var kf=class t extends Ji{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new ut(e.firestore,e.converter,Xh(e._query,this._limit,this._limitType))}};function yR(t){return WM("limit",t),kf._create("limit",t,"F")}function vR(t){return WM("limitToLast",t),kf._create("limitToLast",t,"L")}var Of=class t extends Ji{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=IR(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,function(i,o){return new pn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function _R(...t){return Of._create("startAt",t,!0)}function wR(...t){return Of._create("startAfter",t,!1)}var Ff=class t extends Ji{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=IR(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,function(i,o){return new pn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function bR(...t){return Ff._create("endBefore",t,!1)}function ER(...t){return Ff._create("endAt",t,!0)}function IR(t,e,n,r){if(n[0]=De(n[0]),n[0]instanceof Xi)return function(o,s,a,c,l){if(!c)throw new w(m.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of Is(o))if(d.field.isKeyField())u.push(zi(s,c.key));else{let h=c.data.field(d.field);if(Lf(h))throw new w(m.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(m.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new Bn(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=to(t.firestore);return function(s,a,c,l,u,d){let h=s.explicitOrderBy;if(u.length>h.length)throw new w(m.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let g=0;g<u.length;g++){let y=u[g];if(h[g].field.isKeyField()){if(typeof y!="string")throw new w(m.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof y}`);if(!Hw(s)&&y.indexOf("/")!==-1)throw new w(m.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${y}' contains a slash.`);let _=s.path.child(ce.fromString(y));if(!C.isDocumentKey(_))throw new w(m.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);let I=new C(_);f.push(zi(a,I))}else{let _=uR(c,l,y);f.push(_)}}return new Bn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function _S(t,e,n){if(typeof(n=De(n))=="string"){if(n==="")throw new w(m.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hw(e)&&n.indexOf("/")!==-1)throw new w(m.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ce.fromString(n));if(!C.isDocumentKey(r))throw new w(m.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zi(t,new C(r))}if(n instanceof _e)return zi(t,n._key);throw new w(m.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uf(n)}.`)}function wS(t,e){if(!Array.isArray(t)||t.length===0)throw new w(m.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xR(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(m.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(m.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Bs=class{convertValue(e,n="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw N()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return eo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Zi(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Uw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){let n=zr(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ce.fromString(e);k(gM(r));let i=new Gr(r.get(1),r.get(3)),o=new C(r.popFirst(5));return i.isEqual(n)||Fe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function zf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Fw=class extends Bs{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new _e(this.firestore,null,n)}};var or=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},en=class extends Xi{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ur(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ur=class extends en{data(e={}){return super.data(e)}},yn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ur(this._firestore,this._userDataWriter,r.key,r,new or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(m.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:r4(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function r4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return N()}}function _b(t,e){return t instanceof en&&e instanceof en?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof yn&&e instanceof yn&&t._firestore===e._firestore&&pb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function DR(t){t=ae(t,_e);let e=ae(t.firestore,xe);return zM(Qe(e),t._key).then(n=>Ib(e,t,n))}var lr=class extends Bs{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new _e(this.firestore,null,n)}};function CR(t){t=ae(t,_e);let e=ae(t.firestore,xe),n=Qe(e),r=new lr(e);return Y$(n,t._key).then(i=>new en(e,r,t._key,i,new or(i!==null&&i.hasLocalMutations,!0),t.converter))}function TR(t){t=ae(t,_e);let e=ae(t.firestore,xe);return zM(Qe(e),t._key,{source:"server"}).then(n=>Ib(e,t,n))}function AR(t){t=ae(t,ut);let e=ae(t.firestore,xe),n=Qe(e),r=new lr(e);return pR(t._query),qM(n,t._query).then(i=>new yn(e,r,t,i))}function SR(t){t=ae(t,ut);let e=ae(t.firestore,xe),n=Qe(e),r=new lr(e);return Z$(n,t._query).then(i=>new yn(e,r,t,i))}function MR(t){t=ae(t,ut);let e=ae(t.firestore,xe),n=Qe(e),r=new lr(e);return qM(n,t._query,{source:"server"}).then(i=>new yn(e,r,t,i))}function wb(t,e,n){t=ae(t,_e);let r=ae(t.firestore,xe),i=zf(t.converter,e,n);return Ws(r,[$f(to(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Pe.none())])}function bb(t,e,n,...r){t=ae(t,_e);let i=ae(t.firestore,xe),o=to(i),s;return s=typeof(e=De(e))=="string"||e instanceof gn?gb(o,"updateDoc",t._key,e,n,r):mb(o,"updateDoc",t._key,e),Ws(i,[s.toMutation(t._key,Pe.exists(!0))])}function RR(t){return Ws(ae(t.firestore,xe),[new Zr(t._key,Pe.none())])}function NR(t,e){let n=ae(t.firestore,xe),r=El(t),i=zf(t.converter,e);return Ws(n,[$f(to(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pe.exists(!1))]).then(()=>r)}function Eb(t,...e){var n,r,i;t=De(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||xw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(xw(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,l,u;if(t instanceof _e)l=ae(t.firestore,xe),u=$s(t._key.path),c={next:d=>{e[s]&&e[s](Ib(l,t,d))},error:e[s+1],complete:e[s+2]};else{let d=ae(t,ut);l=ae(d.firestore,xe),u=d._query;let h=new lr(l);c={next:f=>{e[s]&&e[s](new yn(l,h,d,f))},error:e[s+1],complete:e[s+2]},pR(t._query)}return function(h,f,g,y){let _=new Ls(y),I=new dl(f,_,g);return h.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return Xw(yield js(h),I)})),()=>{_.Na(),h.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return Jw(yield js(h),I)}))}}(Qe(l),u,a,c)}function PR(t,e){return X$(Qe(t=ae(t,xe)),xw(e)?e:{next:e})}function Ws(t,e){return function(r,i){let o=new We;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return R$(yield lb(r),i,o)})),o.promise}(Qe(t),e)}function Ib(t,e,n){let r=n.docs.get(e._key),i=new lr(t);return new en(t,i,e._key,r,new or(n.hasPendingWrites,n.fromCache),e.converter)}var i4={maxAttempts:5};var Vf=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=to(e)}set(e,n,r){this._verifyNotCommitted();let i=jr(e,this._firestore),o=zf(i.converter,n,r),s=$f(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Pe.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=jr(e,this._firestore),s;return s=typeof(n=De(n))=="string"||n instanceof gn?gb(this._dataReader,"WriteBatch.update",o._key,n,r,i):mb(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Pe.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=jr(e,this._firestore);return this._mutations=this._mutations.concat(new Zr(n._key,Pe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(m.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function jr(t,e){if((t=De(t)).firestore!==e)throw new w(m.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Vw=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=to(n)}get(n){let r=jr(n,this._firestore),i=new Fw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return N();let s=o[0];if(s.isFoundDocument())return new Xi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Xi(this._firestore,i,r._key,null,r.converter);throw N()})}set(n,r,i){let o=jr(n,this._firestore),s=zf(o.converter,r,i),a=$f(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=jr(n,this._firestore),a;return a=typeof(r=De(r))=="string"||r instanceof gn?gb(this._dataReader,"Transaction.update",s._key,r,i,o):mb(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=jr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=jr(e,this._firestore),r=new lr(this._firestore);return super.get(e).then(i=>new en(this._firestore,r,n._key,i._document,new or(!1,!1),n.converter))}};function kR(t,e,n){t=ae(t,xe);let r=Object.assign(Object.assign({},i4),n);return function(o){if(o.maxAttempts<1)throw new w(m.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new We;return o.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){let l=yield W$(o);new ww(o.asyncQueue,l,a,s,c).run()})),c.promise}(Qe(t),i=>e(new Vw(t,i)),r)}function OR(){return new pl("deleteField")}function FR(){return new Aw("serverTimestamp")}function VR(...t){return new Sw("arrayUnion",t)}function LR(...t){return new Mw("arrayRemove",t)}function jR(t){return new Rw("increment",t)}(function(e,n=!0){(function(i){Us=i})(Yb),Js(new ri("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new xe(new zv(r.getProvider("auth-internal")),new Kv(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new w(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gr(l.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),hr(EA,"4.4.0",e),hr(EA,"4.4.0","esm2017")})();var o4="@firebase/firestore-compat",s4="0.3.23";function Sb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function BR(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function UR(){if(!PS())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var qf=class t{constructor(e){this._delegate=e}static fromBase64String(e){return UR(),new t($n.fromBase64String(e))}static fromUint8Array(e){return BR(),new t($n.fromUint8Array(e))}toBase64(){return UR(),this._delegate.toBase64()}toUint8Array(){return BR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function xb(t){return a4(t,["next","error","complete"])}function a4(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var Db=class{enableIndexedDbPersistence(e,n){return XM(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return JM(e._delegate)}clearIndexedDbPersistence(e){return tR(e._delegate)}},Gf=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Xt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){KM(this._delegate,e,n,r)}enableNetwork(){return rR(this._delegate)}disableNetwork(){return iR(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,db("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return nR(this._delegate)}onSnapshotsInSync(e){return PR(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ys(this,hb(this._delegate,e))}catch(n){throw It(n,"collection()","Firestore.collection()")}}doc(e){try{return new Hn(this,El(this._delegate,e))}catch(n){throw It(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new so(this,QM(this._delegate,e))}catch(n){throw It(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return kR(this._delegate,n=>e(new Wf(this,n)))}batch(){return Qe(this._delegate),new Kf(new Vf(this._delegate,e=>Ws(this._delegate,e)))}loadBundle(e){return oR(this._delegate,e)}namedQuery(e){return sR(this._delegate,e).then(n=>n?new so(this,n):null)}},Ks=class extends Bs{constructor(e){super(),this.firestore=e}convertBytes(e){return new qf(new $n(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Hn.forKey(n,this.firestore,null)}};function c4(t){bS(t)}var Wf=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ks(e)}get(e){let n=ro(e);return this._delegate.get(n).then(r=>new io(this._firestore,new en(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=ro(e);return r?(Sb("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ro(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ro(e);return this._delegate.delete(n),this}},Kf=class{constructor(e){this._delegate=e}set(e,n,r){let i=ro(e);return r?(Sb("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ro(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ro(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Qs=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Ur(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new oo(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Ks(e),n),i.set(n,o)),o}};Qs.INSTANCES=new WeakMap;var Hn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ks(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new _e(n._delegate,r,new C(e)))}static forKey(e,n,r){return new t(n,new _e(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ys(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ys(this.firestore,hb(this._delegate,e))}catch(n){throw It(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=De(e),e instanceof _e?fb(this._delegate,e):!1}set(e,n){n=Sb("DocumentReference.set",n);try{return n?wb(this._delegate,e,n):wb(this._delegate,e)}catch(r){throw It(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?bb(this._delegate,e):bb(this._delegate,e,n,...r)}catch(i){throw It(i,"updateDoc()","DocumentReference.update()")}}delete(){return RR(this._delegate)}onSnapshot(...e){let n=$R(e),r=HR(e,i=>new io(this.firestore,new en(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Eb(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=CR(this._delegate):e?.source==="server"?n=TR(this._delegate):n=DR(this._delegate),n.then(r=>new io(this.firestore,new en(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function It(t,e,n){return t.message=t.message.replace(e,n),t}function $R(t){for(let e of t)if(typeof e=="object"&&!xb(e))return e;return{}}function HR(t,e){var n,r;let i;return xb(t[0])?i=t[0]:xb(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var io=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Hn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return _b(this._delegate,e._delegate)}},oo=class extends io{data(e){let n=this._delegate.data(e);return this._delegate._converter||ES(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},so=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ks(e)}where(e,n,r){try{return new t(this.firestore,dr(this._delegate,mR(e,n,r)))}catch(i){throw It(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,dr(this._delegate,gR(e,n)))}catch(r){throw It(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,dr(this._delegate,yR(e)))}catch(n){throw It(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,dr(this._delegate,vR(e)))}catch(n){throw It(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,dr(this._delegate,_R(...e)))}catch(n){throw It(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,dr(this._delegate,wR(...e)))}catch(n){throw It(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,dr(this._delegate,bR(...e)))}catch(n){throw It(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,dr(this._delegate,ER(...e)))}catch(n){throw It(n,"endAt()","Query.endAt()")}}isEqual(e){return pb(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=SR(this._delegate):e?.source==="server"?n=MR(this._delegate):n=AR(this._delegate),n.then(r=>new Il(this.firestore,new yn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=$R(e),r=HR(e,i=>new Il(this.firestore,new yn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Eb(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Cb=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new oo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Il=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new so(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new oo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Cb(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new oo(this._firestore,r))})}isEqual(e){return _b(this._delegate,e._delegate)}},Ys=class t extends so{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Hn(this.firestore,e):null}doc(e){try{return e===void 0?new Hn(this.firestore,El(this._delegate)):new Hn(this.firestore,El(this._delegate,e))}catch(n){throw It(n,"doc()","CollectionReference.doc()")}}add(e){return NR(this._delegate,e).then(n=>new Hn(this.firestore,n))}isEqual(e){return fb(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ro(t){return ae(t,_e)}var Tb=class t{constructor(...e){this._delegate=new gn(...e)}static documentId(){return new t(Ve.keyField().canonicalString())}isEqual(e){return e=De(e),e instanceof gn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Ab=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=FR();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=OR();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=VR(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=LR(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=jR(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var l4={Firestore:Gf,GeoPoint:Zi,Timestamp:Te,Blob:qf,Transaction:Wf,WriteBatch:Kf,DocumentReference:Hn,DocumentSnapshot:io,Query:so,QueryDocumentSnapshot:oo,QuerySnapshot:Il,CollectionReference:Ys,FieldPath:Tb,FieldValue:Ab,setLogLevel:c4,CACHE_SIZE_UNLIMITED:YM};function u4(t,e){t.INTERNAL.registerComponent(new ri("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},l4)))}function d4(t){u4(t,(e,n)=>new Gf(e,n,new Db)),t.registerVersion(o4,s4)}d4(Dt);function h4(t,e=ai){return new W(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function zR(t,e){return h4(t,e)}function f4(t,e){return zR(t,e).pipe(Kn(void 0),oa(),L(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Nb(t,e){return zR(t,e).pipe(L(n=>({payload:n,type:"query"})))}var Qf=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=QR(r,n);return new Zf(i,o,this.afs)}snapshotChanges(){return f4(this.ref,this.afs.schedulers.outsideAngular).pipe(At)}valueChanges(e={}){return this.snapshotChanges().pipe(L(({payload:n})=>e.idField?ue(T({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return oe(this.ref.get(e)).pipe(At)}};function Yf(t,e){return Nb(t,e).pipe(Kn(void 0),oa(),L(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(d=>d.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function qR(t,e,n){return Yf(t,n).pipe(ci((r,i)=>p4(r,i.map(o=>o.payload),e),[]),ia(),L(r=>r.map(i=>({type:i.type,payload:i}))))}function p4(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=m4(t,r))}),t}function Mb(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function m4(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Mb(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return Mb(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Mb(t,e.oldIndex,1);break}return t}function GR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Zf=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Yf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(L(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Kn(void 0),oa(),Ue(([r,i])=>i.length>0||!r),L(([,r])=>r),At)}auditTrail(e){return this.stateChanges(e).pipe(ci((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=GR(e);return qR(this.query,n,this.afs.schedulers.outsideAngular).pipe(At)}valueChanges(e={}){return Nb(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.payload.docs.map(r=>e.idField?ue(T({},r.data()),{[e.idField]:r.id}):r.data())),At)}get(e){return oe(this.query.get(e)).pipe(At)}add(e){return this.ref.add(e)}doc(e){return new Qf(this.ref.doc(e),this.afs)}},Rb=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Yf(this.query,this.afs.schedulers.outsideAngular).pipe(At):Yf(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ue(n=>n.length>0),At)}auditTrail(e){return this.stateChanges(e).pipe(ci((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=GR(e);return qR(this.query,n,this.afs.schedulers.outsideAngular).pipe(At)}valueChanges(e={}){return Nb(this.query,this.afs.schedulers.outsideAngular).pipe(L(r=>r.payload.docs.map(i=>e.idField?T({[e.idField]:i.id},i.data()):i.data())),At)}get(e){return oe(this.query.get(e)).pipe(At)}},WR=new M("angularfire2.enableFirestorePersistence"),KR=new M("angularfire2.firestore.persistenceSettings"),g4=new M("angularfire2.firestore.settings"),y4=new M("angularfire2.firestore.use-emulator");function QR(t,e=n=>n){return{query:e(t),ref:t}}var Pb=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,l,u,d,h,f,g,y,_,I,P){this.schedulers=c;let D=dc(n,a,r),j=u;d&&Wy(D,a,h,g,y,_,f,I),[this.firestore,this.persistenceEnabled$]=eh(`${D.name}.firestore`,"AngularFirestore",D.name,()=>{let B=a.runOutsideAngular(()=>D.firestore());if(o&&B.settings(o),j&&B.useEmulator(...j),i&&!Di(s)){let G=()=>{try{return oe(B.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(pe){return typeof console<"u"&&console.warn(pe),O(!1)}};return[B,a.runOutsideAngular(G)]}else return[B,O(!1)]},[o,j,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=QR(i,r),a=this.schedulers.ngZone.run(()=>o);return new Zf(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new Rb(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Qf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(b(is),b(os,8),b(WR,8),b(g4,8),b(it),b(H),b(Zd),b(KR,8),b(y4,8),b(th,8),b(Uy,8),b($y,8),b(Hy,8),b(zy,8),b(qy,8),b(Gy,8),b(Si,8))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),YR=(()=>{class t{constructor(){Dt.registerVersion("angularfire",rs.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:WR,useValue:!0},{provide:KR,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=re({type:t});static \u0275inj=ne({providers:[Pb]})}return t})();var zn=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.firestore=i,this.messageCounter=1,this.user$=this.afAuth.authState}getMessages(...r){let i=r.map(o=>this.firestore.collection(`users/${o}/messages`).valueChanges());return Wn(i).pipe(L(o=>o.reduce((s,a)=>s.concat(a),[])))}sendMessage(r,i,o){let s=`message${this.messageCounter++}`,c={sender:r,text:o,timestamp:new Date};return this.firestore.collection(`users/${i}/messages`).doc(s).set(c)}signIn(r,i){return this.afAuth.signInWithEmailAndPassword(r,i)}signOut(){return this.afAuth.signOut()}};e.\u0275fac=function(i){return new(i||e)(b(th),b(Pb))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var i1=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(z(vi),z(ot))},e.\u0275dir=Me({type:e});let t=e;return t})(),_4=(()=>{let e=class e extends i1{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ta(e)))(o||e)}})(),e.\u0275dir=Me({type:e,features:[wi]});let t=e;return t})(),o1=new M("NgValueAccessor");var w4={provide:o1,useExisting:Ia(()=>ni),multi:!0};function b4(){let t=An()?An().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var E4=new M("CompositionEventMode"),ni=(()=>{let e=class e extends i1{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!b4())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(z(vi),z(ot),z(E4,8))},e.\u0275dir=Me({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Ze("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Ii([w4]),wi]});let t=e;return t})();var I4=new M("NgValidators"),x4=new M("NgAsyncValidators");function s1(t){return t!=null}function a1(t){return bi(t)?oe(t):t}function c1(t){let e={};return t.forEach(n=>{e=n!=null?T(T({},e),n):e}),Object.keys(e).length===0?null:e}function l1(t,e){return e.map(n=>n(t))}function D4(t){return!t.validate}function u1(t){return t.map(e=>D4(e)?e:n=>e.validate(n))}function C4(t){if(!t)return null;let e=t.filter(s1);return e.length==0?null:function(n){return c1(l1(n,e))}}function d1(t){return t!=null?C4(u1(t)):null}function T4(t){if(!t)return null;let e=t.filter(s1);return e.length==0?null:function(n){let r=l1(n,e).map(a1);return Ep(r).pipe(L(c1))}}function h1(t){return t!=null?T4(u1(t)):null}function ZR(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function A4(t){return t._rawValidators}function S4(t){return t._rawAsyncValidators}function kb(t){return t?Array.isArray(t)?t:[t]:[]}function ep(t,e){return Array.isArray(t)?t.includes(e):t===e}function XR(t,e){let n=kb(e);return kb(t).forEach(i=>{ep(n,i)||n.push(i)}),n}function JR(t,e){return kb(e).filter(n=>!ep(t,n))}var tp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=d1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=h1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ob=class extends tp{get formDirective(){return null}get path(){return null}},Cl=class extends tp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Fb=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},M4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},GK=ue(T({},M4),{"[class.ng-submitted]":"isSubmitted"}),Xs=(()=>{let e=class e extends Fb{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(z(Cl,2))},e.\u0275dir=Me({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Tr("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[wi]});let t=e;return t})();var xl="VALID",Jf="INVALID",Zs="PENDING",Dl="DISABLED";function R4(t){return(np(t)?t.validators:t)||null}function N4(t){return Array.isArray(t)?d1(t):t||null}function P4(t,e){return(np(e)?e.asyncValidators:t)||null}function k4(t){return Array.isArray(t)?h1(t):t||null}function np(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Vb=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===xl}get invalid(){return this.status===Jf}get pending(){return this.status==Zs}get disabled(){return this.status===Dl}get enabled(){return this.status!==Dl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(XR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(XR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(JR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(JR(e,this._rawAsyncValidators))}hasValidator(e){return ep(this._rawValidators,e)}hasAsyncValidator(e){return ep(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Zs,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Dl,this.errors=null,this._forEachChild(r=>{r.disable(ue(T({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xl,this._forEachChild(r=>{r.enable(ue(T({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xl||this.status===Zs)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dl:xl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Zs,this._hasOwnPendingAsyncValidator=!0;let n=a1(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Oe,this.statusChanges=new Oe}_calculateStatus(){return this._allControlsDisabled()?Dl:this.errors?Jf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zs)?Zs:this._anyControlsHaveStatus(Jf)?Jf:xl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){np(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=N4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=k4(this._rawAsyncValidators)}};var f1=new M("CallSetDisabledState",{providedIn:"root",factory:()=>Lb}),Lb="always";function O4(t,e){return[...e.path,t]}function F4(t,e,n=Lb){L4(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),j4(t,e),U4(t,e),B4(t,e),V4(t,e)}function e1(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function V4(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function L4(t,e){let n=A4(t);e.validator!==null?t.setValidators(ZR(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=S4(t);e.asyncValidator!==null?t.setAsyncValidators(ZR(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();e1(e._rawValidators,i),e1(e._rawAsyncValidators,i)}function j4(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&p1(t,e)})}function B4(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&p1(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function p1(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function U4(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function $4(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function H4(t){return Object.getPrototypeOf(t.constructor)===_4}function z4(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===ni?n=o:H4(o)?r=o:i=o}),i||r||n||null}function t1(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function n1(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var q4=class extends Vb{constructor(e=null,n,r){super(R4(n),P4(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),np(n)&&(n.nonNullable||n.initialValueIsDefault)&&(n1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){t1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){t1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){n1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var G4={provide:Cl,useExisting:Ia(()=>ao)},r1=(()=>Promise.resolve())(),ao=(()=>{let e=class e extends Cl{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new q4,this._registered=!1,this.name="",this.update=new Oe,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=z4(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),$4(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){F4(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){r1.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&zo(i);r1.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?O4(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(z(Ob,9),z(I4,10),z(x4,10),z(o1,10),z(Cr,8),z(f1,8))},e.\u0275dir=Me({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ii([G4]),wi,Ir]});let t=e;return t})();var W4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({});let t=e;return t})();var K4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({imports:[W4]});let t=e;return t})();var m1=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:f1,useValue:r.callSetDisabledState??Lb}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({imports:[K4]});let t=e;return t})();var Q4=(t,e)=>({"message-right":t,"message-left":e});function Y4(t,e){if(t&1&&(le(0,"div",13),at(1),ge()),t&2){let n=e.$implicit,r=$o();Ye("ngClass",ld(2,Q4,n.sender===r.user,n.sender!==r.user)),_t(1),Ar(" ",n.text," ")}}var g1=(()=>{let e=class e{constructor(r){this.sharedService=r,this.user="userB",this.messages=[],this.newMessage=""}ngOnInit(){this.refreshMessages()}refreshMessages(){this.sharedService.getMessages("userA","userB").subscribe(r=>{this.messages=r.sort((i,o)=>i.timestamp-o.timestamp),this.chatPartner=this.getChatPartnerName()})}getChatPartnerName(){let r=Array.from(new Set(this.messages.map(o=>o.sender))),i=r.indexOf(this.user);return r[(i+1)%r.length]}sendMessage(r){this.newMessage.trim()!==""&&this.sharedService.sendMessage(this.user,r,this.newMessage.trim()).then(()=>{this.newMessage="",console.log(this.messages),this.refreshMessages()})}getUniqueSenders(){return Array.from(new Set(this.messages.map(r=>r.sender)))}};e.\u0275fac=function(i){return new(i||e)(z(zn))},e.\u0275cmp=rt({type:e,selectors:[["app-chat"]],decls:30,vars:3,consts:[[2,"background-image","url(https://images.unsplash.com/photo-1682686580036-b5e25932ce9a?q=80&w=1975&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)"],[1,"kkmsgbx"],[1,"kkmsgbx1"],[1,"text-center"],[1,"kkmsgbx2"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"kkmsgbx3"],[1,"input-group","mb-3"],["type","text","placeholder","Type your message..","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-prepend"],["id","basic-addon1",1,"btn","kkmsgbtn","input-group-text",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-send"],["d","M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"],[3,"ngClass"]],template:function(i,o){i&1&&(le(0,"div",0),st(1,"br")(2,"br")(3,"br")(4,"br")(5,"br")(6,"br"),le(7,"mat-card",1)(8,"mat-card-header",2)(9,"div",3)(10,"h2"),at(11),ge()()(),le(12,"mat-card-content",4),ln(13,Y4,2,5,"div",5),ge(),le(14,"mat-card-footer",6)(15,"div",7)(16,"input",8),Ze("ngModelChange",function(a){return o.newMessage=a}),ge(),le(17,"div",9)(18,"button",10),Ze("click",function(){return o.sendMessage("userA")}),at(19,"Sent A"),le(20,"span"),at(21,"\xA0"),Wu(),le(22,"svg",11),st(23,"path",12),ge()()()()()()(),Ku(),st(24,"br")(25,"br")(26,"br")(27,"br")(28,"br")(29,"br"),ge()),i&2&&(_t(11),Ar("",o.chatPartner," Chat"),_t(2),Ye("ngForOf",o.messages),_t(3),Ye("ngModel",o.newMessage))},dependencies:[bd,Ed,ni,Xs,ao,Ad,Sd,Rd,Md],styles:[".kkmsgbx[_ngcontent-%COMP%]{width:400px;height:550px;margin-left:200px}.kkmsgbx1[_ngcontent-%COMP%]{width:400px;height:75px;background-color:#fff;border-top-right-radius:20px;border-top-left-radius:20px}.kkmsgbx2[_ngcontent-%COMP%]{width:400px;max-height:400px;background-color:#f2f2f2;overflow-y:auto}.kkmsgbx3[_ngcontent-%COMP%]{width:400px;height:75px;background-color:#fff;border-bottom-right-radius:20px;border-bottom-left-radius:20px}.kkmsgbtn[_ngcontent-%COMP%]{border-radius:4px;background:#A426D1;display:inline-flex;color:#fff;text-align:center;font-family:League Spartan,sans-serif;font-size:23px;font-weight:500}.message-right[_ngcontent-%COMP%]{text-align:right;padding:10px;margin:5px;border-radius:10px;font-family:League Spartan,sans-serif;background-color:#ee7fff}.message-left[_ngcontent-%COMP%]{text-align:left;font-family:League Spartan,sans-serif;padding:10px;margin:5px;border-radius:10px;background-color:#fff}.message-container[_ngcontent-%COMP%]{padding:5px;margin:5px;clear:both;overflow:auto}.kkmsgbx2[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;background-color:transparent}"]});let t=e;return t})();var Z4=(t,e)=>({"message-right":t,"message-left":e});function X4(t,e){if(t&1&&(le(0,"div",13),at(1),ge()),t&2){let n=e.$implicit,r=$o();Ye("ngClass",ld(2,Z4,n.sender===r.user,n.sender!==r.user)),_t(1),Ar(" ",n.text," ")}}var y1=(()=>{let e=class e{constructor(r){this.sharedService=r,this.user="userA",this.messages=[],this.newMessage=""}ngOnInit(){this.refreshMessages()}refreshMessages(){this.sharedService.getMessages("userA","userB").subscribe(r=>{this.messages=r.sort((i,o)=>i.timestamp-o.timestamp),this.chatPartner=this.getChatPartnerName()})}getChatPartnerName(){let r=Array.from(new Set(this.messages.map(o=>o.sender))),i=r.indexOf(this.user);return r[(i+1)%r.length]}sendMessage(r){this.newMessage.trim()!==""&&this.sharedService.sendMessage(this.user,r,this.newMessage.trim()).then(()=>{this.newMessage="",console.log(this.messages),this.refreshMessages()})}getUniqueSenders(){return Array.from(new Set(this.messages.map(r=>r.sender)))}};e.\u0275fac=function(i){return new(i||e)(z(zn))},e.\u0275cmp=rt({type:e,selectors:[["app-chat2"]],decls:30,vars:3,consts:[[2,"background-image","url(https://images.unsplash.com/photo-1682686580036-b5e25932ce9a?q=80&w=1975&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)"],[1,"kkmsgbx"],[1,"kkmsgbx1"],[1,"text-center"],[1,"kkmsgbx2"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"kkmsgbx3"],[1,"input-group","mb-3"],["type","text","placeholder","Type your message..","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-prepend"],["id","basic-addon1",1,"btn","kkmsgbtn","input-group-text",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-send"],["d","M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"],[3,"ngClass"]],template:function(i,o){i&1&&(le(0,"div",0),st(1,"br")(2,"br")(3,"br")(4,"br")(5,"br")(6,"br"),le(7,"mat-card",1)(8,"mat-card-header",2)(9,"div",3)(10,"h2"),at(11),ge()()(),le(12,"mat-card-content",4),ln(13,X4,2,5,"div",5),ge(),le(14,"mat-card-footer",6)(15,"div",7)(16,"input",8),Ze("ngModelChange",function(a){return o.newMessage=a}),ge(),le(17,"div",9)(18,"button",10),Ze("click",function(){return o.sendMessage("userB")}),at(19,"Sent B"),le(20,"span"),at(21,"\xA0"),Wu(),le(22,"svg",11),st(23,"path",12),ge()()()()()()(),Ku(),st(24,"br")(25,"br")(26,"br")(27,"br")(28,"br")(29,"br"),ge()),i&2&&(_t(11),Ar("",o.chatPartner," Chat"),_t(2),Ye("ngForOf",o.messages),_t(3),Ye("ngModel",o.newMessage))},dependencies:[bd,Ed,ni,Xs,ao,Ad,Sd,Rd,Md],styles:[".kkmsgbx[_ngcontent-%COMP%]{width:400px;height:550px;margin-left:200px}.kkmsgbx1[_ngcontent-%COMP%]{width:400px;height:75px;background-color:#fff;border-top-right-radius:20px;border-top-left-radius:20px}.kkmsgbx2[_ngcontent-%COMP%]{width:400px;max-height:400px;background-color:#f2f2f2;overflow-y:auto}.kkmsgbx3[_ngcontent-%COMP%]{width:400px;height:75px;background-color:#fff;border-bottom-right-radius:20px;border-bottom-left-radius:20px}.kkmsgbtn[_ngcontent-%COMP%]{border-radius:4px;background:#A426D1;display:inline-flex;color:#fff;text-align:center;font-family:League Spartan,sans-serif;font-size:23px;font-weight:500}.message-right[_ngcontent-%COMP%]{text-align:right;padding:10px;margin:5px;border-radius:10px;font-family:League Spartan,sans-serif;background-color:#ee7fff}.message-left[_ngcontent-%COMP%]{text-align:left;font-family:League Spartan,sans-serif;padding:10px;margin:5px;border-radius:10px;background-color:#fff}.message-container[_ngcontent-%COMP%]{padding:5px;margin:5px;clear:both;overflow:auto}.kkmsgbx2[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;background-color:transparent}"]});let t=e;return t})();function J4(t,e){t&1&&st(0,"div")}function eH(t,e){t&1&&(le(0,"h1"),at(1,"Welcome UserA!"),ge())}function tH(t,e){if(t&1&&ln(0,eH,2,0,"h1",3),t&2){let n=e.isUserA;Ye("ngIf",n)}}function nH(t,e){t&1&&(le(0,"h1"),at(1,"Welcome UserB!"),ge())}function rH(t,e){if(t&1&&ln(0,nH,2,0,"h1",3),t&2){let n=e.isUserA;Ye("ngIf",!n)}}var v1=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i,this.isUserA=!1,this.authService.user$.subscribe(o=>{o&&(this.isUserA=o.email==="karthikeyan.u.s4s@gmail.com",this.isUserA?this.router.navigate(["/userA"]):this.router.navigate(["/userB"]))})}};e.\u0275fac=function(i){return new(i||e)(z(zn),z(un))},e.\u0275cmp=rt({type:e,selectors:[["app-chat3"]],decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["userAContent",""],["userBContent",""],[4,"ngIf"]],template:function(i,o){if(i&1&&ln(0,J4,1,0,"div",0)(1,tH,1,1,"ng-template",null,1,dd)(3,rH,1,1,"ng-template",null,2,dd),i&2){let s=ad(2),a=ad(4);Ye("ngIf",o.isUserA)("ngIfThen",s)("ngIfElse",a)}},dependencies:[oD],styles:[".kkmsgbx[_ngcontent-%COMP%]{width:400px;height:550px;margin-left:200px}.kkmsgbx1[_ngcontent-%COMP%]{width:400px;height:75px;background-color:#fff;border-top-right-radius:20px;border-top-left-radius:20px}.kkmsgbx2[_ngcontent-%COMP%]{width:400px;max-height:400px;background-color:#f2f2f2;overflow-y:auto}.kkmsgbx3[_ngcontent-%COMP%]{width:400px;height:75px;background-color:#fff;border-bottom-right-radius:20px;border-bottom-left-radius:20px}.kkmsgbtn[_ngcontent-%COMP%]{border-radius:4px;background:#A426D1;display:inline-flex;color:#fff;text-align:center;font-family:League Spartan,sans-serif;font-size:23px;font-weight:500}.message-right[_ngcontent-%COMP%]{text-align:right;padding:10px;margin:5px;border-radius:10px;font-family:League Spartan,sans-serif;background-color:#ee7fff}.message-left[_ngcontent-%COMP%]{text-align:left;font-family:League Spartan,sans-serif;padding:10px;margin:5px;border-radius:10px;background-color:#fff}.message-container[_ngcontent-%COMP%]{padding:5px;margin:5px;clear:both;overflow:auto}.kkmsgbx2[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;background-color:transparent}"]});let t=e;return t})();var iH=[{path:"userA",component:g1},{path:"userB",component:y1},{path:"chat",component:v1}],_1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({imports:[Ry.forRoot(iH),Ry]});let t=e;return t})();var w1=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i,this.email="",this.password=""}signIn(){this.authService.signIn(this.email,this.password).then(()=>{this.router.navigate(["/chat"])}).catch(r=>{console.error(r)})}};e.\u0275fac=function(i){return new(i||e)(z(zn),z(un))},e.\u0275cmp=rt({type:e,selectors:[["app-example"]],decls:5,vars:2,consts:[[1,"authentication-container"],["placeholder","Email",3,"ngModel","ngModelChange"],["placeholder","Password",3,"ngModel","ngModelChange"],[3,"click"]],template:function(i,o){i&1&&(le(0,"div",0)(1,"input",1),Ze("ngModelChange",function(a){return o.email=a}),ge(),le(2,"input",2),Ze("ngModelChange",function(a){return o.password=a}),ge(),le(3,"button",3),Ze("click",function(){return o.signIn()}),at(4,"Sign In"),ge()()),i&2&&(_t(1),Ye("ngModel",o.email),_t(1),Ye("ngModel",o.password))},dependencies:[ni,Xs,ao],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap";*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-image:url(https://i.ibb.co/xqpypMx/back.png);background-size:100%;height:100vh;display:flex;align-items:center;justify-content:center;background-repeat:no-repeat;background-position:center;position:relative}.title[_ngcontent-%COMP%]{color:#fff;font-size:32px;font-weight:600;text-align:center;margin-bottom:15px;animation-name:_ngcontent-%COMP%_onloadAnim;animation-duration:1s}.formDiv[_ngcontent-%COMP%]{position:absolute;top:100px}.formDiv[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;color:#ffa467;margin-top:8px;text-decoration:none;letter-spacing:1px;transition:.3s;animation-name:_ngcontent-%COMP%_onloadAnim;animation-duration:1s}.formDiv[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.input-group[_ngcontent-%COMP%]{max-width:350px;width:100%;background:#f0f0f0;margin:10px 0;height:50px;border-radius:50px;display:grid;grid-template-columns:15% 85%;padding:0 .4rem;position:relative;animation-name:_ngcontent-%COMP%_onloadAnim;animation-duration:1s}.input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:center;line-height:50px;color:#acacac;transition:.5s;font-size:15px}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:none;outline:none;border:none;line-height:1;font-weight:500;font-size:14px;color:#333;transition:.3s}.btn[_ngcontent-%COMP%]{width:100%;height:45px;max-width:350px;background:#fff;border:2px solid #fff;border-radius:25px;color:#f26200;cursor:pointer;font-weight:500;transition:.3s;margin-top:10px;animation-name:_ngcontent-%COMP%_onloadAnim;animation-duration:1s}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;margin-left:4px}.btn[_ngcontent-%COMP%]:hover{background:none;color:#fff}@keyframes _ngcontent-%COMP%_onloadAnim{0%{transform:translateY(-88%)}to{transform:translateY(0)}}@media only screen and (max-width: 990px){body[_ngcontent-%COMP%]{background-size:130%}}@media only screen and (max-width: 740px){body[_ngcontent-%COMP%]{background-size:175%}}@media only screen and (max-width: 555px){body[_ngcontent-%COMP%]{background-size:245%}}@media only screen and (max-width: 420px){body[_ngcontent-%COMP%]{background-size:265%}}@media only screen and (max-width: 380px){body[_ngcontent-%COMP%]{background-size:320%}}']});let t=e;return t})();var b1=(()=>{let e=class e{constructor(){this.title="officewrk"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(i,o){i&1&&st(0,"app-example")(1,"router-outlet")},dependencies:[xy,w1]});let t=e;return t})();var E1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({});let t=e;return t})();var Bb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({imports:[er,Go,MD,er]});let t=e;return t})();var I1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({imports:[er,Bb,Bb,E1,er]});let t=e;return t})();var sH={apiKey:"AIzaSyCnQbgNXDJT6sy1_f8gx3d74kM-3FY2uCw",authDomain:"pubkin-6efd2.firebaseapp.com",projectId:"pubkin-6efd2",storageBucket:"pubkin-6efd2.appspot.com",messagingSenderId:"1019249625237",appId:"1:1019249625237:web:73473b4f492538851a739c"},x1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e,bootstrap:[b1]}),e.\u0275inj=ne({providers:[zn,DD()],imports:[xD,_1,m1,JC.initializeApp(sH),YR,KD,I1]});let t=e;return t})();ID().bootstrapModule(x1).catch(t=>console.error(t));
